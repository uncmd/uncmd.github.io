<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>提升体验</title>
      <link href="/share/easy-use/"/>
      <url>/share/easy-use/</url>
      
        <content type="html"><![CDATA[<blockquote><p>提升体验的日常收集</p></blockquote><a id="more"></a><h2 id="递归删除文件夹下所有-bin-和-obj-目录"><a href="#递归删除文件夹下所有-bin-和-obj-目录" class="headerlink" title="递归删除文件夹下所有 bin 和 obj 目录"></a>递归删除文件夹下所有 <code>bin</code> 和 <code>obj</code> 目录</h2><h3 id="Windows-的-cmd-命令工具"><a href="#Windows-的-cmd-命令工具" class="headerlink" title="Windows 的 cmd 命令工具"></a>Windows 的 <code>cmd</code> 命令工具</h3><pre class=" language-bash"><code class="language-bash">FOR /F <span class="token string">"tokens=*"</span> %%G IN <span class="token punctuation">(</span><span class="token string">'DIR /B /AD /S bin'</span><span class="token punctuation">)</span> DO RMDIR /S /Q <span class="token string">"%%G"</span>FOR /F <span class="token string">"tokens=*"</span> %%G IN <span class="token punctuation">(</span><span class="token string">'DIR /B /AD /S obj'</span><span class="token punctuation">)</span> DO RMDIR /S /Q <span class="token string">"%%G"</span></code></pre><h3 id="Windows-的-Powershell"><a href="#Windows-的-Powershell" class="headerlink" title="Windows 的 Powershell"></a>Windows 的 Powershell</h3><pre class=" language-bash"><code class="language-bash">Get-ChildItem .\ -include bin,obj -Recurse <span class="token operator">|</span> foreach <span class="token punctuation">(</span><span class="token variable">$_</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> remove-item <span class="token variable">$_</span>.fullname -Force -Recurse <span class="token punctuation">}</span></code></pre><h3 id="bash类型的命令行工具（git-bash-或者-Linux-OS-X-shells）"><a href="#bash类型的命令行工具（git-bash-或者-Linux-OS-X-shells）" class="headerlink" title="bash类型的命令行工具（git bash 或者 Linux/OS X shells）"></a>bash类型的命令行工具（git bash 或者 Linux/OS X shells）</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">find</span> <span class="token keyword">.</span> -iname <span class="token string">"bin"</span> -o -iname <span class="token string">"obj"</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -rf</code></pre>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Kafka协议上传日志到阿里云日志服务</title>
      <link href="/share/kafka-aliyun-log-service/"/>
      <url>/share/kafka-aliyun-log-service/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>最近入职新公司，公司准备接入阿里云的日志服务。公司服务器是自建的，不是云服务器，阿里云日志服务提供的日志采集代理Logtail用于采集阿里云ECS、自建IDC、其他云厂商等服务器上的日志，具有以下优势</p><ul><li><p>基于日志文件，无侵入式采集日志。您无需修改应用程序代码，且采集日志不会影响您的应用程序运行。</p></li><li><p>除采集文本日志外，还支持采集binlog、http数据、容器日志等。</p></li><li><p>对容器支持友好，支持标准容器、swarm集群、Kubernetes集群等容器集群的数据采集。</p></li><li><p>稳定处理日志采集过程中的各种异常。当遇到网络异常、服务端异常等问题时会采用主动重试、本地缓存数据等措施保障数据安全。</p></li><li><p>基于日志服务的集中管理能力。安装Logtail后，只需要在日志服务上配置机器组、Logtail采集配置等信息即可。</p></li><li><p>完善的自我保护机制。为保证运行在服务器上的Logtail，不会明显影响您服务器上其他服务的性能，Logtail在CPU、内存及网络使用方面都做了严格的限制和保护机制。</p></li></ul><p>但是Logtail采集需要服务器连接外网，而且网络要稳定，目前不是所有服务器都连了外网，故需要换一种采集方式。</p><p>阿里云日志服务还支持Web Tracking、Kafka协议上传、Syslog协议上传、Logstash采集、SDK采集等采集方式，因为考虑到旧应用的兼容性，最终主要采用Kafka协议上传日志方式采集日志。</p><p>可以使用各类Kafka Producer SDK或采集工具来采集日志，并通过Kafka协议上传到日志服务。</p><p>总体的日志采集架构如下</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/logserver/kafka-logserver.jpg" alt="" loading="lazy"></p><p>如上，旧应用使用采集工具采集文本日志发往Kafka Cluster，不需要改代码。新应用使用Kafka Producer SDK方式，将输出的日志发往Kafka Cluster。日志消费服务将Kafka Cluster中要发往日志服务的日志上传到阿里云日志服务。</p><p>也可以使用Logtail/Logstash/SDK等方式采集日志，然后直接上传到日志服务，缺点是应用所在的服务器必须能连接上阿里云日志服务，也就是需要外网。</p><p>下面将一步一步介绍上述架构的实现</p><h2 id="安装Kafka（Windows）"><a href="#安装Kafka（Windows）" class="headerlink" title="安装Kafka（Windows）"></a>安装Kafka（Windows）</h2><ul><li><p><a href="http://kafka.apache.org/downloads" target="_blank" rel="noopener">下载Kafka</a>，当前最新版本为2.5.0，下载二进制文件并解压缩到一个不含中文的目录</p></li><li><p>启动服务器</p></li></ul><p>Kafka 使用 ZooKeeper 如果你还没有ZooKeeper服务器，你需要先启动一个ZooKeeper服务器。 您可以通过与kafka打包在一起的便捷脚本来快速简单地创建一个单节点ZooKeeper实例。</p><p>在解压缩文件夹打开命令行</p><pre class=" language-bash"><code class="language-bash">bin/windows/zookeeper-server-start.bat config/zookeeper.properties</code></pre><blockquote><p>遇到语法错误的报错，是因为目录层级太深或者是目录名字太长导致的，把Kafka的目录放到D盘根目录下就OK了。</p></blockquote><p>新开一个命令行，启动Kafka服务</p><pre class=" language-bash"><code class="language-bash">bin/windows/kafka-server-start.bat config/server.properties</code></pre><p>Kafka服务的默认端口为9092</p><ul><li>创建一个topic</li></ul><pre class=" language-bash"><code class="language-bash">bin/windows/kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic <span class="token function">test</span></code></pre><p>运行list命令查看topic</p><pre class=" language-bash"><code class="language-bash">bin/windows/kafka-topics.bat --list --zookeeper localhost:2181</code></pre><ul><li>发送消息</li></ul><pre class=" language-bash"><code class="language-bash">bin/windows/kafka-console-producer.bat --broker-list localhost:9092 --topic <span class="token function">test</span>This is a messageThis is another message</code></pre><ul><li>启动一个 consumer</li></ul><pre class=" language-bash"><code class="language-bash">bin/windows/kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic <span class="token function">test</span> --from-beginning</code></pre><p>命令执行过程入下图</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/logserver/kafka-bash.jpg" alt="" loading="lazy"></p><p>这样一个简单的Kafka就安装好了，后面基于本地Kafka开发</p><h2 id="Kafka-Producer-SDK上传日志到Kafka-Cluster"><a href="#Kafka-Producer-SDK上传日志到Kafka-Cluster" class="headerlink" title="Kafka Producer SDK上传日志到Kafka Cluster"></a>Kafka Producer SDK上传日志到Kafka Cluster</h2><p>本项目是基于.Net开发的，考虑到日志的灵活性以及使用便利性，决定使用Serilog作为日志组件，开发一个Serilog Sink Kafka，在写本地日志的同时把日志发送到Kafka Cluster，应用只需在启动的时候配置Kafka Sink参数，写日志的时候正常写入即可。</p><h3 id="Serilog介绍"><a href="#Serilog介绍" class="headerlink" title="Serilog介绍"></a>Serilog介绍</h3><p>与.NET的许多其他库一样，Serilog也提供对文件，控制台和 其他地方的诊断日志记录 。它易于设置，具有简洁的API，并且可以在最新的.NET平台之间移植。</p><p>与其他日志记录库不同，Serilog在构建时考虑了强大的结构化事件数据。</p><p>Serilog 消息模板是扩展.NET格式字符串的简单DSL。可以命名参数，并将其值序列化为事件的属性，以实现难以置信的搜索和排序灵活性：</p><h3 id="Serilog-Sink-Kafka"><a href="#Serilog-Sink-Kafka" class="headerlink" title="Serilog.Sink.Kafka"></a>Serilog.Sink.Kafka</h3><p>Serilog写日志和接收日志是分离的，有Serilog和Sink两部分，Serilog负责写日志，Sink负责接收日志。同一条日志可以同时被多个接收器消费，社区提供了许多Sink，比如Serilog.Sink.File、Serilog.Sink.Console、Serilog.Sink.Debug等。</p><p>现在我们需要自定义一个Serilog.Sink.Kafka接收器，用于把日志发送到Kafka。</p><p>自定义Sink需要实现 <code>ILogEventSink</code> 接口，这里我使用了 <code>Serilog.Sinks.PeriodicBatching</code> 提供的批量异步功能，代码如下</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// Serilog Kafka Sink - 允许您使用Serilog将日志发送到Kafka</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">KafkaSink</span> <span class="token punctuation">:</span> PeriodicBatchingSink    <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">readonly</span> ITextFormatter _formatter<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">readonly</span> KafkaClient _client<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">KafkaSink</span><span class="token punctuation">(</span>KafkaClientConfiguration configuration<span class="token punctuation">,</span>            KafkaSinkConfiguration sinkConfiguration<span class="token punctuation">)</span>             <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>sinkConfiguration<span class="token punctuation">.</span>BatchPostingLimit<span class="token punctuation">,</span> sinkConfiguration<span class="token punctuation">.</span>Period<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            _formatter <span class="token operator">=</span> sinkConfiguration<span class="token punctuation">.</span>TextFormatter<span class="token punctuation">;</span>            _client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">KafkaClient</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">async</span> Task <span class="token function">EmitBatchAsync</span><span class="token punctuation">(</span>IEnumerable<span class="token operator">&lt;</span>LogEvent<span class="token operator">></span> events<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">var</span> logEvent <span class="token keyword">in</span> events<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">var</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                _formatter<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span>logEvent<span class="token punctuation">,</span> sw<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">await</span> _client<span class="token punctuation">.</span><span class="token function">PublishAsync</span><span class="token punctuation">(</span>sw<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>在重写的 <code>EmitBatchAsync</code> 方法中消费日志事件，其中 <code>ITextFormatter</code> 是应用启动时配置的文本格式化类型，默认为 <code>CompactJsonFormatter</code> 类型，它时紧凑的Json类型，比一般的Json类型体积更小，其中一些具体化的属性如下，<a href="https://github.com/serilog/serilog-formatting-compact" target="_blank" rel="noopener">CompactJsonFormatter仓库地址</a></p><table><thead><tr><th>Property</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>@t</code></td><td>Timestamp</td><td>An ISO 8601 timestamp</td></tr><tr><td><code>@m</code></td><td>Message</td><td>A fully-rendered message describing the event</td></tr><tr><td><code>@mt</code></td><td>Message Template</td><td>Alternative to Message; specifies a <a href="http://messagetemplates.org" target="_blank" rel="noopener">message template</a> over the event’s properties that provides for rendering into a textual description of the event</td></tr><tr><td><code>@l</code></td><td>Level</td><td>An implementation-specific level identifier (string or number)</td></tr><tr><td><code>@x</code></td><td>Exception</td><td>A language-dependent error representation potentially including backtrace</td></tr><tr><td><code>@i</code></td><td>Event id</td><td>An implementation specific event id (string or number)</td></tr><tr><td><code>@r</code></td><td>Renderings</td><td>If <code>@mt</code> includes tokens with programming-language-specific formatting, an array of pre-rendered values for each such token</td></tr></tbody></table><p>核心方法是 <code>_client.PublishAsync</code> 方法，代码如下</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token keyword">public</span> <span class="token keyword">async</span> Task <span class="token function">PublishAsync</span><span class="token punctuation">(</span><span class="token keyword">string</span> message<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProducerBuilder</span><span class="token operator">&lt;</span>Null<span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token operator">></span><span class="token punctuation">(</span>_config<span class="token punctuation">.</span>ProducerConfig<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">try</span>            <span class="token punctuation">{</span>                <span class="token keyword">var</span> dr <span class="token operator">=</span> <span class="token keyword">await</span> p<span class="token punctuation">.</span><span class="token function">ProduceAsync</span><span class="token punctuation">(</span>_config<span class="token punctuation">.</span>Topic<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token operator">&lt;</span>Null<span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token operator">></span> <span class="token punctuation">{</span> Value <span class="token operator">=</span> message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ProduceException</span><span class="token operator">&lt;</span>Null<span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token operator">></span> e<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>$<span class="token string">"发送失败: {e.Error.Reason}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><p>这个方法很简单，就是构建一个Kafka生产者对象，然后根据配置的主题发送消息到Kafka，如此一个Serilog.Sink.Kafka就开发完成了。</p><p>完整代码将发布到GitHub</p><h2 id="采集工具上传日志到Kafka-Cluster"><a href="#采集工具上传日志到Kafka-Cluster" class="headerlink" title="采集工具上传日志到Kafka Cluster"></a>采集工具上传日志到Kafka Cluster</h2><h2 id="Kafka-Cluster日志上传到日志服务"><a href="#Kafka-Cluster日志上传到日志服务" class="headerlink" title="Kafka Cluster日志上传到日志服务"></a>Kafka Cluster日志上传到日志服务</h2><h2 id="SDK采集日志上传到日志服务"><a href="#SDK采集日志上传到日志服务" class="headerlink" title="SDK采集日志上传到日志服务"></a>SDK采集日志上传到日志服务</h2>]]></content>
      
      
      <categories>
          
          <category> 阿里云 </category>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
            <tag> kafka </tag>
            
            <tag> 消息队列 </tag>
            
            <tag> 阿里云 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>房思琪的初恋乐园</title>
      <link href="/books/fsq-share/"/>
      <url>/books/fsq-share/</url>
      
        <content type="html"><![CDATA[<blockquote><p>并不是挣脱了危险的人，劫后余生的人，才叫幸存者。每一个普普通通过着人生的我们都是幸存者。</p></blockquote><p><a href="https://uncmd.github.io/books/fsq-share/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/books/fsq-face.jpg" alt="" loading="lazy"></a></p><a id="more"></a><p>1.为什么是我不会？为什么不是我不要？为什么不是你不可以？直到现在我才知道这整起事件可以化约成这第一幕：他用硬插进来，而我为此道歉。</p><p>2.最终让李国华决定走这一步的是房思琪的自尊心。一个如此精致的小孩是不会说出去的，因为这太脏了。自尊心往往是一根伤人伤己的针，但是在这里，自尊心会缝起她的嘴。</p><p>3.不只是他戳破我的童年，我也可以戳破自己的童年。不只是他要，我也可以要。如果我先把自己丢弃了，那他就不能再丢弃一次。反正我们原来说爱老师，你爱的人要对你做什么都可以。不是吗？</p><p>4.【我们的家教好像什么都有，就是没有性教育】【什么性教育，性教育是给那些需要性的人，所谓教育不就是这样吗？】在这个故事中父母将永远缺席，他们旷课了，却自以为是还没开学。</p><p>5.桃花跟他的名气和财富来得一样快，他偶尔会有错觉，名利是教书的附加价值，粉红色情书才是目的。铜钱是臭的，情书是香的。</p><p>6.他发现社会对性的禁忌感太方便了，强暴一个女生，全世界都觉得是她自己的错，连她都觉得是自己的错。罪恶感又会把她赶回他身边。罪恶感是古老而血统纯正的牧羊犬。一个个小女生是在学会走稳之前就被逼着跑起来的犊羊。</p><p>7.她没有办法说出口，其实是我配不上你们。我是馊掉的橙子汁和浓汤，我是爬满虫卵的玫瑰和百合，我是一个灯火流丽的都市里明明存在却没有人看得到也没有人需要的北极星。</p><p>8.多可悲，这是我的我家乡，而有好多地方我再也不敢踏上，就好像记忆的胶卷拉成危险的黄布条。</p><p>9.忍耐不是美德，把忍耐当成美德是这个伪善的世界维持它扭曲的秩序的方式，生气才是美德。</p><p>10.你想想，能看到你书的人是多么幸运，他们不用接触，就能看到世界的背面。</p><blockquote><p>愿所有姑娘都遇良师、择贤友，愿你们平安健康，能享快意人生。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 那些年立的Flag </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 部署 .NET Core（Docker Compose）</title>
      <link href="/share/docker-compose/"/>
      <url>/share/docker-compose/</url>
      
        <content type="html"><![CDATA[<blockquote><p>使用 Docker Compose 部署多容器应用</p></blockquote><p><strong>运行环境</strong></p><ul><li><p>腾讯云</p></li><li><p>CentOS 7.5 64位</p></li><li><p>1核 2GB内存 1M带宽</p></li></ul><a id="more"></a><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>多数的现代应用通过多个更小的服务互相协同来组成一个完整可用的应用，比如一个简单的示例应用可能由如下4个服务组成</p><ul><li><p>Web前端</p></li><li><p>订单管理</p></li><li><p>品类管理</p></li><li><p>后台数据库</p></li></ul><p>部署和管理多个服务是困难的，Docker Compose 通过一个声明式的配置文件描述整个应用，从而使用一条命令完成部署，还可以通过一系列简单的命令实现对其完整生命周期的管理。</p><h2 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h2><h3 id="安装-Docker-Compose"><a href="#安装-Docker-Compose" class="headerlink" title="安装 Docker Compose"></a>安装 Docker Compose</h3><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> docker-compose</code></pre><p>检查安装情况以及版本</p><pre class=" language-bash"><code class="language-bash">docker-compose --versiondocker-compose version 1.18.0, build 8dd22a9</code></pre><h3 id="Compose-文件"><a href="#Compose-文件" class="headerlink" title="Compose 文件"></a>Compose 文件</h3><p>Docker compose 使用 YAML 文件来定义多服务的应用，YAML 是 JSON 的一个子集，因此也可以使用 JSON。</p><p>Docker Compose 默认使用文件名 <code>docker-compose.yml</code>，也可以使用 <code>-f</code> 参数指定具体文件</p><p>一个简单的 Compose 文件示例</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.5"</span><span class="token key atrule">services</span><span class="token punctuation">:</span>  <span class="token key atrule">web-fe</span><span class="token punctuation">:</span>    <span class="token key atrule">build</span><span class="token punctuation">:</span> .    <span class="token key atrule">command</span><span class="token punctuation">:</span> python app.py    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">target</span><span class="token punctuation">:</span> <span class="token number">5000</span>        <span class="token key atrule">published</span><span class="token punctuation">:</span> <span class="token number">5000</span>    <span class="token key atrule">networks</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> counter<span class="token punctuation">-</span>net    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> volume        <span class="token key atrule">source</span><span class="token punctuation">:</span> counter<span class="token punctuation">-</span>vol        <span class="token key atrule">target</span><span class="token punctuation">:</span> /code  <span class="token key atrule">redis</span><span class="token punctuation">:</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">"redis:alpine"</span>    <span class="token key atrule">networks</span><span class="token punctuation">:</span>      <span class="token key atrule">counter-net</span><span class="token punctuation">:</span><span class="token key atrule">networks</span><span class="token punctuation">:</span>  <span class="token key atrule">counter-net</span><span class="token punctuation">:</span><span class="token key atrule">volumes</span><span class="token punctuation">:</span>  counter<span class="token punctuation">-</span>vol<span class="token punctuation">:</span></code></pre><p>version是必须指定的，而且总是位于文件的第一行，它定义了 Compose 文件格式的版本。</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Compose </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 部署 .NET Core（Docker 运行 PostgreSQL）</title>
      <link href="/share/docker-postgresql/"/>
      <url>/share/docker-postgresql/</url>
      
        <content type="html"><![CDATA[<blockquote><p>在 Docker 中运行 PostgreSql</p></blockquote><p><strong>运行环境</strong></p><ul><li><p>腾讯云</p></li><li><p>CentOS 7.5 64位</p></li><li><p>1核 2GB内存 1M带宽</p></li></ul><a id="more"></a><h2 id="Docker-运行-PostgreSQL"><a href="#Docker-运行-PostgreSQL" class="headerlink" title="Docker 运行 PostgreSQL"></a>Docker 运行 PostgreSQL</h2><ol><li>拉取postgreSQL的docker镜像文件</li></ol><pre class=" language-bash"><code class="language-bash">docker pull postgres</code></pre><ol start="2"><li>创建 docker volume</li></ol><pre class=" language-bash"><code class="language-bash">docker volume create dv_pgdata</code></pre><ol start="3"><li>启动容器，用 <code>-v</code> 指定 postgres 的数据目录映射到上面创建的 dv_pgdata（默认用户名postgres）</li></ol><pre class=" language-bash"><code class="language-bash">docker run --name uncmd_postgres -v dv_pgdata:/var/lib/postgresql/data -e POSTGRES_PASSWORD<span class="token operator">=</span>xxxxxx -p 5432:5432 -d postgres:latest</code></pre><ol start="4"><li>查看 docker volume</li></ol><pre class=" language-bash"><code class="language-bash">docker volume <span class="token function">ls</span></code></pre><ol start="5"><li>查看 volume 信息</li></ol><pre class=" language-bash"><code class="language-bash">docker inspect dv_pgdata</code></pre><ol start="6"><li>进入镜像</li></ol><pre class=" language-bash"><code class="language-bash">docker <span class="token function">exec</span> -it uncmd_postgres /bin/bash</code></pre><ol start="7"><li>连接数据库</li></ol><pre class=" language-bash"><code class="language-bash">psql -U postgres</code></pre><ol start="8"><li>查看数据库</li></ol><pre class=" language-bash"><code class="language-bash">postgres<span class="token operator">=</span><span class="token comment" spellcheck="true"># \l</span>                                 List of databases   Name    <span class="token operator">|</span>  Owner   <span class="token operator">|</span> Encoding <span class="token operator">|</span>  Collate   <span class="token operator">|</span>   Ctype    <span class="token operator">|</span>   Access privileges   -----------+----------+----------+------------+------------+----------------------- postgres  <span class="token operator">|</span> postgres <span class="token operator">|</span> UTF8     <span class="token operator">|</span> en_US.utf8 <span class="token operator">|</span> en_US.utf8 <span class="token operator">|</span>  template0 <span class="token operator">|</span> postgres <span class="token operator">|</span> UTF8     <span class="token operator">|</span> en_US.utf8 <span class="token operator">|</span> en_US.utf8 <span class="token operator">|</span> <span class="token operator">=</span>c/postgres          +           <span class="token operator">|</span>          <span class="token operator">|</span>          <span class="token operator">|</span>            <span class="token operator">|</span>            <span class="token operator">|</span> postgres<span class="token operator">=</span>CTc/postgres template1 <span class="token operator">|</span> postgres <span class="token operator">|</span> UTF8     <span class="token operator">|</span> en_US.utf8 <span class="token operator">|</span> en_US.utf8 <span class="token operator">|</span> <span class="token operator">=</span>c/postgres          +           <span class="token operator">|</span>          <span class="token operator">|</span>          <span class="token operator">|</span>            <span class="token operator">|</span>            <span class="token operator">|</span> postgres<span class="token operator">=</span>CTc/postgres<span class="token punctuation">(</span>3 rows<span class="token punctuation">)</span></code></pre><ol start="9"><li>数据库操作</li></ol><pre class=" language-bash"><code class="language-bash">create database auth <span class="token comment" spellcheck="true"># 创建数据库 auth</span>\c auth <span class="token comment" spellcheck="true"># 连接到 auth 数据库</span>\d <span class="token comment" spellcheck="true"># 列出当前数据库的所有表</span></code></pre><ol start="10"><li>在应用程序中设置连接字符串</li></ol><pre class=" language-json"><code class="language-json">  <span class="token property">"ConnectionStrings"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"Default"</span><span class="token operator">:</span> <span class="token string">"Host=your-server-ip; Port=5432; User Id=postgres; Password=xxxxxx; Database=auth;"</span>  <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> PostgreSql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 部署 .NET Core（搭建私有镜像仓库）</title>
      <link href="/share/self-docker-registry/"/>
      <url>/share/self-docker-registry/</url>
      
        <content type="html"><![CDATA[<blockquote><p>前面我们是把dll发布到服务器，然后在服务器把dll打包成镜像，更通用的做法是在本地打包成镜像然后推送到镜像仓库，服务器拉取最新镜像运行容器。镜像仓库可以是Docker官方的公共镜像仓库<a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>，为了避免暴露也可以自建私有镜像仓库。下面简单介绍自建私有镜像仓库及其发布部署流程。</p></blockquote><p><strong>运行环境</strong></p><ul><li><p>腾讯云</p></li><li><p>CentOS 7.5 64位</p></li><li><p>1核 2GB内存 1M带宽</p></li></ul><a id="more"></a><h2 id="Registry私有镜像仓库"><a href="#Registry私有镜像仓库" class="headerlink" title="Registry私有镜像仓库"></a>Registry私有镜像仓库</h2><p><a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>是 Docker 默认的官方镜像仓库，包含许多镜像。如果想要搭建私有镜像仓库， Docker 提供了 Registry 镜像，使得搭建私有仓库非常简单。</p><h3 id="搭建镜像仓库"><a href="#搭建镜像仓库" class="headerlink" title="搭建镜像仓库"></a>搭建镜像仓库</h3><ol><li>先在服务器中下周 Registry 镜像</li></ol><pre class=" language-bash"><code class="language-bash">docker pull registry</code></pre><ol start="2"><li>运行一个 Registry 镜像仓库的容器实例</li></ol><pre class=" language-bash"><code class="language-bash">docker run -d -v /edc/images/registry:/var/lib/registry -p 6000:5000 --restart<span class="token operator">=</span>always --name uncmd-registry registry</code></pre><ol start="3"><li>查看镜像</li></ol><pre class=" language-bash"><code class="language-bash">curl http://your-server-ip:6000/v2/_catalog</code></pre><ol start="4"><li>上传镜像</li></ol><blockquote><p>要上传镜像到私有仓库，需要在镜像的 tag 上加入仓库地址</p></blockquote><pre class=" language-bash"><code class="language-bash">docker tag your-image-name:tagname your-server-ip:6000/your-image-name:tagname</code></pre><blockquote><p>注意仓库地址没有加协议部分，docker 默认的安全策略需要仓库是支持 https 的，如果服务器只能使用 http 传输，那么直接上传会失败，需要在 docker 客户端的配置文件中进行声明，增加 <code>insecure-registries</code> 配置。</p></blockquote><pre class=" language-bash"><code class="language-bash">vim /etc/docker/daemon.json<span class="token punctuation">{</span>    <span class="token string">"registry-mirrors"</span><span class="token keyword">:</span> <span class="token punctuation">[</span><span class="token string">"https://registry.docker-cn.com"</span><span class="token punctuation">]</span>,    <span class="token string">"insecure-registries"</span><span class="token keyword">:</span> <span class="token punctuation">[</span><span class="token string">"150.158.107.66:6000"</span><span class="token punctuation">]</span>,    <span class="token string">"live-restore"</span><span class="token keyword">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span></code></pre><p>重新启动 docker 服务使配置生效</p><pre class=" language-bash"><code class="language-bash">systemctl restart docker</code></pre><blockquote><p>开始上传镜像到服务端镜像仓库</p></blockquote><pre class=" language-bash"><code class="language-bash">docker push your-registry-server-ip:6000/your-image-name:tagname</code></pre><ol start="5"><li>下载镜像</li></ol><p>直接使用 <code>pull</code> 命令下载镜像即可</p><pre class=" language-bash"><code class="language-bash">docker pull your-server-ip:6000/your-image-name:tagname</code></pre><p>可以通过下面的api获取要下载的镜像有哪些tag（版本）</p><pre class=" language-bash"><code class="language-bash">curl http://your-server-ip:6000/v2/your-image-name/tags/list</code></pre>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> .NET Core </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MSBuild自定义生成</title>
      <link href="/share/customize-your-build/"/>
      <url>/share/customize-your-build/</url>
      
        <content type="html"><![CDATA[<blockquote><p>使用标准生成进程（导入 Microsoft.Common.props 和 Microsoft.Common.targets）的 MSBuild 项目有多个可用于自定义生成过程的扩展性挂钩。</p></blockquote><blockquote><p><a href="https://docs.microsoft.com/zh-cn/visualstudio/msbuild/customize-your-build?view=vs-2019" target="_blank" rel="noopener">Microsoft Doc 自定义生成</a></p></blockquote><p><a href="https://uncmd.github.io/share/customize-your-build/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/customize-your-build.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="Directory-Build-props-和-Directory-Build-targets"><a href="#Directory-Build-props-和-Directory-Build-targets" class="headerlink" title="Directory.Build.props 和 Directory.Build.targets"></a>Directory.Build.props 和 Directory.Build.targets</h2><p>在 MSBuild 15 版之前，如果要向解决方案中的项目提供新的自定义属性，必须手动向解决方案中的每个项目文件添加一个针对该属性的引用。 另外，还必须在 <code>.props</code> 文件中定义属性，然后在解决方案的每个项目中显式导入该 <code>.props</code> 文件。</p><p>但现在，通过在包含源的根文件夹的名为 <code>Directory.Build.props</code>  的单个文件中定义一个新属性，只需一步即可向每个项目添加该属性。 在 MSBuild 运行时，<code>Microsoft.Common.props</code>  会搜索 <code>Directory.Build.props</code>  文件的目录结构（<code>Microsoft.Common.targets</code>  将查找 <code>Directory.Build.targets</code>  ）。 如果找到，就会导入该属性。 <code>Directory.Build.props</code>  是用户定义文件，对目录下的项目提供自定义选项。</p><blockquote><p><strong>注意</strong></p></blockquote><blockquote><p>基于 Linux 的文件系统区分大小写。 请确保 Directory.Build.props 文件名的大小写完全匹配，否则将不会在生成流程中检测到它。</p></blockquote><h3 id="Directory-Build-props-示例"><a href="#Directory-Build-props-示例" class="headerlink" title="Directory.Build.props 示例"></a>Directory.Build.props 示例</h3><p>例如，如果想要使所有项目都可以访问新的 Roslyn /deterministic  功能（属性 <code>$(Deterministic)</code> 在 Roslyn <code>CoreCompile</code> 目标中公开了此功能），可以执行以下操作。</p><ol><li><p>在存储库根目录中创建一个名为 Directory.Build.props  的新文件。</p></li><li><p>将以下 XML 添加到此文件。</p></li></ol><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Project</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LangVersion</span><span class="token punctuation">></span></span>latest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LangVersion</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Version</span><span class="token punctuation">></span></span>1.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Authors</span><span class="token punctuation">></span></span>uncmd<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Authors</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Description</span><span class="token punctuation">></span></span>An abp microservice demo.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Description</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NoWarn</span><span class="token punctuation">></span></span>$(NoWarn);CS1591<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NoWarn</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageProjectUrl</span><span class="token punctuation">></span></span>https://uncmd.github.io/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PackageProjectUrl</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RepositoryType</span><span class="token punctuation">></span></span>git<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RepositoryType</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RepositoryUrl</span><span class="token punctuation">></span></span>https://github.com/uncmd/uncmd<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RepositoryUrl</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageLicenseExpression</span><span class="token punctuation">></span></span>MIT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PackageLicenseExpression</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ItemGroup</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PackageReference</span> <span class="token attr-name">Include</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>SourceLink.Create.CommandLine<span class="token punctuation">"</span></span> <span class="token attr-name">Version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2.8.3<span class="token punctuation">"</span></span> <span class="token attr-name">PrivateAssets</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>All<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ItemGroup</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Project</span><span class="token punctuation">></span></span></code></pre><ol start="3"><li>运行 MSBuild。 项目现有的 Microsoft.Common.props  和 Microsoft.Common.targets  导入会找到该文件并将其导入。</li></ol><h3 id="搜索范围"><a href="#搜索范围" class="headerlink" title="搜索范围"></a>搜索范围</h3><p>搜索 Directory.Build.props  文件时，MSBuild 将从项目位置 (<code>$(MSBuildProjectFullPath)</code>) 向上搜索目录结构，找到 Directory.Build.props  文件后停止。 例如，如果 <code>$(MSBuildProjectFullPath)</code> 为 c:\users\username\code\test\case1  ，MSBuild 将从该位置开始搜索，然后向上搜索目录结构，直到找到 Directory.Build.props  文件，如以下目录结构中所示。</p><pre><code>c:\users\username\code\test\case1c:\users\username\code\testc:\users\username\codec:\users\usernamec:\usersc:\</code></pre><p>解决方案文件的位置与 Directory.Build.props  无关。</p><h3 id="导入顺序"><a href="#导入顺序" class="headerlink" title="导入顺序"></a>导入顺序</h3><p>Directory.Build.props 很早便已导入 Microsoft.Common.props，因此它无法使用后来定义的属性。 因此，请避免引用尚未定义的属性（否则计算结果将为空）。</p><p>从 NuGet 包导入 .targets  文件后，会从 Microsoft.Common.targets  导入 Directory.Build.targets  。 因此，它会重写大部分生成逻辑中定义的属性和目标，但有时候，可能需要在最终导入后自定义项目文件。</p><h3 id="用例：多级别合并"><a href="#用例：多级别合并" class="headerlink" title="用例：多级别合并"></a>用例：多级别合并</h3><p>假设你具有此标准解决方案结构：</p><pre><code>\  MySolution.sln  Directory.Build.props     (1)  \src    Directory.Build.props   (2-src)    \Project1    \Project2  \test    Directory.Build.props   (2-test)    \Project1Tests    \Project2Tests</code></pre><p>则可能需要具有所有项目 (1)  的通用属性、src  项目 (2-src)  的通用属性，以及 test  项目 (2-test)  的通用属性。</p><p>若要 MSBuild 正确地合并“内部”文件（2-src 和 2-test）和“外部”文件 (1)，必须考虑到 MSBuild 找到 Directory.Build.props 文件后会立即停止进一步的扫描     。 要继续扫描并合并到外部文件，请将此代码置于这两个内部文件中：</p><p><code>&lt;Import Project=&quot;$([MSBuild]::GetPathOfFileAbove(&#39;Directory.Build.props&#39;, &#39;$(MSBuildThisFileDirectory)../&#39;))&quot; /&gt;</code></p><p>MSBuild 的常规方法汇总如下：</p><ul><li>对于任何给定的项目，MSBuild 在解决方案结构中向上查找第一个 Directory.Build.props  ，将其与默认项合并，然后停止扫描</li><li>如果要找到并合并多个级别，则从“内部”文件 <a href="../msbuild/property-functions.md#msbuild-getpathoffileabove"><code>&lt;Import...&gt;</code></a>（如上所示）“外部”文件</li><li>如果“外部”文件本身不会再导入其上的内容，则扫描在此处停止</li><li>要控制扫描/合并过程，请使用 <code>$(DirectoryBuildPropsPath)</code> 和 <code>$(ImportDirectoryBuildProps)</code></li></ul><p>或再简单点：不能导入任何内容的第一个 Directory.Build.props 即为 MSBuild 停止的位置  。</p><h3 id="选择将属性添加到-props-文件或-targets-文件"><a href="#选择将属性添加到-props-文件或-targets-文件" class="headerlink" title="选择将属性添加到 .props 文件或 .targets 文件"></a>选择将属性添加到 .props 文件或 .targets 文件</h3><p>MSBuild 依赖于导入顺序，属性（或 <code>UsingTask</code> 或目标）的最后一个定义是使用的定义。</p><p>使用显式导入时，可以随时从 .props  或 .targets  文件导入。 下面介绍广泛使用的约定：</p><ul><li><p>.props  文件在导入顺序的早期导入。</p></li><li><p>.targets  文件在生成顺序的后期导入。</p></li></ul><p>此约定由 <code>&lt;Project Sdk=&quot;SdkName&quot;&gt;</code> 导入强制执行（即，在文件的所有内容之前首先导入 Sdk.props  ，然后在文件的所有内容之后最后导入 Sdk.targets  ）。</p><p>在决定在何处放置属性后，使用以下通用原则：</p><ul><li><p>对于许多属性，在何处定义它们并不重要，因为它们不会被覆盖，只能在执行时读取。</p></li><li><p>对于可能在单个项目中自定义的行为，请在 .props  文件中设置默认值。</p></li><li><p>通过读取可能自定义属性的值，避免在 .props  文件中设置依赖属性，因为在 MSBuild 读取用户项目之前不会进行自定义。</p></li><li><p>在 .targets  文件中设置依赖属性，因为它们将从单个项目中提取自定义项。</p></li><li><p>如果需要覆盖属性，请在所有用户项目自定义项生效后，在 .targets  文件中执行此操作。 使用派生属性时务必小心；还可能需要覆盖派生属性。</p></li><li><p>包括 .props  文件中的项目（以属性为条件）。 在任何项目之前都要考虑所有属性，因此可以提取用户项目属性自定义项，这使用户的项目有机会 <code>Remove</code> 或 <code>Update</code> 导入所引入的任何项目。</p></li><li><p>定义 .targets  文件中的目标。 但是，如果 SDK 导入了 .targets  文件，请记住此方案使得覆盖目标更加困难，因为默认情况下用户的项目没有可以覆盖它的地方。</p></li><li><p>如果可能，宁可在评估时自定义属性，也不更改目标内的属性。 此原则可以更轻松地加载项目并了解正在执行的操作。</p></li></ul><h2 id="MSBuildProjectExtensionsPath"><a href="#MSBuildProjectExtensionsPath" class="headerlink" title="MSBuildProjectExtensionsPath"></a>MSBuildProjectExtensionsPath</h2><p>默认情况下，Microsoft.Common.props 导入 <code>$(MSBuildProjectExtensionsPath)$(MSBuildProjectFile).*.props</code>，Microsoft.Common.targets 导入 <code>$(MSBuildProjectExtensionsPath)$(MSBuildProjectFile).*.targets</code>   。 <code>MSBuildProjectExtensionsPath</code> 的默认值是 <code>$(BaseIntermediateOutputPath)</code>、<code>obj/</code>。 NuGet 用此机制来引用随包提供的生成逻辑，也就是说，在还原时，它会创建引用包内容的 <code>{project}.nuget.g.props</code> 文件。</p><p>可以通过在 Directory.Build.props 中或者在导入 Microsoft.Common.props 前将属性 <code>ImportProjectExtensionProps</code> 设为 <code>false</code> 来禁用此扩展性机制   。</p><blockquote><p><strong>注意</strong></p></blockquote><blockquote><p>禁用 MSBuildProjectExtensionsPath 导入将阻止在 NuGet 包中提供的生成逻辑应用到你的项目。 一些 NuGet 包需要生成逻辑来执行其功能，并且在禁用该功能时会呈现不可用。</p></blockquote><h2 id="user-文件"><a href="#user-文件" class="headerlink" title=".user 文件"></a>.user 文件</h2><p>Microsoft.Common.CurrentVersion.targets 会导入 <code>$(MSBuildProjectFullPath).user</code>（如果存在），因此可以使用其他文件扩展名在你的项目旁创建一个文件  。 对于计划签入源代码管理的长期更改，最好更改项目本身，以便将来的维护人员不必了解此扩展机制。</p><h2 id="MSBuildExtensionsPath-和-MSBuildUserExtensionsPath"><a href="#MSBuildExtensionsPath-和-MSBuildUserExtensionsPath" class="headerlink" title="MSBuildExtensionsPath 和 MSBuildUserExtensionsPath"></a>MSBuildExtensionsPath 和 MSBuildUserExtensionsPath</h2><blockquote><p><strong>警告⚠</strong></p></blockquote><blockquote><p>如果使用这些扩展机制，则较难获取计算机上的可重复生成。 尝试使用可以签入源代码管理系统并在基本代码的所有开发人员之间共享的配置。</p></blockquote><p>按照惯例，许多核心生成逻辑文件</p><pre class=" language-xml"><code class="language-xml">$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\{TargetFileName}\ImportBefore\*.targets</code></pre><p>会在其内容前后各导入一次</p><pre class=" language-xml"><code class="language-xml">$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\{TargetFileName}\ImportAfter\*.targets</code></pre><p>这一约定使已安装的 SDK 可以增强常见项目类型的生成逻辑。</p><p>在 <code>$(MSBuildUserExtensionsPath)</code> 中搜索相同的目录结构，即按用户文件夹 %LOCALAPPDATA%\Microsoft\MSBuild  。 放置在该文件夹中的文件将被导入该用户凭据下运行的相应项目类型的所有生成。 通过在模式 <code>ImportUserLocationsByWildcardBefore{ImportingFileNameWithNoDots}</code> 中设置以导入文件命名的属性，可以禁用用户扩展。 例如，将 <code>ImportUserLocationsByWildcardBeforeMicrosoftCommonProps</code> 设置为 <code>false</code> 会阻止导入 <code>$(MSBuildUserExtensionsPath)\$(MSBuildToolsVersion)\Imports\Microsoft.Common.props\ImportBefore\*</code>。</p><h2 id="自定义解决方案生成"><a href="#自定义解决方案生成" class="headerlink" title="自定义解决方案生成"></a>自定义解决方案生成</h2><blockquote><p><strong>重要</strong></p></blockquote><blockquote><p>以这种方式自定义解决方案生成将仅适用于带有 MSBuild.exe 的命令行生成  。 它不适用于 Visual Studio 中的生成  。</p></blockquote><p>当 MSBuild 生成解决方案文件时，它首先在内部转换为项目文件，然后再生成它。 已生成的项目文件在定义任何目标前导入 <code>before.{solutionname}.sln.targets</code>，在导入目标后导入 <code>after.{solutionname}.sln.targets</code> ，其中包括安装到 <code>$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\SolutionFile\ImportBefore</code> 和 <code>$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\SolutionFile\ImportAfter</code> 目录的目标。</p><p>例如，可以在包含以下内容的名为 after.MyCustomizedSolution.sln.targets 的相同目录中创建文件，从而定义在生成 MyCustomizedSolution.sln 后写自定义日志消息的新目标  </p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Project</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Target</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>EmitCustomMessage<span class="token punctuation">"</span></span> <span class="token attr-name">AfterTargets</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Build<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Message</span> <span class="token attr-name">Importance</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>High<span class="token punctuation">"</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>The solution has completed the Build target<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Target</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Project</span><span class="token punctuation">></span></span></code></pre><h2 id="自定义所有-NET-生成"><a href="#自定义所有-NET-生成" class="headerlink" title="自定义所有 .NET 生成"></a>自定义所有 .NET 生成</h2><p>维护生成服务器时，可能需要为服务器上的所有生成全局配置 MSBuild 设置。  原则上，可以修改全局 Microsoft.Common.Targets  或 Microsoft.Common.Props  文件，但有一种更好的方法。 可以通过使用特定的 MSBuild 属性并添加某些自定义 <code>.targets</code> 和 <code>.props</code> 文件，来影响特定项目类型的所有生成（如所有 C# 项目）。</p><p>若要影响通过安装 MSBuild 或 Visual Studio 控制的所有 C# 或 Visual Basic 的生成，请创建 Custom.Before.Microsoft.Common.Targets  或 Custom.After.Microsoft.Common.Targets  文件（其目标将在 Microsoft.Common.targets  之前或之后运行），或创建 Custom.Before.Microsoft.Common.Props 或 Custom.After.Microsoft.Common.Props 文件    （将在 Microsoft.Common.props 之前或之后进行处理其属性）。</p><p>可以使用以下 MSBuild 属性指定这些文件的位置：</p><ul><li>CustomBeforeMicrosoftCommonProps</li><li>CustomBeforeMicrosoftCommonTargets</li><li>CustomAfterMicrosoftCommonProps</li><li>CustomAfterMicrosoftCommonTargets</li><li>CustomBeforeMicrosoftCSharpProps</li><li>CustomBeforeMicrosoftVisualBasicProps</li><li>CustomAfterMicrosoftCSharpProps</li><li>CustomAfterMicrosoftVisualBasicProps</li><li>CustomBeforeMicrosoftCSharpTargets</li><li>CustomBeforeMicrosoftVisualBasicTargets</li><li>CustomAfterMicrosoftCSharpTargets</li><li>CustomAfterMicrosoftVisualBasicTargets</li></ul><p>这些属性的通用  版本都会影响 C# 和 Visual Basic 项目。 可以在 MSBuild 命令行中设置这些属性。</p><pre class=" language-cmd"><code class="language-cmd">msbuild /p:CustomBeforeMicrosoftCommonTargets="C:\build\config\Custom.Before.Microsoft.Common.Targets" MyProject.csproj</code></pre><p>可以针对不同的应用场景使用最适合的方法。 如果你有一个专用的生成服务器，并且需要确保特定目标始终在该服务器上执行的相应项目类型的所有生成上执行，则适合使用全局自定义 <code>.targets</code> 或 <code>.props</code> 文件。  如果需要让自定义目标仅在某些条件适用时执行，可使用其他文件位置，并（仅在需要时）通过在 MSBuild 命令行中设置相应的 MSBuild 属性设置该文件的路径。</p><blockquote><p><strong>警告⚠</strong></p></blockquote><blockquote><p>每当 Visual Studio 生成匹配类型的任何项目时，只要它能在 MSBuild 文件夹中找到自定义文件 <code>.targets</code> 或 <code>.props</code>，就能使用它们。 这可能会带来意想不到的后果，如果操作不正确，可能会导致 Visual Studio 无法在你的计算机上进行生成。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MSBuild </tag>
            
            <tag> VisualStudio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 部署 .NET Core（容器部署）</title>
      <link href="/share/linux-netcore-docker/"/>
      <url>/share/linux-netcore-docker/</url>
      
        <content type="html"><![CDATA[<blockquote><p>在腾讯云 CentOS 部署运行 .Net core 应用</p></blockquote><p><strong>运行环境</strong></p><ul><li><p>腾讯云</p></li><li><p>CentOS 7.5 64位</p></li><li><p>1核 2GB内存 1M带宽</p></li><li><p>docker：19.03.10</p></li></ul><p><a href="https://uncmd.github.io/share/linux-netcore-docker/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/linux-netcore-docker-face.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="安装-Docker"><a href="#安装-Docker" class="headerlink" title="安装 Docker"></a>安装 Docker</h2><ul><li>Docker 软件包已经包括在默认的 CentOS-Extras 软件源里，所以只需运行下面的yum命令</li></ul><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> docker</code></pre><ul><li>安装完成后，使用下面的命令来启动 docker 服务，并将其设置为开机启动</li></ul><pre class=" language-bash"><code class="language-bash">systemctl start docker.servicesystemctl <span class="token function">enable</span> docker.service</code></pre><ul><li>测试</li></ul><pre class=" language-bash"><code class="language-bash">docker version</code></pre><p>返回如下版本信息，说明 docker 安装成功</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/docker-version.jpg" alt="" loading="lazy"><em><code>docker version</code></em></p><ul><li>使用中国官方镜像加速，修改 docker 配置文件为</li></ul><pre><code>vi  /etc/docker/daemon.json{    &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;],    &quot;live-restore&quot;: true}</code></pre><ul><li>运行 Hello World</li></ul><pre class=" language-bash"><code class="language-bash">docker pull library/hello-world <span class="token comment" spellcheck="true"># 拉取hello-world镜像</span>docker images <span class="token comment" spellcheck="true"># 查看本地镜像</span><span class="token comment" spellcheck="true"># 显示结果</span>REPOSITORY              TAG                 IMAGE ID            CREATED             SIZEdocker.io/hello-world   latest              bf756fb1ae65        4 months ago        13.3 kBdocker run hello-world <span class="token comment" spellcheck="true"># 运行 hello-world 镜像</span><span class="token comment" spellcheck="true"># 显示结果</span>Hello from Docker<span class="token operator">!</span>This message shows that your installation appears to be working correctly.<span class="token punctuation">..</span>.</code></pre><h2 id="卸载-Docker"><a href="#卸载-Docker" class="headerlink" title="卸载 Docker"></a>卸载 Docker</h2><p>1、查询安装过的包</p><pre class=" language-bash"><code class="language-bash">yum list installed <span class="token operator">|</span> <span class="token function">grep</span> docker</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/docker-uninstall-showinstalled.jpg" alt="" loading="lazy"></p><p>2、删除安装的软件包</p><pre class=" language-bash"><code class="language-bash">yum -y remove containerd.io.x86_64 // 依赖删除 docker-ce.x86_64yum -y remove docker-ce-cli.x86_64</code></pre><p>3、删除镜像容器等</p><pre class=" language-bash"><code class="language-bash"><span class="token function">rm</span> -rf /var/lib/docker</code></pre><h2 id="Dockerfile-使用介绍"><a href="#Dockerfile-使用介绍" class="headerlink" title="Dockerfile 使用介绍"></a>Dockerfile 使用介绍</h2><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/DockerFile.png" alt="" loading="lazy"><em>Docker 镜像、容器和 Dockerfile 三者之间的关系</em></p><p>通过上图可以看出使用 Dockerfile 定义镜像，运行镜像启动容器。</p><h3 id="Dockerfile-概念"><a href="#Dockerfile-概念" class="headerlink" title="Dockerfile 概念"></a>Dockerfile 概念</h3><p>Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。</p><p>镜像的定制实际上就是定制每一层所添加的配置、文件。如果我们可以把每一层修改、安装、构建、操作的命令都写入一个脚本，用这个脚本来构建、定制镜像，那么之前提及的无法重复的问题、镜像构建透明性的问题、体积的问题就都会解决。这个脚本就是 Dockerfile。</p><p>Dockerfile 是一个文本文件，其内包含了一条条的指令(Instruction)，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。有了 Dockerfile，当我们需要定制自己额外的需求时，只需在 Dockerfile 上添加或者修改指令，重新生成 image 即可，省去了敲命令的麻烦。</p><h3 id="Dockerfile-文件格式"><a href="#Dockerfile-文件格式" class="headerlink" title="Dockerfile 文件格式"></a>Dockerfile 文件格式</h3><p>Dockerfile 文件格式如下</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">##  Dockerfile文件格式</span><span class="token comment" spellcheck="true"># 1、指定基于哪个基础镜像，必须作为第一个命令！</span><span class="token comment" spellcheck="true"># 格式：FROM &lt;image> 或者  FROM &lt;image>:&lt;tag></span>FROM microsoft/dotnet:3.1-aspnetcore-runtime<span class="token comment" spellcheck="true"># 2、维护者信息</span><span class="token comment" spellcheck="true"># 格式：  MAINTAIN &lt;name> </span>MAINTAINER docker_user docker_user@email.com<span class="token comment" spellcheck="true"># 3、镜像操作指令！</span><span class="token comment" spellcheck="true"># 格式：RUN &lt;command>  或者 RUN [“executable”, “param1”, “param2”]</span>RUN  yum <span class="token function">install</span> httpdRUN <span class="token punctuation">[</span><span class="token string">"/bin/bash"</span>, <span class="token string">"-c"</span>, <span class="token string">"echo hello"</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 4. 构建容器后调用，容器启动后才能调用！</span><span class="token comment" spellcheck="true"># 三种格式：CMD ["executable", "param1", "param2"]、CMD command param1 param2、CMD ["param1", "param2"]</span><span class="token comment" spellcheck="true"># RUN和CMD看起来挺像，但是CMD用来指定容器启动时用到的命令，只能有一条。</span>CMD <span class="token punctuation">[</span><span class="token string">"/bin/bash"</span>, <span class="token string">"/usr/local/nginx/sbin/nginx"</span>, <span class="token string">"-c"</span>, <span class="token string">"/usr/local/nginx/conf/nginx.conf"</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 5. EXPOSE：指定于外界交互的端口！</span><span class="token comment" spellcheck="true"># 格式： EXPOSE &lt;port> [&lt;port>...] </span>EXPOSE 22 80 8443 <span class="token comment" spellcheck="true"># 这个用来指定要映射出去的端口，比如容器内部我们启动了sshd和nginx，所以我们需要把22和80端口暴漏出去。</span><span class="token comment" spellcheck="true"># 这个需要配合-P（大写）来工作，也就是说在启动容器时，需要加上-P，让它自动分配。如果想指定具体的端口，也可以使用-p（小写）来指定。</span><span class="token comment" spellcheck="true"># 6. ENV：设置环境变量！</span><span class="token comment" spellcheck="true"># 格式： ENV  &lt;key> &lt;value></span>ENV PATH /usr/local/mysql/bin:<span class="token variable">$PATH</span> <span class="token comment" spellcheck="true"># 它主要是为后续的RUN指令提供一个环境变量，我们也可以定义一些自定义的变量</span>ENV ASPNETCORE_ENVIRONMENT <span class="token string">"Development"</span><span class="token comment" spellcheck="true"># 7. ADD： 将本地文件添加到容器中，tar类型文件会自动解压(网络压缩资源不会被解压)，可以访问网络资源，类似wget！</span><span class="token comment" spellcheck="true"># 格式： add &lt;src> &lt;dest>将本地的一个文件或目录拷贝到容器的某个目录里。 其中src为Dockerfile所在目录的相对路径，它也可以是一个url。</span>ADD <span class="token operator">&lt;</span>conf/vhosts<span class="token operator">></span> <span class="token operator">&lt;</span>/usr/local/nginx/conf<span class="token operator">></span><span class="token comment" spellcheck="true"># 8. COPY：功能类似ADD，但是不能自动解压文件，也不能访问网络资源！</span><span class="token comment" spellcheck="true"># 格式：和ADD一样，不同的是，它不支持url</span>COPY <span class="token punctuation">..</span><span class="token comment" spellcheck="true"># 9. ENTRYPOINT：配置容器，使其可执行化。配合CMD可省去"application"，只使用参数！</span><span class="token comment" spellcheck="true"># 格式：类似CMD</span><span class="token comment" spellcheck="true"># 容器启动时要执行的命令，它和CMD很像，也是只有一条生效，如果写多个只有最后一条有效。</span><span class="token comment" spellcheck="true"># CMD不同是：CMD 是可以被 docker run 指令覆盖的，而ENTRYPOINT不能覆盖。比如，容器名字为xiaoming</span><span class="token comment" spellcheck="true"># 我们在Dockerfile中指定如下CMD：</span><span class="token comment" spellcheck="true"># CMD ["/bin/echo", "test"]</span><span class="token comment" spellcheck="true"># 启动容器的命令是  docker run xiaoming 这样会输出 test</span><span class="token comment" spellcheck="true"># 假如启动容器的命令是 docker run -it xiaoming  /bin/bash  什么都不会输出</span><span class="token comment" spellcheck="true"># ENTRYPOINT不会被覆盖，而且会比CMD或者docker run指定的命令要靠前执行</span><span class="token comment" spellcheck="true"># ENTRYPOINT ["echo", "test"]</span><span class="token comment" spellcheck="true"># docker run -it xiaoming  123</span><span class="token comment" spellcheck="true"># 则会输出 test  123 ，这相当于要执行命令  echo test  123 </span>ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"dotnet"</span>, <span class="token string">"InternalGateway.dll"</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true"># 10. VOLUME：用于持久化目录！</span><span class="token comment" spellcheck="true"># 格式： VOLUME ["/data"]</span><span class="token comment" spellcheck="true"># 创建一个可以从本地主机或其他容器挂载的挂载点。</span><span class="token comment" spellcheck="true"># 11. USER：指定容器运行用户，一般不指定默认ROOT用户！</span><span class="token comment" spellcheck="true"># 格式：USER daemon</span>USER username<span class="token comment" spellcheck="true"># 12. WORKDIR：  工作目录，类似CD命令！</span><span class="token comment" spellcheck="true"># 格式： WORKDIR  /path/to/workdir</span><span class="token comment" spellcheck="true"># 为后续的RUN、CMD或者ENTRYPOINT指定工作目录</span>WORKDIR /app<span class="token comment" spellcheck="true"># 13. LABEL 为镜像添加元数据，以键值对的形式指定</span><span class="token comment" spellcheck="true"># 格式：LABEL &lt;key>=&lt;value> &lt;key>=&lt;value> &lt;key>=&lt;value> ...</span><span class="token comment" spellcheck="true"># 使用LABEL指定元数据时，一条LABEL指定可以指定一或多条元数据，指定多条元数据时不同元数据之间通过空格分隔。</span><span class="token comment" spellcheck="true"># 推荐将所有的元数据通过一条LABEL指令指定，以免生成过多的中间镜像。</span>LABEL version<span class="token operator">=</span><span class="token string">"1.0"</span> description<span class="token operator">=</span><span class="token string">"这是一个Web服务器"</span> by<span class="token operator">=</span><span class="token string">"IT笔录"</span><span class="token comment" spellcheck="true"># 14. ARG 指定传递给构建运行时的变量</span><span class="token comment" spellcheck="true"># 语法：ARG &lt;name>[=&lt;default value>]</span><span class="token comment" spellcheck="true"># 在使用 docker build 构建镜像时，可以通过 --build-arg &lt;varname>=&lt;value> 参数来指定或重设置这些变量的值</span>ARG build_user<span class="token operator">=</span>IT笔录LABEL user<span class="token operator">=</span><span class="token variable">$build_user</span><span class="token comment" spellcheck="true"># 15. ONBUILD 设置镜像触发器</span><span class="token comment" spellcheck="true"># 语法：ONBUILD [INSTRUCTION]</span>ONBUILD ADD <span class="token keyword">.</span> /app/srcONBUILD RUN /usr/local/bin/python-build --dir /app/src<span class="token comment" spellcheck="true"># 16. SHELL 设置执行命令所使用的默认shell类型</span><span class="token comment" spellcheck="true"># 语法：SHELL ["executable", "parameters"]</span><span class="token comment" spellcheck="true"># 常用于 Windows 环境</span>SHELL <span class="token punctuation">[</span><span class="token string">"powershell"</span>, <span class="token string">"-command"</span><span class="token punctuation">]</span></code></pre><p>Dockerfile 分为四部分：<strong>基础镜像信息、维护者信息、镜像操作指令、容器启动执行指令</strong>。一开始必须要指明所基于的镜像名称，接下来一般会说明维护者信息；后面则是镜像操作指令，例如 RUN 指令。每执行一条RUN 指令，镜像添加新的一层，并提交；最后是 CMD 指令，来指明运行容器时的操作命令。</p><h3 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h3><p>docker build 命令会根据 Dockerfile 文件及上下文构建新 Docker 镜像</p><pre class=" language-bash"><code class="language-bash">docker build <span class="token keyword">.</span>docker build -t nginx/v3 <span class="token keyword">.</span> <span class="token comment" spellcheck="true"># 镜像标签</span>docker build -t nginx/v3:1.0.2 -t nginx/v3:latest <span class="token keyword">.</span>  <span class="token comment" spellcheck="true"># 可以使用多个镜像标签</span></code></pre><h3 id="简单示例"><a href="#简单示例" class="headerlink" title="简单示例"></a>简单示例</h3><p>定制 nginx 镜像，在空白目录新建Dockerfile文件</p><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> mynginx<span class="token function">cd</span> mynginx<span class="token function">vi</span> Dockerfile</code></pre><p>Dockerfile文件内容为</p><pre class=" language-bash"><code class="language-bash">FROM nginxRUN <span class="token keyword">echo</span> <span class="token string">'&lt;h1>Hello, Docker!&lt;/h1>'</span> <span class="token operator">></span> /usr/share/nginx/html/index.html</code></pre><p>FROM 指定基础镜像为 nginx，RUN 重写了 nginx 的默认页面信息</p><p>在 Dockerfile 文件所在目录执行</p><pre class=" language-bash"><code class="language-bash">docker build -t nginx:v1 <span class="token keyword">.</span> <span class="token comment" spellcheck="true"># 最后的 . 表示当前目录</span></code></pre><p>用 <code>docker run</code> 命令启动容器</p><pre class=" language-bash"><code class="language-bash">docker run --name docker_nginx_v1 -d -p 80:80 nginx:v1</code></pre><p>这条命令会用 nginx 镜像启动一个容器，命名为 <code>docker_nginx_v1</code>，并且映射了 80 端口，这样我们可以用浏览器去访问这个 nginx 服务器：<a href="http://localhost，页面返回：Hello">http://localhost，页面返回：Hello</a>, Docker!</p><h2 id="准备-net-core-web-程序"><a href="#准备-net-core-web-程序" class="headerlink" title="准备 .net core web 程序"></a>准备 .net core web 程序</h2><p>使用上一节的 .net core web 程序，在根目录添加 Dockerfile 文件，内容如下</p><pre class=" language-bash"><code class="language-bash">FROM mcr.microsoft.com/dotnet/core/runtime:3.1-buster-slimWORKDIR /appCOPY <span class="token keyword">.</span> <span class="token keyword">.</span> <span class="token comment" spellcheck="true"># 注意中间有个空格</span>ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"dotnet"</span>, <span class="token string">"InternalGateway.dll"</span><span class="token punctuation">]</span></code></pre><p>设置 Dockerfile 文件的属性始终复制到输出目录</p><p>发布上传到 Linux</p><p>构建镜像，Dockerfile所在的文件夹执行</p><pre class=" language-bash"><code class="language-bash">docker build -t uncmd/internalgateway <span class="token keyword">.</span></code></pre><p>长时间的等待，构建成功，使用 <code>docker images</code> 查看</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/docker-images.jpg" alt="" loading="lazy"><em><code>docker images</code></em></p><p>启动刚才构建好的容器</p><pre class=" language-bash"><code class="language-bash">docker run --name internalgateway -p 5000:80 uncmd/internalgatewaydocker <span class="token function">ps</span> <span class="token comment" spellcheck="true"># 查看运行中的容器</span></code></pre><p><strong>容器设置自动启动，启动时加 –restart=always参数</strong></p><pre class=" language-bash"><code class="language-bash">docker run --name internalgateway -p 5000:80 --restart<span class="token operator">=</span>always uncmd/internalgateway</code></pre><ul><li><p>no             不自动重启容器（默认值）</p></li><li><p>on-failure     容器发生错误而退出（容器退出状态不为0）重启容器</p></li><li><p>unless-stopped 在容器已经stop掉或docker stoped/restarted的时候才重启容器</p></li><li><p>always          在容器已经stop掉或Docker stoped/restarted的时候才重启容器</p></li></ul><p>容器运行正常，浏览器访问 http://服务器IP:5000</p><blockquote><p>第一次部署过程踩了较多坑，记录在此</p></blockquote><blockquote><p><code>docker build</code> 构建的镜像名称和标签为 non</p></blockquote><p>原因使镜像构建不成功，仔细查看构建输出日志，在哪一步失败，然后根据提示修改 Dockerfile 文件直至成功</p><blockquote><p><code>docker run</code> 映射的端口为空，<code>docker ps -a</code> 查看端口没有映射，并且 <code>docker start</code> 启动不了容器</p></blockquote><p>原因是容器运行时错误，但是 <code>-d</code> 参数隐藏了具体错误，对于不了解的同学很容易被误导</p><ul><li><p>使用 <code>docker rm</code> 命令删除容器</p></li><li><p><code>docker run</code> 命令去掉 <code>-d</code> 参数，使运行错误在前台展示</p></li><li><p>根据错误修改 Dockerfile 文件，重新生成镜像并运行</p></li></ul><p>页面正常访问，至此，.net core 程序 docker 部署方式完成。</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/docker-result.jpg" alt="" loading="lazy"><em>访问5000端口</em></p><h2 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker 常用命令"></a>Docker 常用命令</h2><pre class=" language-bash"><code class="language-bash">docker pull image_name <span class="token comment" spellcheck="true"># 拉取docker镜像</span>docker images <span class="token comment" spellcheck="true"># 查看宿主机上的镜像，Docker镜像保存在/var/lib/docker目录下</span>docker rmi docker.io/hello-world 或 docker rmi bf756fb1ae65 <span class="token comment" spellcheck="true"># 删除镜像</span>docker <span class="token function">ps</span> <span class="token comment" spellcheck="true"># 查看当前有哪些容器正在运行</span>docker <span class="token function">ps</span> -a <span class="token comment" spellcheck="true"># 查看所有容器</span>docker start container_name/container_id <span class="token comment" spellcheck="true"># 启动容器</span>docker stop container_name/container_id <span class="token comment" spellcheck="true"># 停止容器</span>docker restart container_name/container_id <span class="token comment" spellcheck="true"># 重启容器</span>docker attach container_name/container_id <span class="token comment" spellcheck="true"># 后台启动一个容器后，如果想进入到这个容器，可以使用attach命令</span>docker <span class="token function">rm</span> container_id <span class="token comment" spellcheck="true"># 删除容器</span>docker info <span class="token comment" spellcheck="true"># 查看当前系统Docker信息</span>docker pull centos:latest <span class="token comment" spellcheck="true"># 将Centos这个仓库下面的所有镜像下载到本地repository</span>docker image prune <span class="token comment" spellcheck="true"># 清理镜像</span></code></pre><blockquote><p><strong>参考</strong></p></blockquote><blockquote><p><a href="https://www.cnblogs.com/ityouknow/p/8520296.html" target="_blank" rel="noopener">https://www.cnblogs.com/ityouknow/p/8520296.html</a></p></blockquote><blockquote><p><a href="https://www.cnblogs.com/xiaxiaolu/p/9973631.html" target="_blank" rel="noopener">https://www.cnblogs.com/xiaxiaolu/p/9973631.html</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> .NET Core </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 部署 .NET Core（普通部署）</title>
      <link href="/share/linux-netcore/"/>
      <url>/share/linux-netcore/</url>
      
        <content type="html"><![CDATA[<blockquote><p>在腾讯云 CentOS 部署运行 .Net core 应用</p></blockquote><p><strong>运行环境</strong></p><ul><li><p>腾讯云</p></li><li><p>CentOS 7.5 64位</p></li><li><p>1核 2GB内存 1M带宽</p></li><li><p>辅助工具 xftp</p></li></ul><p><a href="https://uncmd.github.io/share/linux-netcore/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/linux-netcore-face.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="安装-dotnet-sdk"><a href="#安装-dotnet-sdk" class="headerlink" title="安装 dotnet sdk"></a>安装 dotnet sdk</h2><ul><li>安装 <code>libicu</code> 依赖</li></ul><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> libunwind libicu</code></pre><ul><li>注册dotnet 的repository</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> rpm -Uvh https://packages.microsoft.com/config/rhel/7/packages-microsoft-prod.rpm</code></pre><ul><li>安装SDK</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> yum update<span class="token function">sudo</span> yum <span class="token function">install</span> dotnet-sdk-3.1</code></pre><ul><li>以下命令用来模糊查询dotnet-sdk可用版本，<code>\*</code> 表示适配不定长的所有字符</li></ul><pre class=" language-bash"><code class="language-bash">yum list dotnet-sdk\*</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/yum-list-dotnet-sdk-search.jpg" alt="" loading="lazy"><em><code>yum list dotnet-sdk\*</code></em></p><ul><li>查看安装信息</li></ul><pre class=" language-bash"><code class="language-bash">dotnet --info</code></pre><h2 id="上传应用程序到Linux"><a href="#上传应用程序到Linux" class="headerlink" title="上传应用程序到Linux"></a>上传应用程序到Linux</h2><h3 id="CentOS搭建FTP服务"><a href="#CentOS搭建FTP服务" class="headerlink" title="CentOS搭建FTP服务"></a>CentOS搭建FTP服务</h3><ul><li>安装 vsftpd</li></ul><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> vsftpd // 安装vsftpd -v          // 查看安装版本</code></pre><ul><li>启动 vsftpd</li></ul><pre class=" language-bash"><code class="language-bash">systemctl start vsftpd.service   // 启动systemctl restart vsftpd.service // 重启systemctl <span class="token function">enable</span> vsftpd.service  //设置开机自启动systemctl status vsftpd.service  // 查看服务状态<span class="token function">netstat</span> -nltp <span class="token operator">|</span> <span class="token function">grep</span> 21          // 查看服务端口<span class="token function">tail</span> -f /var/log/secure          // 查看安全日志</code></pre><ul><li>配置文件说明</li></ul><pre class=" language-bash"><code class="language-bash">/etc/vsftpd/vsftpd.conf 是 vsftpd 的核心配置文件。/etc/vsftpd/ftpusers    是黑名单文件，此文件里的用户不允许访问 FTP 服务器。/etc/vsftpd/user_list   是白名单文件，此文件里的用户允许访问 FTP 服务器。</code></pre><p>在 ESC 安全策略的入站规则添加 21 端口，允许访问 21 端口</p><h3 id="配置-vsftpd"><a href="#配置-vsftpd" class="headerlink" title="配置 vsftpd"></a>配置 vsftpd</h3><p>vsftpd 安装后默认开启了匿名访问 FTP 服务器的功能，使用匿名用户访问，无需输入用户名和密码即可登录 FTP 服务，但是没有权限修改或上传文件。</p><p>此处我配置<strong>本地用户登录</strong></p><p>本地用户登录是指用户使用 Linux 操作系统的账号和密码登录 FTP 服务器。</p><p>1、创建一个账号 ftptest 并设置一个密码</p><pre class=" language-bash"><code class="language-bash"><span class="token function">useradd</span> ftptest            // 创建用户<span class="token function">passwd</span> --stdin ftptest     // 设置密码<span class="token function">cut</span> -d <span class="token keyword">:</span> -f 1 /etc/passwd  // 查看系统用户<span class="token function">userdel</span> -r username        // 删除用户</code></pre><p>2、创建一个供FTP服务使用的文件目录</p><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> /var/ftp/test<span class="token function">chmod</span> -R 777 /var/ftp/test</code></pre><p>3、更改 /var/ftp/test 目录的拥有者为 ftptest</p><pre class=" language-bash"><code class="language-bash"><span class="token function">chown</span> ftptest:ftptest /var/ftp/test -R</code></pre><p>4、修改配置文件前先进行备份一下</p><pre class=" language-bash"><code class="language-bash"><span class="token function">cp</span> /etc/vsftpd/vsftpd.conf<span class="token punctuation">{</span>,.bak<span class="token punctuation">}</span></code></pre><p>5、修改 vsftpd.conf 配置文件</p><pre class=" language-config"><code class="language-config">#禁止匿名登录FTP服务器anonymous_enable=NO#允许本地用户登录FTP服务器local_enable=YES#设置本地用户登录后所在目录local_root=/var/ftp/test#全部用户被限制在主目录chroot_local_user=YES#开启被动模式pasv_enable=YES#FTP服务器公网IP（也就是当前腾讯云服务器的公网 IP）pasv_address=120.xx.xx.xx#设置被动模式下，建立数据传输可使用port范围的最小值pasv_min_port=10000#设置被动模式下，建立数据传输可使用port范围的最大值pasv_max_port=10088#本地用户上传文件的umasklocal_umask=022#是否在进入新目录时显示 message_file 文件中的内容dirmessage_enable=YES#启用日志xferlog_enable=YES#日志是否进行格式化xferlog_std_format=YES#独立服务   listen=YES#centos7增加此设置，开启后默认监控ipv4和ipv6listen_ipv6=NO#认证模式 pam_service_name=vsftpd#启用用户列表 userlist_enable=YES#可以上传(全局控制)   write_enable=YES#允许下载  download_enable=YES</code></pre><p>6、 重新启动 vsftpd</p><pre class=" language-bash"><code class="language-bash">systemctl restart vsftpd.service</code></pre><p>在本地使用 xftp 上传工具，上传目录是 /home/uncmd/gateways/InternalGateway</p><p>查看目录文件，上传成功</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/ftp-upload.jpg" alt="" loading="lazy"></p><h3 id="准备你的-net-core-web-程序"><a href="#准备你的-net-core-web-程序" class="headerlink" title="准备你的.net core web 程序"></a>准备你的.net core web 程序</h3><p>新建一个空的.net core web程序用以演示</p><p>首先确保你的项目能在windows上运行</p><p>接下来发布</p><ul><li><p>先发布到本地目录，然后使用 xftp 工具上传到云服务器</p></li><li><p>直接使用 Vistual Studio 发布到FTP</p></li></ul><p>我选择的是直接发布到FTP，配置如下</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/dotnet-publish-ftp.jpg" alt="" loading="lazy"></p><p>验证连接没问题后点击发布，将文件发布到FTP对应目录</p><p>到程序所在目录执行以下命令启动web站点</p><pre class=" language-bash"><code class="language-bash">dotnet InternalGateway.dll</code></pre><p>显示正在运行，现在打开 http://你的服务器ip:5000</p><blockquote><p>http://地址:5000无法访问</p></blockquote><p>云服务器入站规则已正确设置，查看端口监听情况</p><pre><code>netstat -anpt | grep 5000</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/share/show-port-listen.jpg" alt="" loading="lazy"></p><ul><li><p>从上图能够看出用户的web服务被绑定在127.0.0.1的5000端口上了，而这会导致公网无法访问该web服务，解释如下：</p><ul><li><p>127.0.0.1是一个回送（loopback）地址，指本地机，一般用来测试使用</p></li><li><p>127.0.0.1是通过网卡传输，依赖网卡，并受到网络防火墙和网卡相关的限制,这也是跟localhost重要区别之一，localhost是不走网卡的，因此防火墙设置对localhost是无效的。</p></li><li><p>正常的网络包都是从ip层进入链路层，然后发送到网络上，而发向127.0.0.1的包，直接在IP层短路了，也就是发到IP层的包直接被IP层接收了，不再向下发送。这也就决定了web应用绑定在127.0.0.1上是不可能被公网访问到的。</p></li></ul></li><li><p>解决方案：</p><ul><li><p>修改web容器配置，把web应用绑定在ecs主网卡上。ECS bind EIP，实际上相当于EIP与ECS私有主网卡建立了映射关系，因此通过EIP:5000来访问web服务，最终就会*请求到私网主网卡:5000上。</p></li><li><p>更好的做法是把web服务绑定在0.0.0.0这个特殊IP上，关于0.0.0.0，这个IP并不是真实存在的，我们ping不通它，它只是一个符号，代表当前设备的IP。绑定在0.0.0.0上后无论是通过127.0.0.1还是本机ip去访问web服务，都是可以的。</p></li><li><p>在 appsettings.json 配置文件中添加 <code>&quot;urls&quot;: &quot;http://0.0.0.0:5000&quot;</code> 配置</p></li></ul></li></ul><p>配置正确后打开 http://你的服务器ip:5000 可正常访问</p><h3 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h3><ul><li>安装</li></ul><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> python-setuptoolseasy_install supervisor</code></pre><ul><li>配置</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> /etc/supervisorecho_supervisord_conf <span class="token operator">></span> /etc/supervisor/supervisord.conf</code></pre><p>在 /etc/supervisor/supervisord.conf 最后加上如下两行</p><pre class=" language-config"><code class="language-config">[include]files = conf.d/*.conf</code></pre><p>创建 /etc/supervisor/conf.d 目录，用于存放配置</p><ul><li>添加对 InternalGateway.dll 的守护</li></ul><p>添加 /etc/supervisor/conf.d/InternalGateway.conf 文件，内容如下</p><pre class=" language-config"><code class="language-config">[program:InternalGateway]command=dotnet InternalGateway.dll ; 运行程序的命令directory=/home/wwwroot/InternalGateway/ ; 命令执行的目录autorestart=true ; 程序意外退出是否自动重启stderr_logfile=/var/log/InternalGateway.err.log ; 错误日志文件stdout_logfile=/var/log/InternalGateway.out.log ; 输出日志文件environment=ASPNETCORE_ENVIRONMENT=Production ; 进程环境变量user=root ; 进程执行的用户身份stopsignal=INT</code></pre><ul><li>运行 supervisord，查看是否生效</li></ul><pre class=" language-bash"><code class="language-bash">supervisord -c /etc/supervisor/supervisord.conf<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> InternalGateway</code></pre><ul><li>Supervisor配置开机启动</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /usr/lib/systemd/system/vim supervisord.service</code></pre><p>插入以下内容</p><pre class=" language-config"><code class="language-config"># dservice for systemd (CentOS 7.0+)# by ET-CS (https://github.com/ET-CS)[Unit]Description=Supervisor daemon[Service]Type=forkingExecStart=/usr/bin/supervisord -c /etc/supervisor/supervisord.confExecStop=/usr/bin/supervisorctl shutdownExecReload=/usr/bin/supervisorctl reloadKillMode=processRestart=on-failureRestartSec=42s[Install]WantedBy=multi-user.target</code></pre><p>激活开机启动</p><pre class=" language-bash"><code class="language-bash">systemctl <span class="token function">enable</span> supervisord</code></pre><p>查看是否已激活</p><pre class=" language-bash"><code class="language-bash">systemctl is-enabled supervisord</code></pre><ul><li>supervisor 服务常用命令</li></ul><pre class=" language-bash"><code class="language-bash">supervisorctl status        //查看所有进程的状态supervisorctl stop es       //停止essupervisorctl start es      //启动essupervisorctl restart       //重启essupervisorctl update        //配置文件修改后使用该命令加载新的配置supervisorctl reload        //重新启动配置中的所有程序</code></pre><h3 id="CentOS下使用命令行Web浏览器Links"><a href="#CentOS下使用命令行Web浏览器Links" class="headerlink" title="CentOS下使用命令行Web浏览器Links"></a>CentOS下使用命令行Web浏览器Links</h3><p>Links是一个运行在命令行模式下的Web浏览器，只能查看字符</p><p>安装Links</p><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> links</code></pre><p>使用Links</p><p>links URL</p><p>Esc键：调出Links顶部菜单。</p><p>方向键：选择不同的项目，展示下拉菜单或者翻页。</p><p>Q键（大写Q）：退出Links</p>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> .NET Core </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git使用技巧</title>
      <link href="/share/git/"/>
      <url>/share/git/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Git（读音为/gɪt/）是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。</p></blockquote><blockquote><p>官网地址：<a href="https://git-scm.com/" target="_blank" rel="noopener">https://git-scm.com/</a></p></blockquote><p><a href="https://uncmd.github.io/share/git/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="一个有趣的开源项目，藏着git快速入门的秘密"><a href="#一个有趣的开源项目，藏着git快速入门的秘密" class="headerlink" title="一个有趣的开源项目，藏着git快速入门的秘密"></a>一个有趣的开源项目，藏着git快速入门的秘密</h2><p>开源地址：</p><p><a href="https://github.com/pcottle/learnGitBranching" target="_blank" rel="noopener">https://github.com/pcottle/learnGitBranching</a></p><p>游戏地址：</p><p><a href="https://learngitbranching.js.org/?demo" target="_blank" rel="noopener">https://learngitbranching.js.org/?demo</a></p><p>LearnGitBranching是一个git仓库可视化工具，沙箱以及一系列教育性教程和挑战。其主要目的是帮助开发人员通过可视化功能（在命令行上工作时缺少的功能）来理解git。这是通过具有不同级别的游戏来熟悉不同的git命令来实现的。</p><p>您可以在LearnGitBranching（LGB）中输入各种命令-处理命令时，附近的提交树将动态更新以反映每个命令的效果：</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git.gif" alt="" loading="lazy"><em>LearnGitBranching 游戏演示</em></p><h2 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h2><h3 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h3><h4 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h4><p>用 <code>git commit</code> 来创建新的提交记录</p><h4 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h4><blockquote><p>早建分支，多用分支</p></blockquote><p>用 <code>git branch &lt;分支名&gt;</code> 来创建分支，用 <code>git checkout &lt;分支名&gt;</code> 来切换到分支</p><p>如果你想创建一个新的分支同时切换到新创建的分支的话，可以通过 <code>git checkout -b &lt;your-branch-name&gt;</code> 来实现</p><h4 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h4><p>使用 <code>git merge &lt;分支名&gt;</code> 把分支合并到当前分支</p><h4 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h4><p>Rebase 实际上就是取出一系列的提交记录，“复制”它们，然后在另外一个地方逐个的放下去。</p><p>Rebase 的优势就是可以创造更线性的提交历史，这听上去有些难以理解。如果只允许使用 Rebase 的话，代码库的提交历史将会变得异常清晰。</p><p>使用 <code>git rebase &lt;分支名&gt;</code> 把当前分支重新指向指定的分支</p><h3 id="高级篇"><a href="#高级篇" class="headerlink" title="高级篇"></a>高级篇</h3><h4 id="分离-HEAD"><a href="#分离-HEAD" class="headerlink" title="分离 HEAD"></a>分离 HEAD</h4><p>HEAD 是一个对当前检出记录的符号引用 —— 也就是指向你正在其基础上进行工作的提交记录。</p><p>HEAD 总是指向当前分支上最近一次提交记录。大多数修改提交树的 Git 命令都是从改变 HEAD 的指向开始的。</p><p>HEAD 通常情况下是指向分支名的（如 bugFix）。在你提交时，改变了 bugFix 的状态，这一变化通过 HEAD 变得可见。</p><p>分离的 HEAD 就是让其指向了某个具体的提交记录而不是分支名。在命令执行之前的状态如下所示：</p><p>HEAD -&gt; master -&gt; C1</p><p>HEAD 指向 master， master 指向 C1</p><p>git checkout C1</p><p>现在变成了</p><p>HEAD -&gt; C1</p><p>使用 <code>git checkout &lt;提交记录哈希值&gt;</code> 分离HEAD</p><h4 id="相对引用（-）"><a href="#相对引用（-）" class="headerlink" title="相对引用（^）"></a>相对引用（^）</h4><p>通过指定提交记录哈希值的方式在 Git 中移动不太方便。在实际应用时，并没有像本程序中这么漂亮的可视化提交树供你参考，所以你就不得不用 <code>git log</code> 来查查看提交记录的哈希值。</p><p>并且哈希值在真实的 Git 世界中也会更长（译者注：基于 SHA-1，共 40 位）。例如前一关的介绍中的提交记录的哈希值可能是 <code>fed2da64c0efc5293610bdd892f82a58e8cbc5d8</code>。舌头都快打结了吧…</p><p>比较令人欣慰的是，Git 对哈希的处理很智能。你只需要提供能够唯一标识提交记录的前几个字符即可。因此我可以仅输入 <code>fed2</code> 而不是上面的一长串字符。</p><p>通过哈希值指定提交记录很不方便，所以 Git 引入了相对引用。这个就很厉害了!</p><p>使用相对引用的话，你就可以从一个易于记忆的地方（比如 <code>bugFix</code> 分支或 <code>HEAD</code>）开始计算。</p><p>相对引用非常给力，这里我介绍两个简单的用法：</p><ul><li><p>使用 <code>^</code> 向上移动 1 个提交记录</p></li><li><p>使用 <code>~&lt;num&gt;</code> 向上移动多个提交记录，如 <code>~3</code></p></li></ul><p>首先看看操作符 (^)。</p><p>把这个符号加在引用名称的后面，表示让 Git 寻找指定提交记录的父提交。</p><p>所以 master^ 相当于“master 的父节点”。</p><p>master^^ 是 master 的第二个父节点</p><p>使用 <code>git checkout master^</code> 命令切换到 <code>master</code> 的父节点</p><p>你也可以将 <code>HEAD</code> 作为相对引用的参照。下面咱们就用 <code>HEAD</code> 在提交树中向上移动几次。</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> checkout c3<span class="token punctuation">;</span> <span class="token function">git</span> checkout HEAD^<span class="token punctuation">;</span> <span class="token function">git</span> checkout HEAD^<span class="token punctuation">;</span> <span class="token function">git</span> checkout HEAD^<span class="token punctuation">;</span></code></pre><p>“~”操作符。</p><p>该操作符后面可以跟一个数字（可选，不跟数字时与 ^ 相同，向上移动一次），指定向上移动多少次。</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> branch -f master HEAD~3</code></pre><p>上面的命令会将 master 分支强制指向 HEAD 的第 3 级父提交。</p><h4 id="撤销变更"><a href="#撤销变更" class="headerlink" title="撤销变更"></a>撤销变更</h4><p>在 Git 里撤销变更的方法很多。和提交一样，撤销变更由底层部分（暂存区的独立文件或者片段）和上层部分（变更到底是通过哪种方式被撤销的）组成。我们这个应用主要关注的是后者。</p><p>主要有两种方法用来撤销变更 —— 一是 <code>git reset</code>，还有就是 <code>git revert</code>。接下来咱们逐个进行讲解。</p><ul><li>Git Reset</li></ul><p><code>git reset</code> 通过把分支记录回退几个提交记录来实现撤销改动。你可以将这想象成“改写历史”。<code>git reset</code> 向上移动分支，原来指向的提交记录就跟从来没有提交过一样。</p><ul><li>Git Revert</li></ul><p>虽然在你的本地分支中使用 git reset 很方便，但是这种“改写历史”的方法对大家一起使用的远程分支是无效的哦！</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/gitrevert.jpg" alt="" loading="lazy"><em><code>git revert HEAD</code></em></p><p>上图一开始 <code>master</code> 指向 C2 ，执行 <code>git revert HEAD</code> 命令后指向C2’，在我们要撤销的提交记录后面居然多了一个新提交！</p><p>这是因为新提交记录 C2’ 引入了更改 —— 这些更改刚好是用来撤销 C2 这个提交的。也就是说 C2’ 的状态与 C1 是相同的。</p><p>revert 之后就可以把你的更改推送到远程仓库与别人分享啦。</p><h3 id="移动提交记录"><a href="#移动提交记录" class="headerlink" title="移动提交记录"></a>移动提交记录</h3><h4 id="Git-Cherry-pick"><a href="#Git-Cherry-pick" class="headerlink" title="Git Cherry-pick"></a>Git Cherry-pick</h4><p>到现在我们已经学习了 Git 的基础知识 —— 提交、分支以及在提交树上移动。 这些概念涵盖了 Git 90% 的功能，同样也足够满足开发者的日常需求</p><p>然而, 剩余的 10% 在处理复杂的工作流时(或者当你陷入困惑时）可能就显得尤为重要了。接下来要讨论的这个话题是“整理提交记录” —— 开发人员有时会说“我想要把这个提交放到这里, 那个提交放到刚才那个提交的后面”, 而接下来就讲的就是它的实现方式，非常清晰、灵活，还很生动。</p><ul><li><code>git cherry-pick &lt;提交号&gt;...</code></li></ul><p>如果你想将一些提交复制到当前所在的位置（<code>HEAD</code>）下面的话， Cherry-pick 是最直接的方式了。</p><p>这里有一个仓库, 我们想将 side 分支上的工作复制到 master 分支。</p><p>执行以下命令</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> cherry-pick C2 C4</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-cherry-pick.gif" alt="" loading="lazy"><em><code>git cherry-pick C2 C4</code></em></p><p>我们只需要提交记录 C2 和 C4，所以 Git 就将被它们抓过来放到当前分支下了。 就是这么简单!</p><h4 id="交互式-rebase"><a href="#交互式-rebase" class="headerlink" title="交互式 rebase"></a>交互式 rebase</h4><p>当你知道你所需要的提交记录（并且还知道这些提交记录的哈希值）时, 用 cherry-pick 再好不过了 —— 没有比这更简单的方式了。</p><p>但是如果你不清楚你想要的提交记录的哈希值呢? 幸好 Git 帮你想到了这一点, 我们可以利用交互式的 rebase —— 如果你想从一系列的提交记录中找到想要的记录, 这就是最好的方法了。</p><p>交互式 <code>rebase</code> 指的是使用带参数 <code>--interactive</code> 的 rebase 命令, 简写为 <code>-i</code></p><p>如果你在命令后增加了这个选项, Git 会打开一个 UI 界面并列出将要被复制到目标分支的备选提交记录，它还会显示每个提交记录的哈希值和提交说明，提交说明有助于你理解这个提交进行了哪些更改。</p><p>在实际使用时，所谓的 UI 窗口一般会在文本编辑器 —— 如 Vim —— 中打开一个文件。</p><p>当 rebase UI界面打开时, 你能做3件事:</p><ul><li><p>调整提交记录的顺序（通过鼠标拖放来完成）</p></li><li><p>删除你不想要的提交（通过切换 pick 的状态来完成，关闭就意味着你不想要这个提交记录）</p></li><li><p>合并提交。</p></li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> rebase -i HEAD~4</code></pre><h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><h4 id="只取一个提交记录"><a href="#只取一个提交记录" class="headerlink" title="只取一个提交记录"></a>只取一个提交记录</h4><p>来看一个在开发中经常会遇到的情况：我正在解决某个特别棘手的 Bug，为了便于调试而在代码中添加了一些调试命令并向控制台打印了一些信息。</p><p>这些调试和打印语句都在它们各自的提交记录里。最后我终于找到了造成这个 Bug 的根本原因，解决掉以后觉得沾沾自喜！</p><p>最后就差把 bugFix 分支里的工作合并回 master 分支了。你可以选择通过 fast-forward 快速合并到 master 分支上，但这样的话 master 分支就会包含我这些调试语句了。你肯定不想这样，应该还有更好的方式……</p><p>实际我们只要让 Git 复制解决问题的那一个提交记录就可以了。跟之前我们在“整理提交记录”中学到的一样，我们可以使用</p><ul><li><p><code>git rebase -i</code></p></li><li><p><code>git cherry-pick</code></p></li></ul><p>来达到目的。</p><h4 id="提交的技巧-1"><a href="#提交的技巧-1" class="headerlink" title="提交的技巧 #1"></a>提交的技巧 #1</h4><p>接下来这种情况也是很常见的：你之前在 <code>newImage</code>分支上进行了一次提交，然后又基于它创建了 <code>caption</code> 分支，然后又提交了一次。</p><p>此时你想对的某个以前的提交记录进行一些小小的调整。比如设计师想修改一下 <code>newImage</code> 中图片的分辨率，尽管那个提交记录并不是最新的了。</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git1.jpg" alt="" loading="lazy"></p><p>我们可以通过下面的方法来克服困难：</p><ul><li><p>先用 <code>git rebase -i</code> 将提交重新排序，然后把我们想要修改的提交记录挪到最前</p></li><li><p>然后用 <code>git commit --amend</code> 来进行一些小修改</p></li><li><p>接着再用 <code>git rebase -i</code> 来将他们调回原来的顺序</p></li><li><p>最后我们把 <code>master</code> 移到修改的最前端（用你自己喜欢的方法），就大功告成啦！</p></li></ul><p>当然完成这个任务的方法不止上面提到的一种（我知道你在看 <code>cherry-pick</code> 啦），之后我们会多点关注这些技巧啦，但现在暂时只专注上面这种方法。 最后有必要说明一下目标状态中的那几个<code>&#39;</code> —— 我们把这个提交移动了两次，每移动一次会产生一个 <code>&#39;</code>；而 C2 上多出来的那个是我们在使用了 amend 参数提交时产生的，所以最终结果就是这样了。</p><p>也就是说，我在对比结果的时候只会对比提交树的结构，对于 <code>&#39;</code> 的数量上的不同，并不纳入对比范围内。只要你的 <code>master</code> 分支结构与目标结构相同，我就算你通过。</p><p>以下是具体的执行命令</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> rebase -i HEAD~2$ <span class="token function">git</span> commit --amend$ <span class="token function">git</span> rebase -i HEAD~2$ <span class="token function">git</span> branch -f master C3<span class="token string">''</span></code></pre><h4 id="提交的技巧-2"><a href="#提交的技巧-2" class="headerlink" title="提交的技巧 #2"></a>提交的技巧 #2</h4><p>我们可以使用 rebase -i 对提交记录进行重新排序。只要把我们想要的提交记录挪到最前端，我们就可以很轻松的用 –amend 修改它，然后把它们重新排成我们想要的顺序。</p><p>但这样做就唯一的问题就是要进行两次排序，而这有可能造成由 rebase 而导致的冲突。下面还是看看 <code>git cherry-pick</code> 是怎么做的吧。</p><p>要在心里牢记 <code>cherry-pick</code> 可以将提交树上任何地方的提交记录取过来追加到 HEAD 上（只要不是 HEAD 上游的提交就没问题）。</p><p>以下是具体的执行命令</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> checkout master$ <span class="token function">git</span> cherry-pick C2$ <span class="token function">git</span> commit --amend$ <span class="token function">git</span> cherry-pick C3</code></pre><h4 id="Git-Tag"><a href="#Git-Tag" class="headerlink" title="Git Tag"></a>Git Tag</h4><p>分支很容易被人为移动，并且当有新的提交时，它也会移动。分支很容易被改变，大部分分支还只是临时的，并且还一直在变。</p><p>你可能会问了：有没有什么可以永远指向某个提交记录的标识呢，比如软件发布新的大版本，或者是修正一些重要的 Bug 或是增加了某些新特性，有没有比分支更好的可以永远指向这些提交的方法呢？</p><p>当然有了！Git 的 tag 就是干这个用的啊，它们可以（在某种程度上 —— 因为标签可以被删除后重新在另外一个位置创建同名的标签）永久地将某个特定的提交命名为里程碑，然后就可以像分支一样引用了。</p><p>更难得的是，它们并不会随着新的提交而移动。你也不能检出到某个标签上面进行修改提交，它就像是提交树上的一个锚点，标识了某个特定的位置。</p><p><code>git tag v1 C1</code> 命令将这个标签命名为 v1，并且明确地让它指向提交记录 C1，如果你不指定提交记录，Git 会用 HEAD 所指向的位置。</p><h4 id="Git-Describe"><a href="#Git-Describe" class="headerlink" title="Git Describe"></a>Git Describe</h4><p>由于标签在代码库中起着“锚点”的作用，Git 还为此专门设计了一个命令用来描述离你最近的锚点（也就是标签），它就是 <code>git describe</code>！</p><p><code>Git Describe</code> 能帮你在提交历史中移动了多次以后找到方向；当你用 <code>git bisect</code>（一个查找产生 Bug 的提交记录的指令）找到某个提交记录时，或者是当你坐在你那刚刚度假回来的同事的电脑前时， 可能会用到这个命令。</p><p><code>git describe</code> 的​​语法是：</p><p><code>git describe &lt;ref&gt;</code></p><p><code>&lt;ref&gt;</code> 可以是任何能被 Git 识别成提交记录的引用，如果你没有指定的话，Git 会以你目前所检出的位置（<code>HEAD</code>）。</p><p>它输出的结果是这样的：</p><p><code>&lt;tag&gt;_&lt;numCommits&gt;_g&lt;hash&gt;</code></p><p><code>tag</code> 表示的是离 <code>ref</code> 最近的标签， <code>numCommits</code>是表示这个 <code>ref</code> 与 <code>tag</code> 相差有多少个提交记录， <code>hash</code> 表示的是你所给定的 <code>ref</code> 所表示的提交记录哈希值的前几位。</p><p>当 <code>ref</code> 提交记录上有某个标签时，则只输出标签名称。</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/gitdescribe.jpg" alt="" loading="lazy"></p><p>如上图</p><p><code>git describe master</code> 会输出：</p><p><code>v1_2_gC2</code></p><p><code>git describe side</code> 会输出：</p><p><code>v2_1_gC4</code></p><h3 id="高级话题"><a href="#高级话题" class="headerlink" title="高级话题"></a>高级话题</h3><h4 id="两个父节点"><a href="#两个父节点" class="headerlink" title="两个父节点"></a>两个父节点</h4><p>操作符 <code>^</code> 与 <code>~</code> 符一样，后面也可以跟一个数字。</p><p>但是该操作符后面的数字与 <code>~</code> 后面的不同，并不是用来指定向上返回几代，而是指定合并提交记录的某个父提交。还记得前面提到过的一个合并提交有两个父提交吧，所以遇到这样的节点时该选择哪条路径就不是很清晰了。</p><p>Git 默认选择合并提交的“第一个”父提交，在操作符 <code>^</code> 后跟一个数字可以改变这一默认行为。</p><p>举个例子，这里有一个合并提交记录。如果不加数字修改符直接检出 <code>master^</code>，会回到第一个父提交记录。</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> checkout master^</code></pre><p>(在我们的图示中，第一个父提交记录是指合并提交记录正上方的那个提交记录。)</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git2.jpg" alt="" loading="lazy"><em><code>git checkout master^</code></em></p><p>这正是我们都已经习惯的方法。</p><p>现在来试试选择另一个父提交……</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> checkout master^2</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git3.jpg" alt="" loading="lazy"><em><code>git checkout master^2</code></em></p><p>看见了吧？我们回到了另外一个父提交上。</p><p>更厉害的是，这些操作符还支持链式操作！试一下这个：</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> checkout HEAD~^2~2</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git4.jpg" alt="" loading="lazy"><em><code>git checkout HEAD~^2~2</code></em></p><h4 id="纠缠不清的分支"><a href="#纠缠不清的分支" class="headerlink" title="纠缠不清的分支"></a>纠缠不清的分支</h4><p>现在我们的 master 分支是比 one、two 和 three 要多几个提交。出于某种原因，我们需要把 master 分支上最近的几次提交做不同的调整后，分别添加到各个的分支上。</p><p>one 需要重新排序并删除 C5，two 仅需要重排排序，而 three 只需要提交一次，按顺序执行以下命令。</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> checkout one$ <span class="token function">git</span> cherry-pick C4 C3 C2$ <span class="token function">git</span> checkout two$ <span class="token function">git</span> cherry-pick C5 C4 C3 C2$ <span class="token function">git</span> branch -f three C2</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-level3.gif" alt="" loading="lazy"></p><h2 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h2><p>远程仓库并不复杂, 在如今的云计算盛行的世界很容易把远程仓库想象成一个富有魔力的东西, 但实际上它们只是你的仓库在另个一台计算机上的拷贝。你可以通过因特网与这台计算机通信 —— 也就是增加或是获取提交记录</p><p>话虽如此, 远程仓库却有一系列强大的特性</p><p>首先也是最重要的的点, 远程仓库是一个强大的备份。本地仓库也有恢复文件到指定版本的能力, 但所有的信息都是保存在本地的。有了远程仓库以后，即使丢失了本地所有数据, 你仍可以通过远程仓库拿回你丢失的数据。</p><p>还有就是, 远程让代码社交化了! 既然你的项目被托管到别的地方了, 你的朋友可以更容易地为你的项目做贡献(或者拉取最新的变更)</p><p>现在用网站来对远程仓库进行可视化操作变得越发流行了(像 <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> 或 <a href="https://gitee.com/" target="_blank" rel="noopener">Gitee</a>), 但远程仓库永远是这些工具的顶梁柱, 因此理解其概念非常的重要!</p><h3 id="Push-amp-Pull-——-Git-远程仓库！"><a href="#Push-amp-Pull-——-Git-远程仓库！" class="headerlink" title="Push &amp; Pull —— Git 远程仓库！"></a>Push &amp; Pull —— Git 远程仓库！</h3><h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><p><code>git clone</code> 命令的作用是在本地创建一个远程仓库的拷贝（比如从 github.com）</p><h4 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a>远程分支</h4><p>你可能注意到的第一个事就是在我们的本地仓库多了一个名为 <code>origin/master</code> 的分支, 这种类型的分支就叫远程分支。由于远程分支的特性导致其拥有一些特殊属性。</p><p>远程分支反映了远程仓库(在你上次和它通信时)的状态。这会有助于你理解本地的工作与公共工作的差别 —— 这是你与别人分享工作成果前至关重要的一步.</p><p>远程分支有一个特别的属性，在你检出时自动进入分离 HEAD 状态。Git 这么做是出于不能直接在这些分支上进行操作的原因, 你必须在别的地方完成你的工作, （更新了远程分支之后）再用远程分享你的工作成果。</p><p>你可能想问这些远程分支的前面的 origin/ 是什么意思呢？好吧, 远程分支有一个命名规范 —— 它们的格式是:</p><ul><li><code>&lt;remote name&gt;/&lt;branch name&gt;</code></li></ul><p>因此，如果你看到一个名为 <code>origin/master</code> 的分支，那么这个分支就叫 <code>master</code>，远程仓库的名称就是 <code>origin</code>。</p><h4 id="Git-Fetch"><a href="#Git-Fetch" class="headerlink" title="Git Fetch"></a>Git Fetch</h4><p>Git 远程仓库相当的操作实际可以归纳为两点：向远程仓库传输数据以及从远程仓库获取数据。既然我们能与远程仓库同步，那么就可以分享任何能被 Git 管理的更新（因此可以分享代码、文件、想法、情书等等）。</p><p>我们将学习如何从远程仓库获取数据 —— 命令如其名，它就是 <code>git fetch</code>。</p><p>你会看到当我们从远程仓库获取数据时, 远程分支也会更新以反映最新的远程仓库。在上一了我们已经提及过这一点了。</p><p>来看个实例，这里我们有一个远程仓库, 它有两个我们本地仓库中没有的提交。</p><p>执行 <code>git fetch</code></p><p>C2,C3 被下载到了本地仓库，同时远程分支 <code>origin/master</code> 也被更新，反映到了这一变化</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-fetch.gif" alt="" loading="lazy"><em><code>git fetch</code></em></p><p><code>git fetch</code> 完成了仅有的但是很重要的两步:</p><ul><li><p>从远程仓库下载本地仓库中缺失的提交记录</p></li><li><p>更新远程分支指针(如 <code>origin/master</code>)</p></li></ul><p><code>git fetch</code> 实际上将本地仓库中的远程分支更新成了远程仓库相应分支最新的状态。</p><p>如果你还记得上一节中我们说过的，远程分支反映了远程仓库在你最后一次与它通信时的状态，<code>git fetch</code> 就是你与远程仓库通信的方式了！希望我说的够明白了，你已经了解 <code>git fetch</code> 与远程分支之间的关系了吧。</p><p><code>git fetch</code> 通常通过互联网（使用 <code>http://</code> 或 <code>git://</code> 协议) 与远程仓库通信。</p><p><code>git fetch</code> 并不会改变你本地仓库的状态。它不会更新你的 <code>master</code> 分支，也不会修改你磁盘上的文件。</p><p>理解这一点很重要，因为许多开发人员误以为执行了 <code>git fetch</code> 以后，他们本地仓库就与远程仓库同步了。它可能已经将进行这一操作所需的所有数据都下载了下来，但是并没有修改你本地的文件。</p><p>所以, 你可以将 <code>git fetch</code> 的理解为单纯的下载操作。</p><h4 id="Git-Pull"><a href="#Git-Pull" class="headerlink" title="Git Pull"></a>Git Pull</h4><p>既然我们已经知道了如何用 <code>git fetch</code> 获取远程的数据, 现在我们学习如何将这些变化更新到我们的工作当中。</p><p>其实有很多方法的 —— 当远程分支中有新的提交时，你可以像合并本地分支那样来合并远程分支。也就是说就是你可以执行以下命令:</p><ul><li><p><code>git cherry-pick origin/master</code></p></li><li><p><code>git rebase origin/master</code></p></li><li><p><code>git merge origin/master</code></p></li><li><p>等等</p></li></ul><p>实际上，由于先抓取更新再合并到本地分支这个流程很常用，因此 Git 提供了一个专门的命令来完成这两个操作。它就是我们要讲的 <code>git pull</code>。</p><p>来看个实例，这里我们有一个远程仓库, 它有一个我们本地仓库中没有的提交，执行 <code>git pull</code> 命令，它等效于 <code>git fetch</code> + <code>git merge origin/master</code>。</p><p>先下载了 C3, 然后通过 <code>git merge origin/master</code> 合并了这一提交记录。现在我们的 master 分支包含了远程仓库中的更新。</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-pull.gif" alt="" loading="lazy"><em><code>git pull</code></em></p><h4 id="Git-Push"><a href="#Git-Push" class="headerlink" title="Git Push"></a>Git Push</h4><p>OK，我们已经学过了如何从远程仓库获取更新并合并到本地的分支当中。这非常棒……但是我如何与大家分享我的成果呢？</p><p>嗯，上传自己分享内容与下载他人的分享刚好相反，那与 <code>git pull</code> 相反的命令是什么呢？<code>git push</code>！</p><p><code>git push</code> 负责将你的变更上传到指定的远程仓库，并在远程仓库上合并你的新提交记录。一旦 <code>git push</code> 完成, 你的朋友们就可以从这个远程仓库下载你分享的成果了！</p><p>你可以将 <code>git push</code> 想象成发布你成果的命令。它有许多应用技巧，稍后我们会了解到，但是咱们还是先从基础的开始吧……</p><p>注意 —— <code>git push</code> 不带任何参数时的行为与 Git 的一个名为 <code>push.default</code> 的配置有关。它的默认值取决于你正使用的 Git 的版本，在你的项目中进行推送之前，最好检查一下这个配置。</p><h4 id="偏离的提交历史"><a href="#偏离的提交历史" class="headerlink" title="偏离的提交历史"></a>偏离的提交历史</h4><p>假设你周一克隆了一个仓库，然后开始研发某个新功能。到周五时，你新功能开发测试完毕，可以发布了。但是 —— 天啊！你的同事这周写了一堆代码，还改了许多你的功能中使用的 API，这些变动会导致你新开发的功能变得不可用。但是他们已经将那些提交推送到远程仓库了，因此你的工作就变成了基于项目旧版的代码，与远程仓库最新的代码不匹配了。</p><p>这种情况下, <code>git push</code> 就不知道该如何操作了。如果你执行 <code>git push</code>，Git 应该让远程仓库回到星期一那天的状态吗？还是直接在新代码的基础上添加你的代码，亦或由于你的提交已经过时而直接忽略你的提交？</p><p>因为这情况（历史偏离）有许多的不确定性，Git 是不会允许你 <code>push</code> 变更的。实际上它会强制你先合并远程最新的代码，然后才能分享你的工作。</p><p>那该如何解决这个问题呢？很简单，你需要做的就是使你的工作基于最新的远程分支。</p><p>有许多方法做到这一点呢，不过最直接的方法就是通过 <code>rebase</code> 调整你的工作。咱们继续，看看怎么 <code>rebase</code>！</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> fetch<span class="token punctuation">;</span> <span class="token function">git</span> rebase origin/master<span class="token punctuation">;</span> <span class="token function">git</span> push<span class="token punctuation">;</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push1.gif" alt="" loading="lazy"><em><code>git fetch; git rebase origin/master; git push;</code></em></p><p>我们用 <code>git fetch</code> 更新了本地仓库中的远程分支，然后用 <code>rebase</code> 将我们的工作移动到最新的提交记录下，最后再用 <code>git push</code> 推送到远程仓库。</p><p>还有其它的方法可以在远程仓库变更了以后更新我的工作吗? 当然有，我们还可以使用 <code>merge</code></p><p>尽管 <code>git merge</code> 不会移动你的工作（它会创建新的合并提交），但是它会告诉 Git 你已经合并了远程仓库的所有变更。这是因为远程分支现在是你本地分支的祖先，也就是说你的提交已经包含了远程分支的所有变化。</p><p>看下演示…</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> fetch<span class="token punctuation">;</span> <span class="token function">git</span> merge origin/master<span class="token punctuation">;</span> <span class="token function">git</span> push<span class="token punctuation">;</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push2.gif" alt="" loading="lazy"><em><code>git fetch; git merge origin/master; git push;</code></em></p><p>我们用 <code>git fetch</code> 更新了本地仓库中的远程分支，然后合并了新变更到我们的本地分支（为了包含远程仓库的变更），最后我们用 <code>git push</code> 把工作推送到远程仓库。</p><p>很好！但是要敲那么多命令，有没有更简单一点的？</p><p>当然 —— 前面已经介绍过 <code>git pull</code> 就是 <code>fetch</code> 和 <code>merge</code> 的简写，类似的 <code>git pull --rebase</code> 就是 <code>fetch</code> 和 <code>rebase</code> 的简写！</p><p>让我们看看简写命令是如何工作的。</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> pull --rebase<span class="token punctuation">;</span> <span class="token function">git</span> push<span class="token punctuation">;</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push3.gif" alt="" loading="lazy"><em><code>git pull --rebase; git push;</code></em></p><p>跟之前结果一样，但是命令更短了。</p><p>换用常规的 <code>pull</code></p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> pull<span class="token punctuation">;</span> <span class="token function">git</span> push<span class="token punctuation">;</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push4.gif" alt="" loading="lazy"><em><code>git pull; git push;</code></em></p><p>还是跟以前一样!</p><h4 id="锁定的Master-Locked-Master"><a href="#锁定的Master-Locked-Master" class="headerlink" title="锁定的Master(Locked Master)"></a>锁定的Master(Locked Master)</h4><p>如果你是在一个大的合作团队中工作, 很可能是master被锁定了, 需要一些Pull Request流程来合并修改。如果你直接提交(commit)到本地master, 然后试图推送(push)修改, 你将会收到这样类似的信息:</p><p> <code>! [远程服务器拒绝] master -&gt; master (TF402455: 不允许推送(push)这个分支; 你必须使用pull request来更新这个分支.)</code></p><p> 远程服务器拒绝直接推送(push)提交到master, 因为策略配置要求 pull requests 来提交更新.</p><p>你应该按照流程,新建一个分支, 推送(push)这个分支并申请pull request,但是你忘记并直接提交给了master.现在你卡住并且无法推送你的更新.</p><p>解决办法是新建一个分支feature, 推送到远程服务器. 然后reset你的master分支和远程服务器保持一致, 否则下次你pull并且他人的提交和你冲突的时候就会有问题.</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> reset origin/master<span class="token punctuation">;</span> <span class="token function">git</span> checkout -b feature C2<span class="token punctuation">;</span> <span class="token function">git</span> push origin feature<span class="token punctuation">;</span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push5.gif" alt="" loading="lazy"><em><code>git reset origin/master; git checkout -b feature C2; git push origin feature;</code></em></p><h3 id="Git-远程仓库高级操作"><a href="#Git-远程仓库高级操作" class="headerlink" title="Git 远程仓库高级操作"></a>Git 远程仓库高级操作</h3><h4 id="合并特性分支"><a href="#合并特性分支" class="headerlink" title="合并特性分支"></a>合并特性分支</h4><p>既然你应该很熟悉 fetch、pull、push 了，现在我们要通过一个新的工作流来测试你的这些技能。</p><p>在大型项目中开发人员通常会在（从 <code>master</code> 上分出来的）特性分支上工作，工作完成后只做一次集成。这跟前面课程的描述很相像（把 <code>side</code> 分支推送到远程仓库），不过本节我们会深入一些.</p><p>但是有些开发人员只在 <code>master</code> 上做 push、pull —— 这样的话 <code>master</code> 总是最新的，始终与远程分支 (<code>o/master</code>) 保持一致。</p><p>对于接下来这个工作流，我们集成了两个步骤：</p><ul><li><p>将特性分支集成到 <code>master</code> 上</p></li><li><p>推送并更新远程分支</p></li></ul><pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> fetch$ <span class="token function">git</span> rebase o/master side1$ <span class="token function">git</span> rebase side1 side2$ <span class="token function">git</span> rebase side2 side3$ <span class="token function">git</span> rebase side3 master$ <span class="token function">git</span> push</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push6.gif" alt="" loading="lazy"><em><code>合并特性分支</code></em></p><h4 id="合并远程仓库"><a href="#合并远程仓库" class="headerlink" title="合并远程仓库"></a>合并远程仓库</h4><p>为了 <code>push</code> 新变更到远程仓库，你要做的就是包含远程仓库中最新变更。意思就是只要你的本地分支包含了远程分支（如 <code>o/master</code>）中的最新变更就可以了，至于具体是用 <code>rebase</code> 还是 <code>merge</code>，并没有限制。</p><p>那么既然没有规定限制，为何前面几节都在着重于 <code>rebase</code> 呢？为什么在操作远程分支时不喜欢用 <code>merge</code> 呢？</p><p>在开发社区里，有许多关于 merge 与 rebase 的讨论。以下是关于 rebase 的优缺点：</p><ul><li><p>优点 Rebase 使你的提交树变得很干净, 所有的提交都在一条线上</p></li><li><p>缺点 Rebase 修改了提交树的历史</p></li></ul><p>比如, 提交 C1 可以被 rebase 到 C3 之后。这看起来 C1 中的工作是在 C3 之后进行的，但实际上是在 C3 之前。</p><p>一些开发人员喜欢保留提交历史，因此更偏爱 merge。而其他人（比如我自己）可能更喜欢干净的提交树，于是偏爱 rebase。仁者见仁，智者见智。</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> checkout master$ <span class="token function">git</span> pull$ <span class="token function">git</span> merge side1$ <span class="token function">git</span> merge side2$ <span class="token function">git</span> merge side3$ <span class="token function">git</span> push</code></pre><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/gits/git-push7.gif" alt="" loading="lazy"><em><code>合并远程仓库</code></em></p><h4 id="远程跟踪分支"><a href="#远程跟踪分支" class="headerlink" title="远程跟踪分支"></a>远程跟踪分支</h4><p>Git 好像知道 <code>master</code> 与 <code>origin/master</code> 是相关的。当然这些分支的名字是相似的，可能会让你觉得是依此将远程分支 <code>master</code> 和本地的 <code>master</code> 分支进行了关联。这种关联在以下两种情况下可以清楚地得到展示：</p><ul><li><p>pull 操作时, 提交记录会被先下载到 <code>origin/master</code> 上，之后再合并到本地的 <code>master</code> 分支。隐含的合并目标由这个关联确定的。</p></li><li><p>push 操作时, 我们把工作从 <code>master</code> 推到远程仓库中的 <code>master</code> 分支(同时会更新远程分支 <code>origin/master</code>) 。这个推送的目的地也是由这种关联确定的！</p></li></ul><p>直接了当地讲，<code>master</code> 和 <code>origin/master</code> 的关联关系就是由分支的“remote tracking”属性决定的。<code>master</code> 被设定为跟踪 <code>origin/master</code> —— 这意味着为 <code>master</code> 分支指定了推送的目的地以及拉取后合并的目标。</p><p>你可能想知道 <code>master</code> 分支上这个属性是怎么被设定的，你并没有用任何命令指定过这个属性呀！好吧, 当你克隆仓库的时候, Git 就自动帮你把这个属性设置好了。</p><p>当你克隆时, Git 会为远程仓库中的每个分支在本地仓库中创建一个远程分支（比如 <code>origin/master</code>）。然后再创建一个跟踪远程仓库中活动分支的本地分支，默认情况下这个本地分支会被命名为 <code>master</code>。</p><p>克隆完成后，你会得到一个本地分支（如果没有这个本地分支的话，你的目录就是“空白”的），但是可以查看远程仓库中所有的分支（如果你好奇心很强的话）。这样做对于本地仓库和远程仓库来说，都是最佳选择。</p><p>这也解释了为什么会在克隆的时候会看到下面的输出：</p><p><code>local branch &quot;master&quot; set to track remote branch &quot;o/master&quot;</code></p>]]></content>
      
      
      <categories>
          
          <category> 分享 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CLR via C#</title>
      <link href="/books/CLR/"/>
      <url>/books/CLR/</url>
      
        <content type="html"><![CDATA[<p>本书针对CLR和.NET Framework 进行深入、全面的探讨，并结合实例介绍了如何利用它们进行设计、开发和调试。</p><p><a href="https://uncmd.github.io/books/CLR/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/books/clr.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="第Ⅰ部分-CLR基础"><a href="#第Ⅰ部分-CLR基础" class="headerlink" title="第Ⅰ部分 CLR基础"></a>第Ⅰ部分 CLR基础</h2><h3 id="第-1-章-CLR的执行模型"><a href="#第-1-章-CLR的执行模型" class="headerlink" title="第 1 章 CLR的执行模型"></a>第 1 章 CLR的执行模型</h3><h4 id="CLR是公共语言运行时-Common-Language-Runtime"><a href="#CLR是公共语言运行时-Common-Language-Runtime" class="headerlink" title="CLR是公共语言运行时(Common Language Runtime)"></a>CLR是公共语言运行时(Common Language Runtime)</h4><p>可由多种编程语言使用的“运行时”，核心功能（比如内存管理、程序集加载、安全性、异常处理和线程同步）可由面向CLR的所有语言使用。</p><p>可用支持CLR的任何编程语言创建源码文件，然后编译成托管模块，托管模块是PE32或PE32+(64位)文件(PE是Portable Executable可移植执行体的简称)，托管PE文件由四部分组成：</p><ul><li><p>PE32或PE32+头：标识文件类型(GUI CUI DLL)、生成时间</p></li><li><p>CLR头：CLR版本、入口方法元数据token、模块的元数据、资源、强名称</p></li><li><p>元数据：描述源代码中定义的类型和成员、描述源代码引用的类型和成员</p></li><li><p>IL：编译器生成的代码，运行时CLR将IL编译成本机CPU指令</p></li></ul><p>JIT(just-in-time)编译器将IL转换成本机(native)CPU指令</p><p>方法首次调用时会调用JITCompiler函数将IL代码转换成本机CPU指令，之后再次调用同一方法则会跳过JITCompiler函数，直接执行内存块中的代码。</p><h4 id="通用类型系统-Common-Type-System-CTS"><a href="#通用类型系统-Common-Type-System-CTS" class="headerlink" title="通用类型系统(Common Type System, CTS)"></a>通用类型系统(Common Type System, CTS)</h4><p>类型向应用程序和其他类型公开了功能，通过类型，用一种编程语言写的代码能与用另一种编程语言写的代码沟通。</p><p>一个类型可用包含零个或多个成员</p><ul><li><p>字段(Field)</p></li><li><p>方法(Method)</p></li><li><p>属性(Property)</p></li><li><p>事件(Event)</p></li></ul><p>类型可见性</p><ul><li><p>private：只能由同一个类中的其他成员访问</p></li><li><p>family(C# protected)：可由派生类型访问，不管是否在同一个程序集</p></li><li><p>family and assembly(C#未提供这种访问控制)：可由派生类型访问，必须在同一个程序集</p></li><li><p>assembly(C# internal)：可由同一程序集的任何代码访问</p></li><li><p>family or assembly(C# protected internal)：任何程序集的派生类型访问，也可由同一程序集的任何类型访问</p></li><li><p>public：可由任何程序集中的任何代码访问</p></li></ul><h4 id="公共语言规范-Common-Language-Specification-CLS"><a href="#公共语言规范-Common-Language-Specification-CLS" class="headerlink" title="公共语言规范(Common Language Specification, CLS)"></a>公共语言规范(Common Language Specification, CLS)</h4><p>它详细定义了一个最小功能集，任何编译器只有支持这个功能集，生成的类型才能兼容由其它符合CLS、面向CLR的语言生成的组件。</p><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/books/clr1-6.jpg" alt="CLR" loading="lazy"></p><blockquote><p>每种语言都提供了CLR/CTS的一个子集以及CLS的一个超集(但不一定是同一个超集)</p></blockquote><h3 id="第-2-章-生成、打包、部署和管理应用程序及类型"><a href="#第-2-章-生成、打包、部署和管理应用程序及类型" class="headerlink" title="第 2 章 生成、打包、部署和管理应用程序及类型"></a>第 2 章 生成、打包、部署和管理应用程序及类型</h3><h4 id="将类型生成到模块中"><a href="#将类型生成到模块中" class="headerlink" title="将类型生成到模块中"></a>将类型生成到模块中</h4><pre><code>csc.exe /out:Program.exe /t:exe /r:MSCorLib.dll Program.cs</code></pre><p><strong>响应文件</strong></p><p>响应文件是包含一组编译器命令行开关的文本文件，扩展名为.rsp，在命令行中用@符号指定响应文件。CSC.exe运行是会在CSC.exe所在的目录查找全局CSC.rsp文件，相同开关优先级为命令行显示指定&gt;本地响应文件&gt;全局响应文件。</p><p>.NET Framework安装时会在%SystemRoot%\Microsoft .NET\Framework64\vX.X.X目录中安装默认全局CSC.rsp文件，如v4.0.30319版本CSC.rsp文件内容如下：</p><pre><code># This file contains command-line options that the C## command line compiler (CSC) will process as part# of every compilation, unless the &quot;/noconfig&quot; option# is specified. # Reference the common Framework libraries/r:Accessibility.dll/r:Microsoft.CSharp.dll/r:System.Configuration.dll/r:System.Configuration.Install.dll/r:System.Core.dll/r:System.Data.dll/r:System.Data.DataSetExtensions.dll/r:System.Data.Linq.dll/r:System.Data.OracleClient.dll/r:System.Deployment.dll/r:System.Design.dll/r:System.DirectoryServices.dll/r:System.dll/r:System.Drawing.Design.dll/r:System.Drawing.dll/r:System.EnterpriseServices.dll/r:System.Management.dll/r:System.Messaging.dll/r:System.Runtime.Remoting.dll/r:System.Runtime.Serialization.dll/r:System.Runtime.Serialization.Formatters.Soap.dll/r:System.Security.dll/r:System.ServiceModel.dll/r:System.ServiceModel.Web.dll/r:System.ServiceProcess.dll/r:System.Transactions.dll/r:System.Web.dll/r:System.Web.Extensions.Design.dll/r:System.Web.Extensions.dll/r:System.Web.Mobile.dll/r:System.Web.RegularExpressions.dll/r:System.Web.Services.dll/r:System.Windows.Forms.Dll/r:System.Workflow.Activities.dll/r:System.Workflow.ComponentModel.dll/r:System.Workflow.Runtime.dll/r:System.Xml.dll/r:System.Xml.Linq.dll</code></pre><p>指定/noconfig命令行开关，编译器将忽略本地和全局CSC.rsp文件</p><h4 id="元数据概述"><a href="#元数据概述" class="headerlink" title="元数据概述"></a>元数据概述</h4><p>PE文件中的元数据是由几个表构成的二进制数据块，有三种表，分别是定义表(definition table)、引用表(reference table)和清单表(mainfest table)</p><p>常用的元数据定义表</p><ul><li><p>ModuleDef：包含文件模块文件名称和扩展名（不含路径），以及模块版本ID（编译器创建的GUID）</p></li><li><p>TypeDef：模块定义的每个类型在这个表中都有一个记录项</p></li><li><p>MethodDef：模块定义的每个方法都在这个表中有一个记录项</p></li><li><p>FieldDef：模块定义的每个字段都在这个表中有一个记录项</p></li><li><p>ParamDef：模块定义的每个参数都在这个表中有一个记录项</p></li><li><p>PropertyDef：模块定义的每个属性都在这个表中有一个记录项</p></li><li><p>EventDef：模块定义的每个事件都在这个表中有一个记录项</p></li></ul><p>常用的元数据引用表</p><ul><li><p>AssemblyRef</p></li><li><p>ModuleRef</p></li><li><p>TypeRef</p></li><li><p>MemberRef</p></li></ul><p>可以用 ILDasm.exe（IL 反汇编器）查看元数据表</p><pre><code>ILDasm Program.exe</code></pre><h3 id="第-3-章-共享程序集和强命名程序集"><a href="#第-3-章-共享程序集和强命名程序集" class="headerlink" title="第 3 章 共享程序集和强命名程序集"></a>第 3 章 共享程序集和强命名程序集</h3><p>CLR支持两种程序集：弱命名程序集（weakly named assembly）和强命名程序集（strongly named assembly）</p><p>两者的区别在于，强命名程序集使用发布者的公钥/私钥进行了签名，这一对密钥允许对程序集进行唯一性标识、保护和版本控制。弱命名程序集只能以私有方式部署，强命名程序集即可私有部署，也可全局部署。</p><p>强命名程序集使用以下四个特性唯一标识：文件名（不计扩展名）、版本号、语言文化、公钥</p><p>使用SN.exe获取密钥，命令行开关都区分大小写。</p><pre class=" language-bash"><code class="language-bash">SN -k MyCompany.snk</code></pre><p>这告诉SN.exe创建 MyCompany.snk 文件，文件中包含二进制形式的公钥和私钥。</p><h4 id="全局程序集缓存"><a href="#全局程序集缓存" class="headerlink" title="全局程序集缓存"></a>全局程序集缓存</h4><p>由多个应用程序访问的程序集必须放到公认的目录，而且CLR在检测到对该程序集的引用时，必须知道检查该目录。这个公认位置就是<strong>全局程序集缓存(Global Assembly Cache, GAC)</strong>，一般在以下目录：</p><pre><code>%SystemRoot%\Microsoft.NET\Assembly</code></pre><p>永远不要将程序集文件手动复制到GAC目录，安装强命名程序集最常用的工具是 GACUtil.exe。建议进行私有而不是全局部署。</p><p>CSC.exe 会尝试按顺序在以下目录查找程序集</p><ul><li><p>工作目录</p></li><li><p>CSC.exe 所在的目录，目录中还包含 CLR 的各种 DLL 文件</p></li><li><p>使用 /lib 编译器开关指定的任何目录</p></li><li><p>使用 LIB 环境变量指定的任何目录</p></li></ul><p>.NET Framework 程序集：生成程序集时从 编译器/CLR 目录加载，运行时从 GAC 加载</p><h2 id="第Ⅱ部分-设计类型"><a href="#第Ⅱ部分-设计类型" class="headerlink" title="第Ⅱ部分 设计类型"></a>第Ⅱ部分 设计类型</h2><h3 id="第-4-章-类型基础"><a href="#第-4-章-类型基础" class="headerlink" title="第 4 章 类型基础"></a>第 4 章 类型基础</h3><ul><li><p>所有类型都从 System.Object 派生</p></li><li><p>类型转换</p></li><li><p>命名空间和程序集</p></li><li><p>运行时的相互关系</p></li></ul><h4 id="所有类型都从-System-Object-派生"><a href="#所有类型都从-System-Object-派生" class="headerlink" title="所有类型都从 System.Object 派生"></a>所有类型都从 System.Object 派生</h4><p>System.Object 类提供了以下4中公共实例方法</p><ul><li><p>Equals 如果对象具有相同的值，则返回 true。</p></li><li><p>GetHashCode 返回对象的值的哈希码。</p></li><li><p>ToString 默认返回类型的完整名称（this.GetType().FullName）。</p></li><li><p>GetType 返回从 <code>Type</code> 派生的一个类型的实例，指出调用 GetType 的那个对象是什么类型。</p></li></ul><p>此外，从 System.Object 派生的类型能访问如下受保护的方法</p><ul><li><p>MemberwiseClone 这个非虚方法创建类型的新实例，并将新对象的实例字段设与this对象的实例字段完全一致，返回对新实例的引用。</p></li><li><p>Finalize 在对象的内存被实际回收之前，会调用这个虚方法。</p></li></ul><p>CLR要求所有对象都用new操作符创建，以下是 new 操作符所做的事情</p><ul><li><p>计算类型及其所有基类型中定义的所有实例字段需要的字节数。</p></li><li><p>从托管堆中分配类型要求的字节数，从而分配对象的内存，分配的所有字节都设为零(0)。</p></li><li><p>初始化对象的“类型对象指针”和“同步块索引”成员。</p></li><li><p>调用类型的实例构造器，传递在 new 调用中指定的实参</p></li></ul><h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><p>CLR 最重要的特性之一就是类型安全</p><p>is 操作符检查对象是否兼容于指定类型</p><p>as 操作符返回转换后的对象，如果不能转换则返回 null</p><h4 id="命名空间和程序集"><a href="#命名空间和程序集" class="headerlink" title="命名空间和程序集"></a>命名空间和程序集</h4><p><strong>命名空间</strong>对相关类型进行逻辑分组，使名称变得更长，更可能具有唯一性。</p><p>命名空间和程序集不一定相关，不同程序集可能存在相同名称空间。</p><h4 id="运行时的相互关系"><a href="#运行时的相互关系" class="headerlink" title="运行时的相互关系"></a>运行时的相互关系</h4><p>线程创建时会分配到1MB的栈，栈空间用于向方法传递实参，方法内部定义的局部变量也在栈上。</p><h3 id="第-5-章-基元类型、引用类型和值类型"><a href="#第-5-章-基元类型、引用类型和值类型" class="headerlink" title="第 5 章 基元类型、引用类型和值类型"></a>第 5 章 基元类型、引用类型和值类型</h3><ul><li><p>编程语言的基元类型</p></li><li><p>引用类型和值类型</p></li><li><p>值类型的装箱和拆箱</p></li><li><p>对象哈希码</p></li><li><p>dynamic 基元类型</p></li></ul><h4 id="编程语言的基元类型"><a href="#编程语言的基元类型" class="headerlink" title="编程语言的基元类型"></a>编程语言的基元类型</h4><p>编译器直接支持的数据类型称为<strong>基元类型</strong>(primitive type)。基元类型直接映射到Framework 类库(FCL)中存在的类型。</p><p>例如，C#的 <code>int</code> 直接映射到 <code>System.Int32</code> 类型。</p><p>C#编译器支持与类型转换、字面值以及操作符有关的模式。只有在转换“安全”的时候，C#才允许隐式转换，“安全”是指不会发生数据丢失的情况。</p><p>C#总是对转换结果进行截断，而不进行向上取整。</p><p>CLR提供add/add.ovf, sub/sub.ovf, mul/mul.ovf和conv/conv.ovf IL指令，前者不执行溢出检查，后者在发生溢出时抛出 <code>System.OverflowException</code> 异常。</p><p>C#溢出检查默认关闭，编译器的 <code>/checked+</code> 开关全局控制是否溢出检查，<code>checked</code> 和 <code>uncheck</code> 操作符局部控制是否溢出检查，如：</p><pre class=" language-csharp"><code class="language-csharp">UInt32 invalid <span class="token operator">=</span> <span class="token keyword">unchecked</span><span class="token punctuation">(</span><span class="token punctuation">(</span>UInt32<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// OK</span>Byte b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>b <span class="token operator">=</span> <span class="token keyword">checked</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Byte<span class="token punctuation">)</span> <span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 抛出 OverflowException 异常</span><span class="token keyword">checked</span><span class="token punctuation">{</span>  Byte b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>  b <span class="token operator">=</span> <span class="token keyword">checked</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Byte<span class="token punctuation">)</span> <span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="引用类型和值类型"><a href="#引用类型和值类型" class="headerlink" title="引用类型和值类型"></a>引用类型和值类型</h4><p>CLR 支持<strong>引用类型</strong>和<strong>值类型</strong>。引用类型总是从托管堆分配，C#的 <code>new</code> 操作符返回对象内存地址，使用引用类型必须留意性能问题</p><ul><li><p>内存必须从托管堆分配</p></li><li><p>堆上分配的每个对象都有一些额外成员，这些成员必须初始化</p></li><li><p>对象中的其它字节（为字段而设）总是设为零</p></li><li><p>从托管堆分配对象时，可能强制执行一次垃圾回收</p></li></ul><p>值类型的实例一般在线程栈上分配，派生自 <code>System.ValueType</code>，所有值类型都隐式密封，目的是防止将值类型用作其它引用类型或值类型的基类型。</p><h3 id="第-6-章-类型和成员基础"><a href="#第-6-章-类型和成员基础" class="headerlink" title="第 6 章 类型和成员基础"></a>第 6 章 类型和成员基础</h3><h3 id="第-7-章-常量和字段"><a href="#第-7-章-常量和字段" class="headerlink" title="第 7 章 常量和字段"></a>第 7 章 常量和字段</h3><h3 id="第-8-章-方法"><a href="#第-8-章-方法" class="headerlink" title="第 8 章 方法"></a>第 8 章 方法</h3><h3 id="第-9-章-参数"><a href="#第-9-章-参数" class="headerlink" title="第 9 章 参数"></a>第 9 章 参数</h3><h3 id="第-10-章-属性"><a href="#第-10-章-属性" class="headerlink" title="第 10 章 属性"></a>第 10 章 属性</h3><h3 id="第-11-章-事件"><a href="#第-11-章-事件" class="headerlink" title="第 11 章 事件"></a>第 11 章 事件</h3><h3 id="第-12-章-泛型"><a href="#第-12-章-泛型" class="headerlink" title="第 12 章 泛型"></a>第 12 章 泛型</h3><h3 id="第-13-章-接口"><a href="#第-13-章-接口" class="headerlink" title="第 13 章 接口"></a>第 13 章 接口</h3>]]></content>
      
      
      <categories>
          
          <category> 那些年立的Flag </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书 </tag>
            
            <tag> 笔记 </tag>
            
            <tag> C# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>读书笔记</title>
      <link href="/life/book/"/>
      <url>/life/book/</url>
      
        <content type="html"><![CDATA[<blockquote><p>读书使人明智，读书使人聪慧</p></blockquote><p><a href="https://uncmd.github.io/life/book/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/books.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="书籍列表"><a href="#书籍列表" class="headerlink" title="书籍列表"></a>书籍列表</h2><ul><li><input checked="" disabled="" type="checkbox"> <p>三体</p></li><li><input disabled="" type="checkbox"> <p><a href="https://uncmd.github.io/books/CLR/">CLR Via C#</a></p></li><li><input disabled="" type="checkbox"> <p>微服务设计（纽曼 Sam Newman）</p></li><li><input disabled="" type="checkbox"> <p>.NET微服务:容器化.NET引用架构指南</p></li><li><input disabled="" type="checkbox"> <p>墨菲定律</p></li><li><input disabled="" type="checkbox"> <p>人间失格</p></li><li><input disabled="" type="checkbox"> <p>从零开始做运营</p></li><li><input disabled="" type="checkbox"> <p>月亮与六便士</p></li><li><input checked="" disabled="" type="checkbox"> <p><a href="https://uncmd.github.io/books/fsq-share/">房思琪的初恋乐园</a></p></li><li><input disabled="" type="checkbox"> <p>编程珠玑  </p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 那些年立的Flag </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 读书 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客搭建</title>
      <link href="/life/hexo-blog/"/>
      <url>/life/hexo-blog/</url>
      
        <content type="html"><![CDATA[<p>一年前搭建的<a href="https://uncmd.github.io/doc-st/#!index.md">个人博客</a>被说太<del>难看</del>简单，最近正好看到Hexo这款快速、简洁且高效的博客框架，故折腾之</p><ul><li><p><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a></p></li><li><p><a href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank" rel="noopener">主题Yun</a></p></li></ul><a id="more"></a><p>旧博客是采用<a href="https://github.com/Dynalon/mdwiki/" target="_blank" rel="noopener">MDWIKI</a>搭建的，有兴趣的同学可以参考使用🙄</p><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>Hexo的文档很全，网上教程也很多，跟着文档步骤执行即可，我说下我搭建的大致步骤</p><h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p>下载<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">Node.js</a>(Node.js 版本需不低于 8.10，建议使用 Node.js 10.0 及以上版本)</p><p>下载的是长期支持版，全部默认下一步进行安装</p><p>输入 <code>node --version</code> 查看安装的Node版本</p><p>切换为 <code>taobao</code> 镜像源</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token keyword">set</span> registry https://registry.npm.taobao.org</code></pre><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><p>下载<a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></p><p>全部默认下一步进行安装，默认编辑器推荐选择<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">VS Code</a></p><p>如果尚未注册<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>，还需提前注册GitHub账号，利用 <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> 这一服务部署静态站点</p><p>在 GitHub 新建仓库，仓库名称必须为 <code>你的用户名.github.io</code> </p><h3 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><p>在终端输入以下命令</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-cli -g</code></pre><blockquote><p><a href="https://www.npmjs.cn/" target="_blank" rel="noopener">npm</a> 是随Node.js一起被安装的包管理器</p></blockquote><blockquote><p>install 表示安装</p></blockquote><blockquote><p><code>hexo-cli</code> 是 <code>hexo</code> 的命令行工具，可以生成模板文件和启动站点等操作</p></blockquote><blockquote><p><code>-g</code> 表示全局安装，可以在任何目录下使用，如果不加 <code>-g</code> 参数则只能在安装的目录下使用hexo命令行工具</p></blockquote><p>新建一个目录存放Hexo代码，然后在这个目录下面执行以下命令初始化站点</p><pre class=" language-bash"><code class="language-bash">hexo init 你的名字.github.io</code></pre><p>安装所有 <code>package.json</code> 文件中的包</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span></code></pre><p>启动本地的Hexo服务器</p><pre class=" language-bash"><code class="language-bash">hexo server</code></pre><p>这时就可以打开浏览器，在地址栏中输入 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 查看本地网页了。</p><p>在终端中按 <code>Ctrl + C</code> 中断服务器的运行</p><blockquote><p>更多信息请参考 <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo</a> 官网文档</p></blockquote><h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><p>Hexo 默认提供的是 <a href="https://github.com/hexojs/hexo-theme-landscape" target="_blank" rel="noopener">hexo-theme-landscape</a> 主题。</p><p>默认主题样式简单，功能较少。在<a href="https://hexo.io/themes/" target="_blank" rel="noopener">Themes | Hexo</a>上有许多有趣美丽的主题。</p><p>最终我找了一款样式精美、轻量、快速的主题 <a href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank" rel="noopener">hexo-theme-yun</a></p><h3 id="下载-Hexo-主题"><a href="#下载-Hexo-主题" class="headerlink" title="下载 Hexo 主题"></a>下载 Hexo 主题</h3><p>使用终端进入之前Hexo初始化好的文件夹目录下，输入以下命令克隆主题</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/YunYouJun/hexo-theme-yun themes/yun</code></pre><h3 id="编辑-Hexo-配置"><a href="#编辑-Hexo-配置" class="headerlink" title="编辑 Hexo 配置"></a>编辑 Hexo 配置</h3><p>修改Hexo目录下面 <code>_config.yml</code> 配置文件的 <code>theme</code> 字段，将 <code>landscape</code> 改为 <code>yun</code></p><pre class=" language-bash"><code class="language-bash">theme: yun</code></pre><p>安装渲染器</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-render-pug hexo-renderer-stylus</code></pre><p>这时用 <code>hexo server</code> 重新启动服务器，就可以看到不一样的主题风格页面了。</p><h3 id="自定义主题配置"><a href="#自定义主题配置" class="headerlink" title="自定义主题配置"></a>自定义主题配置</h3><p>主题配置文件放在 <code>themes/yun/_config.yml</code> 文件中，但是最好不要直接修改这个配置文件，以后主题升级会覆盖这个文件</p><p>解决方案是在博客的根目录下新建 <code>source/_data/yun.yml</code> 自定义配置文件</p><p><code>themes-yun</code>会将自定义配置与默认配置进行合并，因此你只需要在 <code>yun.yml</code> 文件中自定义你需要的配置即可，其余仍将自动采用默认配置。</p><h3 id="用到的插件"><a href="#用到的插件" class="headerlink" title="用到的插件"></a>用到的插件</h3>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 分享 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ASP.NET Boilerplate应用与实践</title>
      <link href="/microservice/abp/"/>
      <url>/microservice/abp/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ASP.NET Boilerplate是一个通用应用程序框架，专门为新的现代Web应用程序设计。它使用已经熟悉的工具并围绕它们实施最佳实践，以为您提供SOLID开发经验。</p></blockquote><blockquote><p>官网：<a href="https://aspnetboilerplate.com/" target="_blank" rel="noopener">https://aspnetboilerplate.com/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/abp/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/abp-logo-long.png" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="如何获取客户端真实IP，而不是代理IP"><a href="#如何获取客户端真实IP，而不是代理IP" class="headerlink" title="如何获取客户端真实IP，而不是代理IP"></a>如何获取客户端真实IP，而不是代理IP</h2><p>自定义实现IClientInfoProvider接口，然后在模块中替换默认的实现</p><p>从请求头中获取 X-Forwarded-For 信息，代理会把每层的请求信息存到 X-Forwarded-For 中，包括客户端信息</p><pre><code>    public class HttpContextClientInfoProxyProvider : HttpContextClientInfoProvider, ITransientDependency    {        private readonly IHttpContextAccessor _httpContextAccessor;        private readonly HttpContext _httpContext;        public HttpContextClientInfoProxyProvider(IHttpContextAccessor httpContextAccessor)            : base(httpContextAccessor)        {            _httpContextAccessor = httpContextAccessor;            _httpContext = httpContextAccessor.HttpContext;        }        protected override string GetClientIpAddress()        {            try            {                var httpContext = _httpContextAccessor.HttpContext ?? _httpContext;                var headers = httpContext?.Request.Headers;                if (headers != null &amp;&amp; headers.ContainsKey(&quot;X-Forwarded-For&quot;))                {                    httpContext.Connection.RemoteIpAddress = System.Net.IPAddress.Parse(headers[&quot;X-Forwarded-For&quot;].ToString().Split(&#39;,&#39;, StringSplitOptions.RemoveEmptyEntries)[0]);                }                return httpContext?.Connection?.RemoteIpAddress?.ToString();            }            catch (Exception ex)            {                Logger.Warn(ex.ToString());            }            return null;        }    }</code></pre><p>在Web.Core模块的预加载事件PreInitialize中替换默认实现：</p><pre><code> Configuration.ReplaceService&lt;IClientInfoProvider, HttpContextClientInfoProxyProvider&gt;(DependencyLifeStyle.Transient);</code></pre><blockquote><p>特别注意：Ocelot网关默认不会存 X-Forwarded-For信息，需要在网关配置文件添加如下配置：</p></blockquote><pre class=" language-json"><code class="language-json">    <span class="token property">"UpstreamHeaderTransform"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"X-Forwarded-For"</span><span class="token operator">:</span> <span class="token string">"{RemoteIpAddress}"</span>    <span class="token punctuation">}</span></code></pre><p>这样审计日记获取的客户端IP地址才是真实的。</p><h2 id="审计日志添加自定义数据（服务端地址）"><a href="#审计日志添加自定义数据（服务端地址）" class="headerlink" title="审计日志添加自定义数据（服务端地址）"></a>审计日志添加自定义数据（服务端地址）</h2><p>自己实现IAuditInfoProvider接口，可以继承默认的实现，然后重写Fill方法</p><pre><code>    public class QmsAuditInfoProvider : DefaultAuditInfoProvider, ITransientDependency    {        private readonly IConfigurationRoot _appConfiguration;        public QmsAuditInfoProvider(IConfigurationRoot configurationRoot)        {            _appConfiguration = configurationRoot;        }        public override void Fill(AuditInfo auditInfo)        {            base.Fill(auditInfo);            auditInfo.CustomData = $&quot;服务地址：{_appConfiguration[&quot;App:ServerRootAddress&quot;]}&quot;;        }    }</code></pre><p>这里注入了配置文件，从配置文件读取服务地址，然后保存到审计日志的CustomData字段</p><p>然后在Web.Host模块的PreInitialize方法中替换IAuditInfoProvider接口的默认实现</p><pre><code>Configuration.ReplaceService(typeof(Abp.Auditing.IAuditInfoProvider), () =&gt;{    IocManager.Register&lt;IAuditInfoProvider, AssemblyReportAuditInfoProvider&gt;(DependencyLifeStyle.Transient);});</code></pre><h2 id="动态C-API客户端"><a href="#动态C-API客户端" class="headerlink" title="动态C# API客户端"></a>动态C# API客户端</h2><p>参考Abp vnext 提供动态 C# API客户端功能</p><p>可以自动创建C# API 客户端代理来调用远程HTTP服务(REST APIS).通过这种方式,你不需要通过 HttpClient 或者其他低级的HTTP功能调用远程服务并获取数据.</p><h3 id="服务接口"><a href="#服务接口" class="headerlink" title="服务接口"></a>服务接口</h3><p>你的service或controller需要实现一个在服务端和客户端共享的接口.因此,首先需要在一个共享的类库项目中定义一个服务接口.例如:</p><pre><code>public interface IBookAppService : IApplicationService{    Task&lt;List&lt;BookDto&gt;&gt; GetListAsync();}</code></pre><p>为了能自动被发现,你的接口需要实现IApplicationService接口.</p><h3 id="服务元数据接口"><a href="#服务元数据接口" class="headerlink" title="服务元数据接口"></a>服务元数据接口</h3><p>客户端调用服务时，需要知道服务接口的元数据，Core.Http通过AbpApiDefinitionController控制器发布服务元数据，如下：</p><pre><code>[Route(&quot;api/abp/api-definition&quot;)]public class AbpApiDefinitionController : AbpController, IRemoteService{    private readonly IApiDescriptionModelProvider _modelProvider;    public AbpApiDefinitionController(IApiDescriptionModelProvider modelProvider)    {        _modelProvider = modelProvider;    }    [HttpGet]    public ApplicationApiDescriptionModel Get()    {        return _modelProvider.CreateApiModel();    }}</code></pre><p>路由地址为 api/abp/api-definition，通过这个接口访问各个微服务的接口元数据</p><p>在 Web.Core项目中添加 AbpHttpModule 依赖，自动注册 AbpApiDefinitionController 控制器</p><pre><code>[DependsOn(typeof(AbpHttpModule))] //添加依赖public class MyWebCoreModule : AbpModule{}</code></pre><h3 id="客户端代理生成"><a href="#客户端代理生成" class="headerlink" title="客户端代理生成"></a>客户端代理生成</h3><p>首先将 Core.Http.Client 添加到客户端项目中</p><p>然后给你的模块添加 AbpHttpClientModule 依赖</p><pre><code>[DependsOn(typeof(AbpHttpClientModule))] //添加依赖public class MyClientAppModule : AbpModule{}</code></pre><p>现在，已经可以创建客户端代理了，例如：</p><pre><code>[DependsOn(    typeof(AbpHttpClientModule), //用来创建客户端代理    typeof(BookStoreApplicationModule) //包含应用服务接口    )]public class MyClientAppModule : AbpModule{    public override void ConfigureServices(ServiceConfigurationContext context)    {        var service = IocManager.Resolve&lt;IServiceCollection&gt;();        //创建动态客户端代理        service.AddHttpClientProxies(typeof(BookStoreApplicationModule).Assembly, RemoteServiceName);    }}</code></pre><p>AddHttpClientproxies方法获得一个程序集,找到这个程序集中所有的服务接口,创建并注册代理类.</p><p>注意：需要在 Starup 中注册 IServiceCollection，如：</p><pre><code>// Configure Abp and Dependency Injectionreturn services.AddAbp&lt;QMSWebHostModule&gt;(    // Configure Log4Net logging    options =&gt;    {        options.IocManager.IocContainer.AddFacility&lt;LoggingFacility&gt;(            f =&gt; f.UseAbpLog4Net().WithConfig(&quot;log4net.config&quot;)        );        options.IocManager.Register(typeof(IServiceCollection), services.GetType());    });</code></pre><h4 id="Endpoint配置"><a href="#Endpoint配置" class="headerlink" title="Endpoint配置"></a>Endpoint配置</h4><p>appsettings.json文件中的RemoteServices节点被用来设置默认的服务地址.下面是最简单的配置:</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"RemoteServices"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"Default"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">"http://localhost:53929/"</span>    <span class="token punctuation">}</span>   <span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>可以很直接地使用.只需要在你的客户端程序中注入服务接口:</p><pre><code>public class MyService : ITransientDependency{    private readonly IBookAppService _bookService;    public MyService(IBookAppService bookService)    {        _bookService = bookService;    }    public async Task DoIt()    {        var books = await _bookService.GetListAsync();        foreach (var book in books)        {            Console.WriteLine($&quot;[BOOK {book.Id}] Name={book.Name}&quot;);        }    }}</code></pre><p>本例注入了上面定义的IBookAppService服务接口.当客户端调用服务方法的时候动态客户端代理就会创建一个HTTP调用.</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="RemoteServiceOptions"><a href="#RemoteServiceOptions" class="headerlink" title="RemoteServiceOptions"></a>RemoteServiceOptions</h4><p>默认情况下RemoteServiceOptions从appsettings.json获取.或者,你可以使用Configure方法来设置或重写它.如:</p><pre><code>public override void Initialize(){    AbpConfigurationExtensions.ConfigureOptions&lt;AbpRemoteServiceOptions&gt;(option =&gt;    {        option.RemoteServices.Default = new RemoteServiceConfiguration(&quot;/&quot;);    });}</code></pre><h4 id="多个远程服务端点"><a href="#多个远程服务端点" class="headerlink" title="多个远程服务端点"></a>多个远程服务端点</h4><p>上面的例子已经配置了”Default”远程服务端点.你可能需要为不同的服务创建不同的端点.(就像在微服务方法中一样,每个微服务具有不同的端点).在这种情况下,你可以在你的配置文件中添加其他的端点:</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"RemoteServices"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"Default"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">"http://localhost:53929/"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"BookStore"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">"http://localhost:48392/"</span>    <span class="token punctuation">}</span>   <span class="token punctuation">}</span> <span class="token punctuation">}</span></code></pre><p>AddHttpClientProxies方法有一个可选的参数来定义远程服务的名字:</p><pre><code>context.Services.AddHttpClientProxies(    typeof(BookStoreApplicationModule).Assembly,    remoteServiceName: &quot;BookStore&quot;);</code></pre><p>remoteServiceName参数会匹配通过RemoteServiceOptions配置的服务端点.如果BookStore端点没有定义就会使用默认的Default端点.</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ABP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ABP VNext</title>
      <link href="/microservice/abpvnext/"/>
      <url>/microservice/abpvnext/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ABP是用于创建现代Web应用程序的完整体系结构和强大的基础架构！遵循最佳实践和约定，为您提供SOLID开发经验。</p></blockquote><blockquote><p>官网：<a href="https://abp.io/" target="_blank" rel="noopener">https://abp.io/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/abpvnext/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/abp-logo-dark.svg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="AbpVNext介绍"><a href="#AbpVNext介绍" class="headerlink" title="AbpVNext介绍"></a>AbpVNext介绍</h2><p>ABP是一个完整的架构和强大的基础架构，可以创建现代Web应用程序 遵循最佳实践和惯例，为您提供SOLID开发体验。</p><p><a href="https://www.abp.io/" target="_blank" rel="noopener">官方网址</a></p><h2 id="ABP-CLI"><a href="#ABP-CLI" class="headerlink" title="ABP CLI"></a>ABP CLI</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><blockquote><p>ABP CLI (命令行接口) 是一个命令行工具,用来执行基于ABP解决方案的一些常见操作.</p></blockquote><p>ABP CLI 是一个 <a href="https://docs.microsoft.com/en-us/dotnet/core/tools/global-tools" target="_blank" rel="noopener">dotnet global tool.</a> 使用命令行窗口安装:</p><blockquote><p>dotnet tool install -g Volo.Abp.Cli</p></blockquote><p>更新最新版本：</p><blockquote><p>dotnet tool update -g Volo.Abp.Cli</p></blockquote><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><p>生成基于ABP<a href="https://docs.abp.io/zh-Hans/abp/latest/Startup-Templates/Index" target="_blank" rel="noopener">启动模板</a>的新解决方案.</p><p>基本用法:</p><pre class=" language-bash"><code class="language-bash">abp new <span class="token operator">&lt;</span>解决方案名称<span class="token operator">></span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span></code></pre><p>示例:</p><pre class=" language-bash"><code class="language-bash">abp new Acme.BookStore</code></pre><ul><li>Acme.BookStore是解决方案的名称.</li><li>常见的命名方式类似于 <em>YourCompany.YourProject</em>. 不过你可以使用自己喜欢的方式,如 <em>YourProject</em> (单级命名空间) 或 <em>YourCompany.YourProduct.YourModule</em> (三级命名空间).</li></ul><h5 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h5><ul><li><code>--template</code> 或 <code>-t</code>: 指定模板. 默认的模板是 <code>mvc</code>.可用的模板有:<ul><li><code>mvc</code> (默认): ASP.NET Core MVC应用程序模板. 其他选项:<ul><li><code>--database-provider</code> 或 <code>-d</code>: 指定数据库提供程序. 默认提供程序是 <code>ef</code>. 可用的提供程序有:<ul><li><code>ef</code>: Entity Framework Core.</li><li><code>mongodb</code>: MongoDB.</li></ul></li><li><code>--tiered</code>: 创建分层解决方案,Web和Http Api层在物理上是分开的. 如果未指定会创建一个分层的解决方案, 此解决方案没有那么复杂,适合大多数场景.</li></ul></li><li><code>mvc-module</code>: ASP.NET CoreMVC模块模板]. 其他选项:<ul><li><code>--no-ui</code>: 不包含UI. 仅创建服务模块 (也称为微服务 - 没有UI).</li></ul></li></ul></li><li><code>--output-folder</code> 或 <code>-o</code>: 指定输出文件夹,默认是当前目录.</li></ul><h4 id="add-package"><a href="#add-package" class="headerlink" title="add-package"></a>add-package</h4><p>添加新的ABP包到项目中</p><ul><li>添加nuget包做为项目的依赖项目.</li><li>添加 <code>[DependsOn(...)]</code> attribute到项目的模块类 .</li></ul><blockquote><p>需要注意的是添加的模块可能需要额外的配置,通常会在包的文档中指出.</p></blockquote><p>基本用法:</p><pre class=" language-bash"><code class="language-bash">abp add-package <span class="token operator">&lt;</span>包名<span class="token operator">></span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span></code></pre><p>示例:</p><pre><code>abp add-package Volo.Abp.MongoDB</code></pre><ul><li>示例中将Volo.Abp.MongoDB包添加到项目中.</li></ul><h5 id="Options-1"><a href="#Options-1" class="headerlink" title="Options"></a>Options</h5><ul><li><code>--project</code> 或 <code>-p</code>: 指定项目 (.csproj) 路径. 如果未指定,Cli会尝试在当前目录查找.csproj文件.</li></ul><h4 id="add-module"><a href="#add-module" class="headerlink" title="add-module"></a>add-module</h4><p>通过查找模块的所有包,查找解决方案中的相关项目,并将每个包添加到解决方案中的相应项目,从而将多包模块添加到解决方案中.</p><blockquote><p>由于分层,不同的数据库提供程序选项或其他原因,业务模块通常由多个包组成. 使用<code>add-module</code>命令可以大大简化向模块添加模块的过程. 但是每个模块可能需要一些其他配置,这些配置通常在相关模块的文档中指出.</p></blockquote><p>基本用法:</p><pre class=" language-bash"><code class="language-bash">abp add-module <span class="token operator">&lt;</span>模块名称<span class="token operator">></span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span></code></pre><p>示例:</p><pre class=" language-bash"><code class="language-bash">abp add-module Volo.Blogging</code></pre><ul><li>示例中将Volo.Blogging模块添加到解决方案中.</li></ul><h5 id="Options-2"><a href="#Options-2" class="headerlink" title="Options"></a>Options</h5><ul><li><code>--solution</code> 或 <code>-s</code>: 指定解决方案 (.sln) 路径. 如果未指定,CLI会尝试在当前目录中寻找.sln文件.</li><li><code>--skip-db-migrations</code>: 对于EF Core 数据库提供程序,它会自动添加新代码的第一次迁移 (<code>Add-Migration</code>) 并且在需要时更新数据库 (<code>Update-Database</code>). 指定此选项可跳过此操作.</li></ul><h4 id="update"><a href="#update" class="headerlink" title="update"></a>update</h4><p>更新所有ABP相关的包可能会很繁琐,框架和模块都有很多包. 此命令自动将解决方案或项目中所有ABP相关的包更新到最新版本.</p><p>用法:</p><pre class=" language-bash"><code class="language-bash">abp update <span class="token punctuation">[</span>options<span class="token punctuation">]</span></code></pre><ul><li>如果你的文件夹中有.sln文件,运行命令会将解决方案中所有项目ABP相关的包更新到最新版本.</li><li>如果你的文件夹中有.csproj文件,运行命令会将项目中所有ABP相关的包更新到最新版本.</li></ul><h5 id="Options-3"><a href="#Options-3" class="headerlink" title="Options"></a>Options</h5><ul><li><code>--include-previews</code> 或 <code>-p</code>: 将预览版, 测试版本 和 rc 包 同时更新到最新版本.</li></ul><h3 id="help"><a href="#help" class="headerlink" title="#help"></a>#help</h3><p>CLI的基本用法信息.</p><p>用法:</p><pre class=" language-bash"><code class="language-bash">abp <span class="token function">help</span> <span class="token punctuation">[</span>命令名<span class="token punctuation">]</span></code></pre><p>示例:</p><pre class=" language-bash"><code class="language-bash">abp <span class="token function">help</span>        <span class="token comment" spellcheck="true"># 显示常规帮助.</span>abp <span class="token function">help</span> new    <span class="token comment" spellcheck="true"># 显示有关 "New" 命令的帮助.</span></code></pre><h2 id="远程端点调用"><a href="#远程端点调用" class="headerlink" title="远程端点调用"></a>远程端点调用</h2><p>appsettings.json文件包含RemoteServices部分,用于声明远程服务端点. 每个微服务通常都有不同的端点. 使用API网关模式为应用程序提供单个端点:</p><pre class=" language-json"><code class="language-json"><span class="token property">"RemoteServices"</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token property">"Default"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">"http://localhost:9000/"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>查找源码，发现 ABP 是通过 DynamicHttpProxyInterceptor 拦截器实现远程端点调用，查看拦截方法如下：</p><pre><code>public override void Intercept(IAbpMethodInvocation invocation){    if (invocation.Method.ReturnType == typeof(void))    {        AsyncHelper.RunSync(() =&gt; MakeRequestAsync(invocation));    }    else    {        var responseAsString = AsyncHelper.RunSync(() =&gt; MakeRequestAsync(invocation));        //TODO: Think on that        if (TypeHelper.IsPrimitiveExtended(invocation.Method.ReturnType, true))        {            invocation.ReturnValue = Convert.ChangeType(responseAsString, invocation.Method.ReturnType);        }        else        {            invocation.ReturnValue = JsonSerializer.Deserialize(                invocation.Method.ReturnType,                responseAsString            );        }    }}</code></pre><p>拦截方法主要是调用 MakeRequestAsync 执行远程调用，对于有返回值的方法，如果是基础类型，直接类型转换，否则执行反序列化。</p><pre><code>private async Task&lt;string&gt; MakeRequestAsync(IAbpMethodInvocation invocation){    var clientConfig = ClientOptions.HttpClientProxies.GetOrDefault(typeof(TService)) ?? throw new AbpException($&quot;Could not get DynamicHttpClientProxyConfig for {typeof(TService).FullName}.&quot;);    var remoteServiceConfig = AbpRemoteServiceOptions.RemoteServices.GetConfigurationOrDefault(clientConfig.RemoteServiceName);    var client = HttpClientFactory.Create(clientConfig.RemoteServiceName);    var action = await ApiDescriptionFinder.FindActionAsync(remoteServiceConfig.BaseUrl, typeof(TService), invocation.Method);    var apiVersion = GetApiVersionInfo(action);    var url = remoteServiceConfig.BaseUrl.EnsureEndsWith(&#39;/&#39;) + UrlBuilder.GenerateUrlWithParameters(action, invocation.ArgumentsDictionary, apiVersion);    var requestMessage = new HttpRequestMessage(action.GetHttpMethod(), url)    {        Content = RequestPayloadBuilder.BuildContent(action, invocation.ArgumentsDictionary, JsonSerializer, apiVersion)    };    AddHeaders(invocation, action, requestMessage, apiVersion);    await ClientAuthenticator.Authenticate(        new RemoteServiceHttpClientAuthenticateContext(            client,            requestMessage,            remoteServiceConfig,            clientConfig.RemoteServiceName        )    );    var response = await client.SendAsync(requestMessage, GetCancellationToken());    if (!response.IsSuccessStatusCode)    {        await ThrowExceptionForResponseAsync(response);    }    return await response.Content.ReadAsStringAsync();}</code></pre><p>首先获取客户端代理配置，一般是默认值Default。然后根据客户端代理配置远程服务名称获取远程服务配置，即RemoteServices配置。使用 HttpClientFactory 创建 HttpClient。</p><p>action 是远程方法的描述信息，每个ABP服务都有一个api/abp/api-definition接口，以获取服务接口描述信息，这个接口定义在Volo.Abp.AspNetCore.Mvc模块，一般会在*.HttpApi模块中引用。</p><p>获取API版本信息，用以构建URL的版本<br>拼接URL<br>构建请求信息<br>添加请求头<br>身份验证<br>执行远程请求</p><p>拦截器在 ServiceCollectionDynamicHttpClientProxyExtensions 扩展方法中注册，注册方法如下：</p><pre><code>public static IServiceCollection AddHttpClientProxies(    [NotNull] this IServiceCollection services,    [NotNull] Assembly assembly,    [NotNull] string remoteServiceConfigurationName = RemoteServiceConfigurationDictionary.DefaultName,    bool asDefaultServices = true){    Check.NotNull(services, nameof(assembly));    //TODO: Make a configuration option and add remoteServiceName inside it!    //TODO: Add option to change type filter    var serviceTypes = assembly.GetTypes().Where(t =&gt;        t.IsInterface &amp;&amp; t.IsPublic &amp;&amp; typeof(IRemoteService).IsAssignableFrom(t)    );    foreach (var serviceType in serviceTypes)    {        services.AddHttpClientProxy(            serviceType,             remoteServiceConfigurationName,            asDefaultServices            );    }    return services;}public static IServiceCollection AddHttpClientProxy(    [NotNull] this IServiceCollection services,    [NotNull] Type type,    [NotNull] string remoteServiceConfigurationName = RemoteServiceConfigurationDictionary.DefaultName,    bool asDefaultService = true){    Check.NotNull(services, nameof(services));    Check.NotNull(type, nameof(type));    Check.NotNullOrWhiteSpace(remoteServiceConfigurationName, nameof(remoteServiceConfigurationName));    services.Configure&lt;AbpHttpClientOptions&gt;(options =&gt;    {        options.HttpClientProxies[type] = new DynamicHttpClientProxyConfig(type, remoteServiceConfigurationName);    });    //use IHttpClientFactory and polly    services.AddHttpClient(remoteServiceConfigurationName)        .AddTransientHttpErrorPolicy(builder =&gt;            // retry 3 times            builder.WaitAndRetryAsync(3, i =&gt; TimeSpan.FromSeconds(Math.Pow(2, i))));    var interceptorType = typeof(DynamicHttpProxyInterceptor&lt;&gt;).MakeGenericType(type);    services.AddTransient(interceptorType);    var interceptorAdapterType = typeof(CastleAbpInterceptorAdapter&lt;&gt;).MakeGenericType(interceptorType);    if (asDefaultService)    {        services.AddTransient(            type,            serviceProvider =&gt; ProxyGeneratorInstance                .CreateInterfaceProxyWithoutTarget(                    type,                    (IInterceptor)serviceProvider.GetRequiredService(interceptorAdapterType)                )        );    }    services.AddTransient(        typeof(IHttpClientProxy&lt;&gt;).MakeGenericType(type),        serviceProvider =&gt;        {            var service = ProxyGeneratorInstance                .CreateInterfaceProxyWithoutTarget(                    type,                    (IInterceptor) serviceProvider.GetRequiredService(interceptorAdapterType)                );            return Activator.CreateInstance(                typeof(HttpClientProxy&lt;&gt;).MakeGenericType(type),                service            );        });    return services;}</code></pre><p>一般注册整个程序集，实现了IRemoteService接口的服务都会被注册为远程方法。<br>最佳实践是在<em>.HttpApi.Client项目中注册</em>.Application.Contracts程序集，其它微服务只需要依赖*.HttpApi.Client，执行远程端点调用和本地调用一样简单。</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ABP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EntityFramworkCore相关</title>
      <link href="/microservice/efcore/"/>
      <url>/microservice/efcore/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Entity Framework (EF) Core 是轻量化、可扩展、开源和跨平台版的常用 Entity Framework 数据访问技术。</p></blockquote><blockquote><p>官网文档：<a href="https://docs.microsoft.com/zh-cn/ef/core/" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/ef/core/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/efcore/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/efcore.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="EntityFramworkCore介绍"><a href="#EntityFramworkCore介绍" class="headerlink" title="EntityFramworkCore介绍"></a>EntityFramworkCore介绍</h2><p>EF Core 可用作对象关系映射程序 (O/RM)，以便于 .NET 开发人员能够使用 .NET 对象来处理数据库，这样就不必经常编写大部分数据访问代码了。</p><h2 id="EntityFramworkCore使用"><a href="#EntityFramworkCore使用" class="headerlink" title="EntityFramworkCore使用"></a>EntityFramworkCore使用</h2><h3 id="数据迁移常用命令："><a href="#数据迁移常用命令：" class="headerlink" title="数据迁移常用命令："></a>数据迁移常用命令：</h3><p>安装ef工具</p><pre class=" language-bash"><code class="language-bash">dotnet tool <span class="token function">install</span> -g dotnet-ef</code></pre><p>创建迁移</p><pre class=" language-bash"><code class="language-bash">Add-Migration InitialCreatedotnet ef migrations add InitialCreate</code></pre><p>更新数据库</p><pre class=" language-bash"><code class="language-bash">Update-Databasedotnet ef database update</code></pre><p>删除迁移</p><pre class=" language-bash"><code class="language-bash">Remove-Migrationdotnet ef migrations remove</code></pre><p>还原迁移</p><pre class=" language-bash"><code class="language-bash">Update-Database LastGoodMigrationdotnet ef database update LastGoodMigration</code></pre><p>生成SQL脚本</p><pre class=" language-bash"><code class="language-bash">Script-Migrationdotnet ef migrations script</code></pre><p>在运行时应用迁移</p><pre class=" language-csharp"><code class="language-csharp">myDbContext<span class="token punctuation">.</span>Database<span class="token punctuation">.</span><span class="token function">Migrate</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="EntityFramworkCore使用Oracle"><a href="#EntityFramworkCore使用Oracle" class="headerlink" title="EntityFramworkCore使用Oracle"></a>EntityFramworkCore使用Oracle</h2><p>从NuGet安装包：Oracle.EntityFramworkCore</p><p>Oracle数据库的默认事务级别<br>在PreInitialize事件中设置工作单元的默认事务级别为 ReadCommitted</p><blockquote><p>Configuration.UnitOfWork.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ORM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins - 持续集成引擎</title>
      <link href="/microservice/jenkins/"/>
      <url>/microservice/jenkins/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Jenkins是开源CI&amp;CD软件领导者， 提供超过1000个插件来支持构建、部署、自动化， 满足任何项目的需要。</p></blockquote><blockquote><p>官网文档：<a href="https://www.jenkins.io/zh/" target="_blank" rel="noopener">https://www.jenkins.io/zh/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/jenkins/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/jenkins.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="Jenkins介绍"><a href="#Jenkins介绍" class="headerlink" title="Jenkins介绍"></a>Jenkins介绍</h2><p>Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。</p><p><a href="https://jenkins.io/zh/" target="_blank" rel="noopener">Jenkins官网</a></p><h2 id="Jenkins使用"><a href="#Jenkins使用" class="headerlink" title="Jenkins使用"></a>Jenkins使用</h2><p>Jenkin的Execute Shell构建步骤的最后一个命令的退出代码决定了构建步骤的成功/失败<br>RoboCopy如果所有文件都已成功复制，则返回代码为1. 除了0以外的任何内容都被构建步骤报告为失败<br><a href="https://stackoverflow.com/questions/33358242/build-step-windows-powershell-marked-build-as-failure-why" target="_blank" rel="noopener">https://stackoverflow.com/questions/33358242/build-step-windows-powershell-marked-build-as-failure-why</a></p><p>部署到IIS上的ASP.NET Core项目，在更新的时候会进程占用的错误<br><a href="http://m.mamicode.com/info-detail-2709112.html" target="_blank" rel="noopener">http://m.mamicode.com/info-detail-2709112.html</a><br><a href="https://docs.microsoft.com/zh-cn/aspnet/core/host-and-deploy/iis/?view=aspnetcore-2.2#locked-deployment-files" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/aspnet/core/host-and-deploy/iis/?view=aspnetcore-2.2#locked-deployment-files</a></p><p>IIS构建配置示例：</p><p>编译</p><pre class=" language-bash"><code class="language-bash">dotnet build</code></pre><p>运行测试</p><pre class=" language-bash"><code class="language-bash">dotnet <span class="token function">test</span> microservices\AssemblyReport\test\AssemblyReport.Tests\AssemblyReport.Tests.csproj</code></pre><p>发布</p><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> microservices/AssemblyReport/src/AssemblyReport.Web.Hostdotnet publish -c Release -o D:\Jenkins\BuildData\Workspace\Publish\AssemblyReport</code></pre><p>压缩备份</p><pre class=" language-bash"><code class="language-bash"><span class="token function">rar</span> a -agYYYYMMDDHHMMSS -x*\App_Data D:\BackFile\AssemblyReport\Service D:\AssemblyReport21031</code></pre><p>app_offline.htm转发请求，防止文件被占用，可以不停止服务发布</p><pre class=" language-bash"><code class="language-bash">xcopy D:\app_offline.htm D:\AssemblyReport21031</code></pre><p>复制发布文件到IIS目录，排除json config pdb文件，失败重试3次，每次重试间隔1秒</p><pre class=" language-bash"><code class="language-bash">robocopy D:\Jenkins\BuildData\Workspace\Publish\AssemblyReport D:\AssemblyReport21031 /xf *.json *.config *.pdb /R:3 /W:1</code></pre><p>删除app_offline.htm文件，恢复正常访问</p><pre class=" language-bash"><code class="language-bash">del D:\AssemblyReport21031\app_offline.htm</code></pre><p>退出</p><pre class=" language-bash"><code class="language-bash"><span class="token keyword">exit</span> 0</code></pre>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jQuery 教程</title>
      <link href="/web/jquery/"/>
      <url>/web/jquery/</url>
      
        <content type="html"><![CDATA[<h2 id="jQuery-选择器"><a href="#jQuery-选择器" class="headerlink" title="jQuery 选择器"></a>jQuery 选择器</h2><p><strong>选择器允许您对元素组或单个元素进行操作</strong></p><h3 id="元素选择器"><a href="#元素选择器" class="headerlink" title="元素选择器"></a>元素选择器</h3><blockquote><p>$(“p”) 选取 &lt;p&gt; 元素。</p></blockquote><blockquote><p>$(“p.intro”) 选取所有 class=”intro” 的 &lt;p&gt; 元素。</p></blockquote><blockquote><p>$(“p#demo”) 选取所有 id=”demo” 的 &lt;p&gt; 元素。</p></blockquote><h3 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h3><blockquote><p>$(“[href]”) 选取所有带有 href 属性的元素。</p></blockquote><blockquote><p>$(“[href=’#’]”) 选取所有带有 href 值等于 “#” 的元素。</p></blockquote><blockquote><p>$(“[href!=’#’]”) 选取所有带有 href 值不等于 “#” 的元素。</p></blockquote><blockquote><p>$(“[href$=’.jpg’]”) 选取所有 href 值以 “.jpg” 结尾的元素。</p></blockquote><h3 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h3><blockquote><p>$(“p”).css(“background-color”,”red”);</p></blockquote><h2 id="jQuery-事件"><a href="#jQuery-事件" class="headerlink" title="jQuery 事件"></a>jQuery 事件</h2><table><thead><tr><th>Event 函数</th><th>绑定函数至</th></tr></thead><tbody><tr><td>$(document).ready(function)</td><td>将函数绑定到文档的就绪事件（当文档完成加载时）</td></tr><tr><td>$(selector).click(function)</td><td>触发或将函数绑定到被选元素的点击事件</td></tr><tr><td>$(selector).dblclick(function)</td><td>触发或将函数绑定到被选元素的双击事件</td></tr><tr><td>$(selector).focus(function)</td><td>触发或将函数绑定到被选元素的获得焦点事件</td></tr><tr><td>$(selector).mouseover(function)</td><td>触发或将函数绑定到被选元素的鼠标悬停事件</td></tr></tbody></table><p><strong>var jq=jQuery.noConflict()</strong>，帮助您使用自己的名称（比如 jq）来代替 $ 符号。</p><h2 id="jQuery-效果"><a href="#jQuery-效果" class="headerlink" title="jQuery 效果"></a>jQuery 效果</h2><p><em>speed 参数：可以取值 “slow”、”fast” 或毫秒</em></p><p><em>callback 参数：函数执行完成后所执行的函数名称</em></p><h3 id="滑动"><a href="#滑动" class="headerlink" title="滑动"></a>滑动</h3><blockquote><p>向下滑动 slideDown(speed, callback);</p></blockquote><blockquote><p>向上滑动 slideUp(speed, callback);</p></blockquote><blockquote><p>上下切换 slideToggle(speed, callback);</p></blockquote><h3 id="淡入淡出"><a href="#淡入淡出" class="headerlink" title="淡入淡出"></a>淡入淡出</h3><blockquote><p>淡入 fadeIn(speed, callback);</p></blockquote><blockquote><p>淡出 fadeOut(speed, callback);</p></blockquote><blockquote><p>切换 fadeToggle(speed, callback);</p></blockquote><blockquote><p>渐变为给定的不透明度(0-1) fadeTo(speed, opacity, callback);</p></blockquote><h3 id="隐藏显示"><a href="#隐藏显示" class="headerlink" title="隐藏显示"></a>隐藏显示</h3><blockquote><p>隐藏 $(selector).hide(speed, callback);</p></blockquote><blockquote><p>显示 $(selector).show(speed, callback);</p></blockquote><blockquote><p>切换 $(selector).toggle(speed, callback);</p></blockquote><h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p><strong>语法：</strong></p><blockquote><p>$(selector).animate({params}, speed, callback);</p></blockquote><p>必须的 params 参数定义形成动画的 CSS 属性</p><p><strong>实例</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>left<span class="token punctuation">:</span><span class="token string">'250px'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p><font color=#fe9955>提示：</font>默认的，所有HTML元素都有一个静态位置，且无法移动。如需对位置进行操作，要记得首先把元素的 CSS position 属性设置为 relative、fixed 或 absolute！</p></blockquote><p><strong>操作多个属性</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    left<span class="token punctuation">:</span><span class="token string">'250px'</span><span class="token punctuation">,</span>    opacity<span class="token punctuation">:</span><span class="token string">'0.5'</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span><span class="token string">'150px'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span><span class="token string">'150px'</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>也可以定义相对值（该值相对于元素的当前值）。需要在值的前面加上 += 或 -=：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    left<span class="token punctuation">:</span><span class="token string">'250px'</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span><span class="token string">'+=150px'</span><span class="token punctuation">,</span>    width<span class="token punctuation">:</span><span class="token string">'+=150px'</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>支持队列功能，会逐一调用队列中的动画</p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">var</span> div<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  div<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>height<span class="token punctuation">:</span><span class="token string">'300px'</span><span class="token punctuation">,</span>opacity<span class="token punctuation">:</span><span class="token string">'0.4'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  div<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span><span class="token string">'300px'</span><span class="token punctuation">,</span>opacity<span class="token punctuation">:</span><span class="token string">'0.8'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  div<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>height<span class="token punctuation">:</span><span class="token string">'100px'</span><span class="token punctuation">,</span>opacity<span class="token punctuation">:</span><span class="token string">'0.4'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  div<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span><span class="token string">'100px'</span><span class="token punctuation">,</span>opacity<span class="token punctuation">:</span><span class="token string">'0.8'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="停止动画"><a href="#停止动画" class="headerlink" title="停止动画"></a>停止动画</h3><p><strong>stop() 方法用于在动画或效果完成前对它们进行停止</strong></p><p><strong>语法</strong></p><blockquote><p>$(selector).stop(stopAll,goToEnd);</p></blockquote><p>可选的 stopAll 参数规定是否清除动画队列，默认是 false，只停止活动的动画，队列中的动画会继续执行</p><p>可选的 gotoEnd 参数规定是否立即完成当前动画，默认是 false</p><h3 id="Callback-函数"><a href="#Callback-函数" class="headerlink" title="Callback 函数"></a>Callback 函数</h3><p><strong>Callback 函数在当前函数完成之后执行</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"The paragraph is now hidden"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="Chaining"><a href="#Chaining" class="headerlink" title="Chaining"></a>Chaining</h3><p><strong>Chaining 允许我们在一条语句中允许多个 jQuery 方法（在相同的元素上）</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#p1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideUp</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideDown</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="jQuery-HTML"><a href="#jQuery-HTML" class="headerlink" title="jQuery HTML"></a>jQuery HTML</h2><h3 id="jQuery-获取内容和属性"><a href="#jQuery-获取内容和属性" class="headerlink" title="jQuery 获取内容和属性"></a>jQuery 获取内容和属性</h3><ul><li><p>text() - 设置或返回所选元素的文本内容</p></li><li><p>html() - 设置或返回所选元素的内容（包括 HTML 标记）</p></li><li><p>val()  - 设置或返回表单字段的值</p></li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Text: "</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"HTML: "</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Value: "</span> <span class="token operator">+</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>获得链接中 href 属性的值</p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#w3s"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="jQuery-设置内容和属性"><a href="#jQuery-设置内容和属性" class="headerlink" title="jQuery 设置内容和属性"></a>jQuery 设置内容和属性</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"Hello world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">"&lt;b>Hello world!&lt;/b>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">"Dolly Duck"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>text()、html() 以及 val() 的回调函数</strong></p><blockquote><p>上面的三个 jQuery 方法：text()、html() 以及 val()，同样拥有回调函数。回调函数由两个参数：被选元素列表中当前元素的下标，以及原始（旧的）值。然后以函数新值返回您希望使用的字符串。</p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>origText<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"Old text: "</span> <span class="token operator">+</span> origText <span class="token operator">+</span> " New <span class="token class-name">text</span><span class="token punctuation">:</span> Hello world<span class="token operator">!</span>    <span class="token punctuation">(</span>index<span class="token punctuation">:</span> <span class="token string">" + i + "</span><span class="token punctuation">)</span>"<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#btn2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#test2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>origText<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"Old html: "</span> <span class="token operator">+</span> origText <span class="token operator">+</span> " New <span class="token class-name">html</span><span class="token punctuation">:</span> Hello <span class="token operator">&lt;</span>b<span class="token operator">></span>world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">></span>    <span class="token punctuation">(</span>index<span class="token punctuation">:</span> <span class="token string">" + i + "</span><span class="token punctuation">)</span>"<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>设置属性 - attr()</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#w3s"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token string">"href"</span> <span class="token punctuation">:</span> <span class="token string">"http://www.w3school.com.cn/jquery"</span><span class="token punctuation">,</span>    <span class="token string">"title"</span> <span class="token punctuation">:</span> <span class="token string">"W3School jQuery Tutorial"</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>attr() 的回调函数</strong></p><blockquote><p>jQuery 方法 attr()，也提供回调函数。回调函数由两个参数：被选元素列表中当前元素的下标，以及原始（旧的）值。然后以函数新值返回您希望使用的字符串。</p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#w3s"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>origValue<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> origValue <span class="token operator">+</span> <span class="token string">"/jquery"</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="jQuery-添加元素"><a href="#jQuery-添加元素" class="headerlink" title="jQuery 添加元素"></a>jQuery 添加元素</h3><ul><li><p>append() - 在被选元素的结尾插入内容</p></li><li><p>prepend() - 在被选元素的开头插入内容</p></li><li><p>after() - 在被选元素之后插入内容</p></li><li><p>before() - 在被选元素之前插入内容</p></li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"Some appended text."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token string">"Some prepended text."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"Some text after"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token string">"Some text before"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">appendText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> txt1<span class="token operator">=</span><span class="token string">"&lt;p>Text.&lt;/p>"</span><span class="token punctuation">;</span>               <span class="token comment" spellcheck="true">// 以 HTML 创建新元素</span><span class="token keyword">var</span> txt2<span class="token operator">=</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"&lt;p>&lt;/p>"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">"Text."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 以 jQuery 创建新元素</span><span class="token keyword">var</span> txt3<span class="token operator">=</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 以 DOM 创建新元素</span>txt3<span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">"Text."</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>txt1<span class="token punctuation">,</span>txt2<span class="token punctuation">,</span>txt3<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// 追加新元素</span><span class="token punctuation">}</span></code></pre><h3 id="jQuery-删除元素"><a href="#jQuery-删除元素" class="headerlink" title="jQuery 删除元素"></a>jQuery 删除元素</h3><ul><li><p>remove() - 删除被选元素（及其子元素）</p></li><li><p>empty() - 从被选元素中删除子元素</p></li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#div1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#div1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>删除 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"italic"</span> 的所有 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">".italic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="jQuery-获取并设置-CSS-类"><a href="#jQuery-获取并设置-CSS-类" class="headerlink" title="jQuery 获取并设置 CSS 类"></a>jQuery 获取并设置 CSS 类</h3><ul><li><p>addClass() - 向被选元素添加一个或多个类</p></li><li><p>removeClass() - 从被选元素删除一个或多个类</p></li><li><p>toggleClass() - 对被选元素进行添加/删除类的切换操作</p></li><li><p>css() - 设置或返回样式属性</p></li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h1,h2,p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"important"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#div1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">"important blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h1,h2,p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h1,h2,p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toggleClass</span><span class="token punctuation">(</span><span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>css 方法</strong></p><blockquote><p>$(selector).css(“propertyname”); 返回首个匹配属性的值</p></blockquote><blockquote><p>$(selector).css(“propertyname”,”value”); 设置所有匹配的元素的值</p></blockquote><blockquote><p>$(selector).css({“propertyname”:”value”,”propertyname”:”value”,…}); 设置多个 CSS 属性</p></blockquote><h3 id="jQuery-尺寸"><a href="#jQuery-尺寸" class="headerlink" title="jQuery 尺寸"></a>jQuery 尺寸</h3><ul><li><p>width() 方法设置或返回元素的宽度（不包括内边距、边框或外边距）</p></li><li><p>height() 方法设置或返回元素的高度（不包括内边距、边框或外边距）</p></li><li><p>innerWidth() 方法返回元素的宽度（包括内边距）</p></li><li><p>innerHeight() 方法返回元素的高度（包括内边距）</p></li><li><p>outerWidth() 方法返回元素的宽度（包括内边距和边框）</p></li><li><p>outerHeight() 方法返回元素的高度（包括内边距和边框）</p></li><li><p>outerWidth(true) 方法返回元素的宽度（包括内边距、边框和外边距）</p></li><li><p>outerHeight(true) 方法返回元素的高度（包括内边距、边框和外边距）</p></li></ul><p>方法里面添加参数用于设置尺寸</p><h2 id="jQuery-遍历"><a href="#jQuery-遍历" class="headerlink" title="jQuery 遍历"></a>jQuery 遍历</h2><h3 id="向上遍历-DOM-树"><a href="#向上遍历-DOM-树" class="headerlink" title="向上遍历 DOM 树"></a>向上遍历 DOM 树</h3><ul><li><p>parent() 方法返回被选元素的直接父元素</p></li><li><p>parents() 方法返回被选元素的所有祖先元素，它一路向上直到文档的根元素 (&lt;html&gt;)</p></li><li><p>parentsUntil() 方法返回介于两个给定元素之间的所有祖先元素</p></li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parents</span><span class="token punctuation">(</span><span class="token string">"ul"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parentsUntil</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="向下遍历-DOM-树"><a href="#向下遍历-DOM-树" class="headerlink" title="向下遍历 DOM 树"></a>向下遍历 DOM 树</h3><ul><li><p>children() 方法返回被选元素的所有直接子元素</p></li><li><p>find() 方法返回被选元素的后代元素，一路向下直到最后一个后代</p></li></ul><pre class=" language-javascript"><code class="language-javascript">返回类名为 <span class="token string">"1"</span> 的所有 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素，并且它们是 <span class="token operator">&lt;</span>div<span class="token operator">></span> 的直接子元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">"p.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回属于 <span class="token operator">&lt;</span>div<span class="token operator">></span> 后代的所有 <span class="token operator">&lt;</span>span<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"span"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回 <span class="token operator">&lt;</span>div<span class="token operator">></span> 的所有后代<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="在-DOM-树中水平遍历"><a href="#在-DOM-树中水平遍历" class="headerlink" title="在 DOM 树中水平遍历"></a>在 DOM 树中水平遍历</h3><ul><li><p>siblings() 方法返回被选元素的所有同胞元素</p></li><li><p>next() 方法返回被选元素的下一个同胞元素</p></li><li><p>nextAll() 方法返回被选元素的所有后面的同胞元素</p></li><li><p>nextUntil() 方法返回介于两个给定参数之间的所有后面的同胞元素</p></li><li><p>prev() 方法返回被选元素的上一个同胞元素</p></li><li><p>prevAll() 方法返回被选元素的所有前面的同胞元素</p></li><li><p>prevUntil() 方法返回介于两个给定参数之间的所有前面的同胞元素</p></li></ul><pre class=" language-javascript"><code class="language-javascript">返回属于 <span class="token operator">&lt;</span>h2<span class="token operator">></span> 的同胞元素的所有 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">siblings</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回 <span class="token operator">&lt;</span>h2<span class="token operator">></span> 的下一个同胞元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回 <span class="token operator">&lt;</span>h2<span class="token operator">></span> 的所有跟随的同胞元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回介于 <span class="token operator">&lt;</span>h2<span class="token operator">></span> 与 <span class="token operator">&lt;</span>h6<span class="token operator">></span> 元素之间的所有同胞元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"h2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextUntil</span><span class="token punctuation">(</span><span class="token string">"h6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="jQuery-过滤"><a href="#jQuery-过滤" class="headerlink" title="jQuery 过滤"></a>jQuery 过滤</h3><ul><li><p>first() 方法返回被选元素的首个元素</p></li><li><p>last() 方法返回被选元素的最后一个元素</p></li><li><p>eq() 方法返回被选元素中带有指定索引号的元素</p></li><li><p>filter() 方法允许您规定一个标准。不匹配这个标准的元素会被从集合中删除，匹配的元素会被返回</p></li><li><p>not() 方法返回不匹配标准的所有元素</p></li></ul><blockquote><p><font color=#fe9955>提示：</font>not() 方法与 filter() 相反</p></blockquote><pre class=" language-javascript"><code class="language-javascript">选取首个 <span class="token operator">&lt;</span>div<span class="token operator">></span> 元素内部的第一个 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>选择最后一个 <span class="token operator">&lt;</span>div<span class="token operator">></span> 元素中的最后一个 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"div p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>索引号从 <span class="token number">0</span> 开始，因此首个元素的索引号是 <span class="token number">0</span> 而不是 <span class="token number">1</span>。选取第二个 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素（索引号 <span class="token number">1</span>）<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回带有类名 <span class="token string">"intro"</span> 的所有 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">".intro"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>返回不带有类名 <span class="token string">"intro"</span> 的所有 <span class="token operator">&lt;</span>p<span class="token operator">></span> 元素<span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token string">".intro"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="jQuery-AJAX"><a href="#jQuery-AJAX" class="headerlink" title="jQuery AJAX"></a>jQuery AJAX</h2><h3 id="jQuery-load-方法"><a href="#jQuery-load-方法" class="headerlink" title="jQuery load() 方法"></a>jQuery load() 方法</h3><p>load() 方法从服务器加载数据，并把返回的数据放入被选元素中</p><blockquote><p>$(selector).load(URL,data,callback);</p></blockquote><p>必需的 URL 参数规定您希望加载的 URL。</p><p>可选的 data 参数规定与请求一同发送的查询字符串键/值对集合。</p><p>可选的 callback 参数是 load() 方法完成后所执行的函数名称。</p><blockquote><p>$(“#div1”).load(“demo_test.txt”);</p></blockquote><pre class=" language-javascript"><code class="language-javascript">把 <span class="token string">"demo_test.txt"</span> 文件中 id<span class="token operator">=</span><span class="token string">"p1"</span> 的元素的内容，加载到指定的 <span class="token operator">&lt;</span>div<span class="token operator">></span> 元素中<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#div1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"demo_test.txt #p1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>可选的 callback 参数规定当 load() 方法完成后所要允许的回调函数。回调函数可以设置不同的参数：</p></blockquote><ul><li><p>responseTxt - 包含调用成功时的结果内容</p></li><li><p>statusTXT - 包含调用的状态</p></li><li><p>xhr - 包含 XMLHttpRequest 对象</p></li></ul><pre class=" language-javascript"><code class="language-javascript">在 <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法完成后显示一个提示框。如果 <span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法已成功，则显示“外部内容加载成功！”，而如果失败，则显示错误消息<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#div1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">"demo_test.txt"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>responseTxt<span class="token punctuation">,</span>statusTxt<span class="token punctuation">,</span>xhr<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>statusTxt<span class="token operator">==</span><span class="token string">"success"</span><span class="token punctuation">)</span>      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"外部内容加载成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>statusTxt<span class="token operator">==</span><span class="token string">"error"</span><span class="token punctuation">)</span>      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Error: "</span><span class="token operator">+</span>xhr<span class="token punctuation">.</span>status<span class="token operator">+</span><span class="token string">": "</span><span class="token operator">+</span>xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="jQuery-AJAX-get-和-post-方法"><a href="#jQuery-AJAX-get-和-post-方法" class="headerlink" title="jQuery - AJAX get() 和 post() 方法"></a>jQuery - AJAX get() 和 post() 方法</h3><ul><li><p>$.get() 方法通过 HTTP GET 请求从服务器上请求数据</p></li><li><p>$.post() 方法通过 HTTP POST 请求从服务器上请求数据</p></li><li><p>GET - 从指定的资源请求数据</p><ul><li><p>GET 请求可被缓存</p></li><li><p>GET 请求保留在浏览器历史记录中</p></li><li><p>GET 请求可被收藏为书签</p></li><li><p>GET 请求不应在处理敏感数据时使用</p></li><li><p>GET 请求有长度限制</p></li><li><p>GET 请求只应当用于取回数据</p></li></ul></li><li><p>POST - 向指定的资源提交要处理的数据</p><ul><li><p>POST 请求不会被缓存</p></li><li><p>POST 请求不会保留在浏览器历史记录中</p></li><li><p>POST 不能被收藏为书签</p></li><li><p>POST 请求对数据长度没有要求</p></li></ul></li></ul><blockquote><p>$.get(URL,callback);</p></blockquote><blockquote><p>$.post(URL,data,callback);</p></blockquote><pre class=" language-javascript"><code class="language-javascript">使用 $<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法从服务器上的一个文件中取回数据<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  $<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"demo_test.asp"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Data: "</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">"\nStatus: "</span> <span class="token operator">+</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>使用 $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 连同请求一起发送数据<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"demo_test_post.asp"</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    name<span class="token punctuation">:</span><span class="token string">"Donald Duck"</span><span class="token punctuation">,</span>    city<span class="token punctuation">:</span><span class="token string">"Duckburg"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>status<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Data: "</span> <span class="token operator">+</span> data <span class="token operator">+</span> <span class="token string">"\nStatus: "</span> <span class="token operator">+</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>App.Metrics+InfluxDB+Grafana实现统一性能监控</title>
      <link href="/microservice/metrics/"/>
      <url>/microservice/metrics/</url>
      
        <content type="html"><![CDATA[<blockquote><p>App.Metrics是一款开源的支持.NET Core的监控插件。</p></blockquote><blockquote><p>官网文档：<a href="https://www.app-metrics.io/" target="_blank" rel="noopener">https://www.app-metrics.io/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/metrics/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/appmetrics.png" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="基于-AppMetrics-实现统一性能监控"><a href="#基于-AppMetrics-实现统一性能监控" class="headerlink" title="基于 AppMetrics 实现统一性能监控"></a>基于 AppMetrics 实现统一性能监控</h2><p>优秀的平台需要有强大的性能监控</p><h2 id="influxdb"><a href="#influxdb" class="headerlink" title="influxdb"></a>influxdb</h2><p>1、到官网下载influxdb，下载Windows 64位版本</p><p>2、解压之后放到你想要放置的位置，然后编辑influxdb.conf配置文件</p><p>[meta]</p><p>  # Where the metadata/raft database is stored</p><p>  dir = “D:/BaseService/influxdb/meta”</p><p>[data]</p><p>  # The directory where the TSM storage engine stores TSM files.</p><p>  dir = “D:/BaseService/influxdb/data”</p><p>  # The directory where the TSM storage engine stores WAL files.</p><p>  wal-dir = “D:/BaseService/influxdb/wal”</p><p>3、启动：</p><pre class=" language-bash"><code class="language-bash">influxd -config influxdb.conf</code></pre><p>4、新开一个命令行窗口，连接influxdb，然后创建一个database</p><pre class=" language-bash"><code class="language-bash">influx -host 127.0.0.1 -port 8086 -username <span class="token string">"admin"</span> -password <span class="token string">"admin"</span>create database <span class="token string">"AppMetriceDB"</span>show databases</code></pre><p>5、安装influxd为本地服务</p><p>使用nssm.exe将influxdb安装为本地服务，具体方法参照<a href="http://richardn.ca/2019/01/04/installing-influxdb-on-windows/" target="_blank" rel="noopener">http://richardn.ca/2019/01/04/installing-influxdb-on-windows/</a></p><p>172.16.161.50:8086</p><p>AppMetriceDB</p><p>admin/admin</p><h2 id="grafana"><a href="#grafana" class="headerlink" title="grafana"></a>grafana</h2><p>1、下载Windows版本（64位）</p><p>2、直接运行grafana-server.exe即可，默认绑定3000端口号</p><p>3、浏览器打开serverip:3000，使用默认账号admin/admin（账号密码都是admin）登录</p><p>4、为InfluxDB添加数据源</p><p>5、为Grafana添加InfluxDB的Dashboard仪表盘的JSON文件<br>这里有两种方式：一种是直接给URL=&gt;<a href="https://grafana.com/dashboards/2125" target="_blank" rel="noopener">https://grafana.com/dashboards/2125</a> 另一种是我们手动下载这个URL的JSON，然后把JSON粘贴过来。</p><p>6、安装grafana-piechart-panel插件</p><p>在grafana的安装目录\bin目录运行 grafana-cli plugins install grafana-piechart-panel 命令,重新启动Grafana服务</p><p>172.16.161.50:3000</p><p>admin/admin</p><blockquote><p><a href="https://www.cnblogs.com/edisonchou/p/integrated_performance_monitoring_foundation.html" target="_blank" rel="noopener">.NET Core微服务之基于App.Metrics+InfluxDB+Grafana实现统一性能监控</a></p></blockquote><blockquote><p>Grafana Dashboard Json文件</p></blockquote><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"__inputs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"__requires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"grafana"</span><span class="token punctuation">,</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"grafana"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Grafana"</span><span class="token punctuation">,</span>      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"4.2.0"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"panel"</span><span class="token punctuation">,</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"grafana-piechart-panel"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Pie Chart"</span><span class="token punctuation">,</span>      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.1.4"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"panel"</span><span class="token punctuation">,</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Graph"</span><span class="token punctuation">,</span>      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">""</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"panel"</span><span class="token punctuation">,</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"singlestat"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Singlestat"</span><span class="token punctuation">,</span>      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">""</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"panel"</span><span class="token punctuation">,</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"table"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Table"</span><span class="token punctuation">,</span>      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">""</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"annotations"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Dashboard to visualize metrics captured by App Metrics ASP.NET Core Middleware 1.2.0, tested with App.Metrics.Extensions.Reporting.InfluxDB 1.2.0  - http://app-metrics.io/"</span><span class="token punctuation">,</span>  <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token property">"gnetId"</span><span class="token operator">:</span> <span class="token number">2125</span><span class="token punctuation">,</span>  <span class="token property">"graphTooltip"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token property">"hideControls"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>  <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"refresh"</span><span class="token operator">:</span> <span class="token string">"5s"</span><span class="token punctuation">,</span>  <span class="token property">"rows"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"collapse"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"250"</span><span class="token punctuation">,</span>      <span class="token property">"panels"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          <span class="token property">"cacheTimeout"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"colorBackground"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"colorValue"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>            <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>            <span class="token string">"rgba(50, 172, 45, 0.97)"</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"rpm"</span><span class="token punctuation">,</span>          <span class="token property">"gauge"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"maxValue"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>            <span class="token property">"minValue"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"thresholdLabels"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"thresholdMarkers"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"mappingType"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"mappingTypes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"value to text"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"range to text"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">2</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"maxDataPoints"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"nullText"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"postfix"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"postfixFontSize"</span><span class="token operator">:</span> <span class="token string">"50%"</span><span class="token punctuation">,</span>          <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"prefixFontSize"</span><span class="token operator">:</span> <span class="token string">"50%"</span><span class="token punctuation">,</span>          <span class="token property">"rangeMaps"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"null"</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"N/A"</span><span class="token punctuation">,</span>              <span class="token property">"to"</span><span class="token operator">:</span> <span class="token string">"null"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token property">"sparkline"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"fillColor"</span><span class="token operator">:</span> <span class="token string">"rgba(31, 118, 189, 0.18)"</span><span class="token punctuation">,</span>            <span class="token property">"full"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"lineColor"</span><span class="token operator">:</span> <span class="token string">"rgb(31, 120, 193)"</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate1m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"吞吐量"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"singlestat"</span><span class="token punctuation">,</span>          <span class="token property">"valueFontSize"</span><span class="token operator">:</span> <span class="token string">"80%"</span><span class="token punctuation">,</span>          <span class="token property">"valueMaps"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"="</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"N/A"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"null"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"valueName"</span><span class="token operator">:</span> <span class="token string">"current"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"cacheTimeout"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"colorBackground"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"colorValue"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token string">"rgba(50, 172, 45, 0.97)"</span><span class="token punctuation">,</span>            <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>            <span class="token string">"rgba(245, 54, 54, 0.9)"</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"percent"</span><span class="token punctuation">,</span>          <span class="token property">"gauge"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"maxValue"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>            <span class="token property">"minValue"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"thresholdLabels"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"thresholdMarkers"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"mappingType"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"mappingTypes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"value to text"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"range to text"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">2</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"maxDataPoints"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"nullText"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"postfix"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"postfixFontSize"</span><span class="token operator">:</span> <span class="token string">"50%"</span><span class="token punctuation">,</span>          <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"prefixFontSize"</span><span class="token operator">:</span> <span class="token string">"50%"</span><span class="token punctuation">,</span>          <span class="token property">"rangeMaps"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>              <span class="token property">"to"</span><span class="token operator">:</span> <span class="token string">""</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token property">"sparkline"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"fillColor"</span><span class="token operator">:</span> <span class="token string">"rgba(31, 118, 189, 0.18)"</span><span class="token punctuation">,</span>            <span class="token property">"full"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"lineColor"</span><span class="token operator">:</span> <span class="token string">"rgb(31, 120, 193)"</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__one_minute_error_percentage_rate"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"SELECT  \"value\" FROM \"application.httprequests__percentage_error_requests\" WHERE $timeFilter"</span><span class="token punctuation">,</span>              <span class="token property">"rawQuery"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"错误 %"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"singlestat"</span><span class="token punctuation">,</span>          <span class="token property">"valueFontSize"</span><span class="token operator">:</span> <span class="token string">"80%"</span><span class="token punctuation">,</span>          <span class="token property">"valueMaps"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"="</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"0%"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"null"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"valueName"</span><span class="token operator">:</span> <span class="token string">"current"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__active"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"活动的请求"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"application.httprequests__apdex.last"</span><span class="token operator">:</span> <span class="token string">"#6ED0E0"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__apdex"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"score"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token string">"critical"</span><span class="token punctuation">,</span>              <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token property">"line"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"lt"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">0.5</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span>              <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token property">"line"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"gt"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">0.5</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token string">"ok"</span><span class="token punctuation">,</span>              <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token property">"line"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"gt"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">0.75</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"性能指数"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"apdex"</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"350"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$col"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate1m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"1 min rate"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate5m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"5 min rate"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate15m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"15 min rate"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"吞吐量"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"rpm"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"350"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$col"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p95"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"95th Percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p98"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"98th Percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p99"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"99th Percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"响应时间"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"ms"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__one_minute_error_percentage_rate"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"错误率 %"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"percent"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token string">"100"</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"250px"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$col"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__error_rate"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate1m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"1min rate"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate5m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"5min rate"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate15m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"15min rate"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"错误率"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"rpm"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"cacheTimeout"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"combine"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"Others"</span><span class="token punctuation">,</span>            <span class="token property">"threshold"</span><span class="token operator">:</span> <span class="token number">0</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"80%"</span><span class="token punctuation">,</span>          <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"percent"</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"250px"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"sortDesc"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"legendType"</span><span class="token operator">:</span> <span class="token string">"Right side"</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"maxDataPoints"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"pieType"</span><span class="token operator">:</span> <span class="token string">"pie"</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"strokeWidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_http_status_code"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"http_status_code"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__errors"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"sum"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"错误"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"grafana-piechart-panel"</span><span class="token punctuation">,</span>          <span class="token property">"valueName"</span><span class="token operator">:</span> <span class="token string">"current"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"columns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Total"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"total"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"filterNull"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"pageSize"</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>          <span class="token property">"scroll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"showHeader"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"col"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>          <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"Time"</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(50, 172, 45, 0.97)"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/.*/"</span><span class="token punctuation">,</span>              <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>              <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"none"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_exception"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"exception"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__exceptions"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"未捕获的异常抛出"</span><span class="token punctuation">,</span>          <span class="token property">"transform"</span><span class="token operator">:</span> <span class="token string">"timeseries_aggregations"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"table"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"repeat"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatIteration"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatRowId"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"showTitle"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"概览"</span><span class="token punctuation">,</span>      <span class="token property">"titleSize"</span><span class="token operator">:</span> <span class="token string">"h6"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"collapse"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"300"</span><span class="token punctuation">,</span>      <span class="token property">"panels"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"350"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token string">"current"</span><span class="token punctuation">,</span>            <span class="token property">"sortDesc"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_route"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"route"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions_per_endpoint"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate1m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"吞吐量 / Endpoint"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"transparent"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"rpm"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"350"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">17</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_route"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"route"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions_per_endpoint"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p95"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"95th Percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"响应时间 / Endpoint"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"ms"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"columns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Current"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"current"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"filterNull"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"pageSize"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"scroll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"showHeader"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"col"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"Time"</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(50, 172, 45, 0.97)"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/.*/"</span><span class="token punctuation">,</span>              <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>              <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"ms"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_route"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"route"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions_per_endpoint"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p95"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"响应时间 / Endpoint"</span><span class="token punctuation">,</span>          <span class="token property">"transform"</span><span class="token operator">:</span> <span class="token string">"timeseries_aggregations"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"table"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"columns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Current"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"current"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"filterNull"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"pageSize"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"scroll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"showHeader"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"col"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"Time"</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(50, 172, 45, 0.97)"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/.*/"</span><span class="token punctuation">,</span>              <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>              <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"rpm"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_route"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"route"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__transactions_per_endpoint"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"rate1m"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"吞吐量 / Endpoint"</span><span class="token punctuation">,</span>          <span class="token property">"transform"</span><span class="token operator">:</span> <span class="token string">"timeseries_aggregations"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"table"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"columns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Current"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"current"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"filterNull"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"pageSize"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"scroll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"showHeader"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"col"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"Time"</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(50, 172, 45, 0.97)"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/.*/"</span><span class="token punctuation">,</span>              <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>              <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"percent"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_route"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"route"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__one_minute_error_percentage_rate_per_endpoint"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"错误请求的比例 / Endpoint"</span><span class="token punctuation">,</span>          <span class="token property">"transform"</span><span class="token operator">:</span> <span class="token string">"timeseries_aggregations"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"table"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"columns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Total"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"total"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"filterNull"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"pageSize"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"scroll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"showHeader"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"col"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"Time"</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(50, 172, 45, 0.97)"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/.*/"</span><span class="token punctuation">,</span>              <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>              <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"none"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_route [$tag_exception]"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"route"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"exception"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__exceptions"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"未捕获的异常抛出 / Endpoint"</span><span class="token punctuation">,</span>          <span class="token property">"transform"</span><span class="token operator">:</span> <span class="token string">"timeseries_aggregations"</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"table"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"repeat"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatIteration"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatRowId"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"showTitle"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Endpoints"</span><span class="token punctuation">,</span>      <span class="token property">"titleSize"</span><span class="token operator">:</span> <span class="token string">"h6"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"collapse"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"250"</span><span class="token punctuation">,</span>      <span class="token property">"panels"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          <span class="token property">"columns"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Current"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"current"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"filterNull"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fontSize"</span><span class="token operator">:</span> <span class="token string">"100%"</span><span class="token punctuation">,</span>          <span class="token property">"hideTimeOverride"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"pageSize"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"scroll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"showHeader"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"col"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"desc"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>          <span class="token property">"styles"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"YYYY-MM-DD HH:mm:ss"</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"Time"</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"date"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"colorMode"</span><span class="token operator">:</span> <span class="token string">"row"</span><span class="token punctuation">,</span>              <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>                <span class="token string">"rgba(50, 172, 45, 0.97)"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"decimals"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token string">"/.*/"</span><span class="token punctuation">,</span>              <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token string">"0.5"</span><span class="token punctuation">,</span>                <span class="token string">"1"</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>              <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"short"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$tag_health_check_name"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"health_check_name"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"tag"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.health__results"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Results"</span><span class="token punctuation">,</span>          <span class="token property">"transform"</span><span class="token operator">:</span> <span class="token string">"timeseries_aggregations"</span><span class="token punctuation">,</span>          <span class="token property">"transparent"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"table"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"cacheTimeout"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"colorBackground"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"colorValue"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"colors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token string">"rgba(245, 54, 54, 0.9)"</span><span class="token punctuation">,</span>            <span class="token string">"rgba(237, 129, 40, 0.89)"</span><span class="token punctuation">,</span>            <span class="token string">"rgba(50, 172, 45, 0.97)"</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"none"</span><span class="token punctuation">,</span>          <span class="token property">"gauge"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"maxValue"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>            <span class="token property">"minValue"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"thresholdLabels"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"thresholdMarkers"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"hideTimeOverride"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"dashboard"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"mappingType"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>          <span class="token property">"mappingTypes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"value to text"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"range to text"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token number">2</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"maxDataPoints"</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"nullText"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"postfix"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"postfixFontSize"</span><span class="token operator">:</span> <span class="token string">"50%"</span><span class="token punctuation">,</span>          <span class="token property">"prefix"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"prefixFontSize"</span><span class="token operator">:</span> <span class="token string">"50%"</span><span class="token punctuation">,</span>          <span class="token property">"rangeMaps"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"0"</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Unhealthy"</span><span class="token punctuation">,</span>              <span class="token property">"to"</span><span class="token operator">:</span> <span class="token string">"0.49"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"0.5"</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Degraded"</span><span class="token punctuation">,</span>              <span class="token property">"to"</span><span class="token operator">:</span> <span class="token string">"0.9"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"1.0"</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Healthy"</span><span class="token punctuation">,</span>              <span class="token property">"to"</span><span class="token operator">:</span> <span class="token string">"2.0"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>          <span class="token property">"sparkline"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"fillColor"</span><span class="token operator">:</span> <span class="token string">"rgba(31, 118, 189, 0.18)"</span><span class="token punctuation">,</span>            <span class="token property">"full"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"lineColor"</span><span class="token operator">:</span> <span class="token string">"rgb(31, 120, 193)"</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">false</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.health__score"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"value"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token string">"0.5,1"</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>          <span class="token property">"transparent"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"singlestat"</span><span class="token punctuation">,</span>          <span class="token property">"valueFontSize"</span><span class="token operator">:</span> <span class="token string">"80%"</span><span class="token punctuation">,</span>          <span class="token property">"valueMaps"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"="</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Unhealthy"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"0"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"="</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Degraded"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"0.5"</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"op"</span><span class="token operator">:</span> <span class="token string">"="</span><span class="token punctuation">,</span>              <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Healthy"</span><span class="token punctuation">,</span>              <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"1.0"</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"valueName"</span><span class="token operator">:</span> <span class="token string">"current"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"repeat"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatIteration"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatRowId"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"showTitle"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Health"</span><span class="token punctuation">,</span>      <span class="token property">"titleSize"</span><span class="token operator">:</span> <span class="token string">"h6"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"collapse"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token property">"height"</span><span class="token operator">:</span> <span class="token string">"300"</span><span class="token punctuation">,</span>      <span class="token property">"panels"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"hideEmpty"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$col"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__post_size"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p95"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"95th percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p98"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"98th percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p99"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"99th percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"last"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"median"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"median"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Post Request Size"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"decbytes"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>          <span class="token property">"aliasColors"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"bars"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>          <span class="token property">"editable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"error"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"fill"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">,</span>          <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"$summarize"</span><span class="token punctuation">,</span>          <span class="token property">"legend"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"alignAsTable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"current"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"max"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"min"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"rightSide"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"total"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"lines"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token property">"linewidth"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>          <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"nullPointMode"</span><span class="token operator">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span>          <span class="token property">"percentage"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"pointradius"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>          <span class="token property">"points"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"renderer"</span><span class="token operator">:</span> <span class="token string">"flot"</span><span class="token punctuation">,</span>          <span class="token property">"seriesOverrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"span"</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>          <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"steppedLine"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>          <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"alias"</span><span class="token operator">:</span> <span class="token string">"$col"</span><span class="token punctuation">,</span>              <span class="token property">"dsType"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>              <span class="token property">"groupBy"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"$interval"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"time"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                    <span class="token string">"null"</span>                  <span class="token punctuation">]</span><span class="token punctuation">,</span>                  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"fill"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"measurement"</span><span class="token operator">:</span> <span class="token string">"application.httprequests__put_size"</span><span class="token punctuation">,</span>              <span class="token property">"policy"</span><span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>              <span class="token property">"refId"</span><span class="token operator">:</span> <span class="token string">"A"</span><span class="token punctuation">,</span>              <span class="token property">"resultFormat"</span><span class="token operator">:</span> <span class="token string">"time_series"</span><span class="token punctuation">,</span>              <span class="token property">"select"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p95"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"95th percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p98"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"98th percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"p99"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"last"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"99th percentile"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token punctuation">[</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"median"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"field"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"median"</span>                  <span class="token punctuation">}</span><span class="token punctuation">,</span>                  <span class="token punctuation">{</span>                    <span class="token property">"params"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                      <span class="token string">"median"</span>                    <span class="token punctuation">]</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"alias"</span>                  <span class="token punctuation">}</span>                <span class="token punctuation">]</span>              <span class="token punctuation">]</span><span class="token punctuation">,</span>              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"app"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$application$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"env"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$environment$/"</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token punctuation">{</span>                  <span class="token property">"condition"</span><span class="token operator">:</span> <span class="token string">"AND"</span><span class="token punctuation">,</span>                  <span class="token property">"key"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>                  <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"=~"</span><span class="token punctuation">,</span>                  <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"/^$server$/"</span>                <span class="token punctuation">}</span>              <span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"thresholds"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token property">"timeFrom"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"timeShift"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Put Request Size"</span><span class="token punctuation">,</span>          <span class="token property">"tooltip"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"msResolution"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"shared"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>            <span class="token property">"value_type"</span><span class="token operator">:</span> <span class="token string">"individual"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"graph"</span><span class="token punctuation">,</span>          <span class="token property">"xaxis"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"mode"</span><span class="token operator">:</span> <span class="token string">"time"</span><span class="token punctuation">,</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>            <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"values"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token property">"yaxes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"bytes"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span>              <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"short"</span><span class="token punctuation">,</span>              <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"logBase"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>              <span class="token property">"max"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"min"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>              <span class="token property">"show"</span><span class="token operator">:</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"repeat"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatIteration"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"repeatRowId"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>      <span class="token property">"showTitle"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"PUT &amp; POST Request Size"</span><span class="token punctuation">,</span>      <span class="token property">"titleSize"</span><span class="token operator">:</span> <span class="token string">"h6"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"schemaVersion"</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">,</span>  <span class="token property">"style"</span><span class="token operator">:</span> <span class="token string">"dark"</span><span class="token punctuation">,</span>  <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"influxdb"</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"templating"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span>        <span class="token property">"allValue"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"current"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>        <span class="token property">"hide"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"includeAll"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"multi"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"environment"</span><span class="token punctuation">,</span>        <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"SHOW TAG VALUES WITH KEY = \"env\""</span><span class="token punctuation">,</span>        <span class="token property">"refresh"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"regex"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"tagValuesQuery"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"tagsQuery"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"query"</span><span class="token punctuation">,</span>        <span class="token property">"useTags"</span><span class="token operator">:</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"allValue"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"current"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>        <span class="token property">"hide"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"includeAll"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"multi"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"application"</span><span class="token punctuation">,</span>        <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"SHOW TAG VALUES WITH KEY = \"app\""</span><span class="token punctuation">,</span>        <span class="token property">"refresh"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"regex"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"tagValuesQuery"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"tagsQuery"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"query"</span><span class="token punctuation">,</span>        <span class="token property">"useTags"</span><span class="token operator">:</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"current"</span><span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"AppMetricsSandbox"</span><span class="token punctuation">,</span>          <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"AppMetricsSandbox"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"hide"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"datasource"</span><span class="token punctuation">,</span>        <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"influxdb"</span><span class="token punctuation">,</span>        <span class="token property">"refresh"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"regex"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"datasource"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"auto"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"auto_count"</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>        <span class="token property">"auto_min"</span><span class="token operator">:</span> <span class="token string">"10s"</span><span class="token punctuation">,</span>        <span class="token property">"current"</span><span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"5s"</span><span class="token punctuation">,</span>          <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"5s"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"hide"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"summarize"</span><span class="token punctuation">,</span>        <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"5s"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"5s"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"10s"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"10s"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"30s"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"30s"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"1m"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"1m"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"10m"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"10m"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"30m"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"30m"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"1h"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"1h"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"6h"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"6h"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"12h"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"12h"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"1d"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"1d"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"7d"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"7d"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"14d"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"14d"</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            <span class="token property">"selected"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"30d"</span><span class="token punctuation">,</span>            <span class="token property">"value"</span><span class="token operator">:</span> <span class="token string">"30d"</span>          <span class="token punctuation">}</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"5s,10s,30s,1m,10m,30m,1h,6h,12h,1d,7d,14d,30d"</span><span class="token punctuation">,</span>        <span class="token property">"refresh"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"interval"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"allValue"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"current"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"datasource"</span><span class="token operator">:</span> <span class="token string">"$datasource"</span><span class="token punctuation">,</span>        <span class="token property">"hide"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"includeAll"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"label"</span><span class="token operator">:</span> <span class="token null">null</span><span class="token punctuation">,</span>        <span class="token property">"multi"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"server"</span><span class="token punctuation">,</span>        <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"SHOW TAG VALUES WITH KEY = \"server\""</span><span class="token punctuation">,</span>        <span class="token property">"refresh"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"regex"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"sort"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"tagValuesQuery"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"tagsQuery"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"query"</span><span class="token punctuation">,</span>        <span class="token property">"useTags"</span><span class="token operator">:</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"time"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"from"</span><span class="token operator">:</span> <span class="token string">"now-5m"</span><span class="token punctuation">,</span>    <span class="token property">"to"</span><span class="token operator">:</span> <span class="token string">"now"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"timepicker"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"refresh_intervals"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token string">"5s"</span><span class="token punctuation">,</span>      <span class="token string">"10s"</span><span class="token punctuation">,</span>      <span class="token string">"30s"</span><span class="token punctuation">,</span>      <span class="token string">"1m"</span><span class="token punctuation">,</span>      <span class="token string">"5m"</span><span class="token punctuation">,</span>      <span class="token string">"15m"</span><span class="token punctuation">,</span>      <span class="token string">"30m"</span><span class="token punctuation">,</span>      <span class="token string">"1h"</span><span class="token punctuation">,</span>      <span class="token string">"2h"</span><span class="token punctuation">,</span>      <span class="token string">"1d"</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token property">"time_options"</span><span class="token operator">:</span> <span class="token punctuation">[</span>      <span class="token string">"5m"</span><span class="token punctuation">,</span>      <span class="token string">"15m"</span><span class="token punctuation">,</span>      <span class="token string">"1h"</span><span class="token punctuation">,</span>      <span class="token string">"6h"</span><span class="token punctuation">,</span>      <span class="token string">"12h"</span><span class="token punctuation">,</span>      <span class="token string">"24h"</span><span class="token punctuation">,</span>      <span class="token string">"2d"</span><span class="token punctuation">,</span>      <span class="token string">"7d"</span><span class="token punctuation">,</span>      <span class="token string">"30d"</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"timezone"</span><span class="token operator">:</span> <span class="token string">"browser"</span><span class="token punctuation">,</span>  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"App Metrics - Web Monitoring - InfluxDB"</span><span class="token punctuation">,</span>  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 性能监控 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET Core开源API网关 – Ocelot</title>
      <link href="/microservice/ocelot/"/>
      <url>/microservice/ocelot/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Ocelot是一个.NET API网关。该项目面向使用.NET运行微型服务/面向服务的体系结构的人员，这些体系结构需要统一的系统入口点。但是，它可以与任何使用HTTP并在ASP.NET Core支持的平台上运行的东西一起使用。</p></blockquote><blockquote><p>官网文档：<a href="https://ocelot.readthedocs.io/en/latest/" target="_blank" rel="noopener">https://ocelot.readthedocs.io/en/latest/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/ocelot/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/ocelot.png" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="一、什么是API网关"><a href="#一、什么是API网关" class="headerlink" title="一、什么是API网关"></a>一、什么是API网关</h2><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/apigateway.png" alt="" loading="lazy"></p><blockquote><p>API网关是所有应用的统一入口，一般放在微服务的最前端。从面向对象设计的角度看，它与外观模式类似。API网关封装了系统内部架构，为每个客户端提供一个定制的API，简化了客户端的调用。API网关的核心要点是：所有的客户端和消费端都通过统一的网关接入微服务，在网关层处理所有的非业务功能（比如负载均衡、流控、熔断、验证、鉴权、监控等等）。</p></blockquote><p><strong>参考资料</strong></p><blockquote><p><a href="https://www.cnblogs.com/savorboard/p/api-gateway.html" target="_blank" rel="noopener">《谈谈微服务中的 API 网关（API Gateway）》</a></p></blockquote><blockquote><p><a href="https://www.cnblogs.com/edisonchou/p/api_gateway_ocelot_foundation_01.html" target="_blank" rel="noopener">.NET Core微服务之基于Ocelot实现API网关服务</a></p></blockquote><blockquote><p><a href="https://cloud.tencent.com/developer/news/257354" target="_blank" rel="noopener">浅谈微服务之API网关</a></p></blockquote><h2 id="二、Ocelot介绍"><a href="#二、Ocelot介绍" class="headerlink" title="二、Ocelot介绍"></a>二、Ocelot介绍</h2><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/ocelot.png" alt="" loading="lazy"></p><blockquote><p>Ocelot是一个.NET API网关。该项目针对的是使用.NET运行面向微服务/面向服务的体系结构的人，这些体系结构需要统一的入口点。</p></blockquote><p><strong>OCelot特征</strong></p><ul><li>路由</li><li>请求聚合</li><li>Consul和Eureka的服务发现</li><li>Kubernetes</li><li>WebSockets</li><li>认证</li><li>授权</li><li>限速</li><li>高速缓存</li><li>重试策略/ QoS</li><li>负载均衡</li><li>记录/跟踪/关联</li><li>标头/查询字符串/声明转换</li><li>自定义中间件/委托处理程序</li><li>配置/管理REST API</li></ul><p><a href="https://github.com/ThreeMammals/Ocelot" target="_blank" rel="noopener">项目地址github</a></p><h2 id="三、Ocelot使用"><a href="#三、Ocelot使用" class="headerlink" title="三、Ocelot使用"></a>三、Ocelot使用</h2><p>Ocelot有许多特性，先看看基础配置</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"ReRoutes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"UpstreamPathTemplate"</span><span class="token operator">:</span> <span class="token string">"/{everything}"</span><span class="token punctuation">,</span>      <span class="token property">"UpstreamHttpMethod"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"Get"</span><span class="token punctuation">,</span> <span class="token string">"Post"</span><span class="token punctuation">,</span> <span class="token string">"Delete"</span><span class="token punctuation">,</span> <span class="token string">"Put"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamPathTemplate"</span><span class="token operator">:</span> <span class="token string">"/{everything}"</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamScheme"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>      <span class="token property">"LoadBalancer"</span><span class="token operator">:</span> <span class="token string">"RoundRobin"</span><span class="token punctuation">,</span>      <span class="token property">"UpstreamHeaderTransform"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"X-Forwarded-For"</span><span class="token operator">:</span> <span class="token string">"{RemoteIpAddress}"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamHostAndPorts"</span><span class="token operator">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>              <span class="token property">"Host"</span><span class="token operator">:</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span>              <span class="token property">"Port"</span><span class="token operator">:</span> <span class="token number">21021</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"GlobalConfiguration"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">"http://localhost:9000"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>进阶配置</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"ReRoutes"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"UpstreamPathTemplate"</span><span class="token operator">:</span> <span class="token string">"/{everything}"</span><span class="token punctuation">,</span>      <span class="token property">"UpstreamHttpMethod"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"Get"</span><span class="token punctuation">,</span> <span class="token string">"Post"</span><span class="token punctuation">,</span> <span class="token string">"Delete"</span><span class="token punctuation">,</span> <span class="token string">"Put"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamPathTemplate"</span><span class="token operator">:</span> <span class="token string">"/{everything}"</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamScheme"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>      <span class="token property">"LoadBalancer"</span><span class="token operator">:</span> <span class="token string">"RoundRobin"</span><span class="token punctuation">,</span>      <span class="token property">"SwaggerKey"</span><span class="token operator">:</span> <span class="token string">"swg1"</span><span class="token punctuation">,</span>      <span class="token property">"UpstreamHeaderTransform"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"X-Forwarded-For"</span><span class="token operator">:</span> <span class="token string">"{RemoteIpAddress}"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"ServiceName"</span><span class="token operator">:</span> <span class="token string">"ServiceA"</span><span class="token punctuation">,</span> // 服务名称，要和 Consul 的服务名称一致      <span class="token property">"UseServiceDiscovery"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"UpstreamPathTemplate"</span><span class="token operator">:</span> <span class="token string">"/aqr/{everything}"</span><span class="token punctuation">,</span>      <span class="token property">"UpstreamHttpMethod"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"Get"</span><span class="token punctuation">,</span> <span class="token string">"Post"</span><span class="token punctuation">,</span> <span class="token string">"Delete"</span><span class="token punctuation">,</span> <span class="token string">"Put"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamPathTemplate"</span><span class="token operator">:</span> <span class="token string">"/{everything}"</span><span class="token punctuation">,</span>      <span class="token property">"DownstreamScheme"</span><span class="token operator">:</span> <span class="token string">"http"</span><span class="token punctuation">,</span>      <span class="token property">"LoadBalancer"</span><span class="token operator">:</span> <span class="token string">"RoundRobin"</span><span class="token punctuation">,</span>      <span class="token property">"SwaggerKey"</span><span class="token operator">:</span> <span class="token string">"swg2"</span><span class="token punctuation">,</span>      <span class="token property">"UpstreamHeaderTransform"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"X-Forwarded-For"</span><span class="token operator">:</span> <span class="token string">"{RemoteIpAddress}"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"ServiceName"</span><span class="token operator">:</span> <span class="token string">"ServiceB"</span><span class="token punctuation">,</span> // 服务名称，要和 Consul 的服务名称一致      <span class="token property">"UseServiceDiscovery"</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"SwaggerEndPoints"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"Key"</span><span class="token operator">:</span> <span class="token string">"swg1"</span><span class="token punctuation">,</span> // 和 ReRoutes 中的 SwaggerKey 相同      <span class="token property">"Config"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"ServiceA API"</span><span class="token punctuation">,</span>          <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"v1"</span><span class="token punctuation">,</span>          <span class="token property">"Url"</span><span class="token operator">:</span> <span class="token string">"http://localhost:21021/swagger/v1/swagger.json"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"Key"</span><span class="token operator">:</span> <span class="token string">"swg2"</span><span class="token punctuation">,</span> // 和 ReRoutes 中的 SwaggerKey 相同      <span class="token property">"Config"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          <span class="token property">"Name"</span><span class="token operator">:</span> <span class="token string">"ServiceB API"</span><span class="token punctuation">,</span>          <span class="token property">"Version"</span><span class="token operator">:</span> <span class="token string">"v1"</span><span class="token punctuation">,</span>          <span class="token property">"Url"</span><span class="token operator">:</span> <span class="token string">"http://localhost:21031/swagger/v1/swagger.json"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token property">"GlobalConfiguration"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>    <span class="token property">"ServiceDiscoveryProvider"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"Host"</span><span class="token operator">:</span> <span class="token string">"172.16.96.107"</span><span class="token punctuation">,</span>      <span class="token property">"Port"</span><span class="token operator">:</span> <span class="token number">8500</span>      <span class="token property">"ConfigurationKey"</span><span class="token operator">:</span> <span class="token string">"Oceolot_A"</span> //存储在Consul上的Key    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网关 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Oracle数据库</title>
      <link href="/microservice/oracle/"/>
      <url>/microservice/oracle/</url>
      
        <content type="html"><![CDATA[<p><a href="https://uncmd.github.io/microservice/oracle/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/oracle.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="Oracle介绍"><a href="#Oracle介绍" class="headerlink" title="Oracle介绍"></a>Oracle介绍</h2><p>Oracle Database，又名Oracle RDBMS，或简称Oracle。是甲骨文公司的一款关系数据库管理系统。它是在数据库领域一直处于领先地位的产品。可以说Oracle数据库系统是目前世界上流行的关系数据库管理系统，系统可移植性好、使用方便、功能强，适用于各类大、中、小、微机环境。它是一种高效率、可靠性好的、适应高吞吐量的数据库方案。</p><h2 id="Oracle使用"><a href="#Oracle使用" class="headerlink" title="Oracle使用"></a>Oracle使用</h2><h3 id="锁表锁包查询"><a href="#锁表锁包查询" class="headerlink" title="锁表锁包查询"></a>锁表锁包查询</h3><pre class=" language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 查询锁包</span><span class="token keyword">SELECT</span> <span class="token string">'alter system kill session '</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token string">''</span> <span class="token operator">||</span> sid <span class="token operator">||</span> <span class="token string">','</span> <span class="token operator">||</span> <span class="token keyword">serial</span><span class="token comment" spellcheck="true"># || '''immediate;', a.*</span>  <span class="token keyword">FROM</span> dba_ddl_locks <span class="token number">a</span><span class="token punctuation">,</span> v$<span class="token keyword">session</span> ss <span class="token keyword">WHERE</span> <span class="token number">a</span><span class="token punctuation">.</span>name <span class="token operator">LIKE</span> <span class="token string">'%包名%'</span>   <span class="token operator">AND</span> <span class="token number">a</span><span class="token punctuation">.</span>session_id <span class="token operator">=</span> ss<span class="token punctuation">.</span>sid<span class="token punctuation">;</span><span class="token comment" spellcheck="true">--查看被锁的表</span><span class="token keyword">select</span> p<span class="token punctuation">.</span>spid<span class="token punctuation">,</span>       <span class="token number">a</span><span class="token punctuation">.</span><span class="token keyword">SERIAL</span><span class="token comment" spellcheck="true">#,</span>       <span class="token number">c</span><span class="token punctuation">.</span>object_name<span class="token punctuation">,</span>       <span class="token number">b</span><span class="token punctuation">.</span>session_id<span class="token punctuation">,</span>       <span class="token number">b</span><span class="token punctuation">.</span>oracle_username<span class="token punctuation">,</span>       <span class="token number">b</span><span class="token punctuation">.</span>os_user_name<span class="token punctuation">,</span>       <span class="token string">'alter system kill session '</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token string">''</span> <span class="token operator">||</span> p<span class="token punctuation">.</span>SPID <span class="token operator">||</span> <span class="token string">','</span> <span class="token operator">||</span> <span class="token number">a</span><span class="token punctuation">.</span><span class="token keyword">SERIAL</span><span class="token comment" spellcheck="true"># || '''' || ';' strsql</span>  <span class="token keyword">from</span> v$process p<span class="token punctuation">,</span> v$<span class="token keyword">session</span> <span class="token number">a</span><span class="token punctuation">,</span> v$locked_object <span class="token number">b</span><span class="token punctuation">,</span> all_objects <span class="token number">c</span> <span class="token keyword">where</span> p<span class="token punctuation">.</span>addr <span class="token operator">=</span> <span class="token number">a</span><span class="token punctuation">.</span>paddr   <span class="token operator">and</span> <span class="token number">a</span><span class="token punctuation">.</span>process <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>process   <span class="token operator">and</span> <span class="token number">c</span><span class="token punctuation">.</span>object_id <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>object_id<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">--查询锁表原因</span><span class="token keyword">select</span> l<span class="token punctuation">.</span>session_id sid<span class="token punctuation">,</span>        s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment" spellcheck="true">#, </span>       l<span class="token punctuation">.</span>locked_mode<span class="token punctuation">,</span>        l<span class="token punctuation">.</span>oracle_username<span class="token punctuation">,</span>        s<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token comment" spellcheck="true">#, </span>       l<span class="token punctuation">.</span>os_user_name<span class="token punctuation">,</span>        s<span class="token punctuation">.</span>machine<span class="token punctuation">,</span>        s<span class="token punctuation">.</span>terminal<span class="token punctuation">,</span>        <span class="token number">a</span><span class="token punctuation">.</span>sql_text<span class="token punctuation">,</span>        <span class="token number">a</span><span class="token punctuation">.</span><span class="token keyword">action</span><span class="token keyword">from</span> v$sqlarea <span class="token number">a</span><span class="token punctuation">,</span> v$<span class="token keyword">session</span> s<span class="token punctuation">,</span> v$locked_object l <span class="token keyword">where</span> l<span class="token punctuation">.</span>session_id <span class="token operator">=</span> s<span class="token punctuation">.</span>sid    <span class="token operator">and</span> s<span class="token punctuation">.</span>prev_sql_addr <span class="token operator">=</span> <span class="token number">a</span><span class="token punctuation">.</span>address <span class="token keyword">order</span> <span class="token keyword">by</span> sid<span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment" spellcheck="true">#;</span><span class="token comment" spellcheck="true">-- --批量解锁语句生成</span><span class="token keyword">SELECT</span> A<span class="token punctuation">.</span>OBJECT_NAME<span class="token punctuation">,</span>       B<span class="token punctuation">.</span>SESSION_ID<span class="token punctuation">,</span>       C<span class="token punctuation">.</span><span class="token keyword">SERIAL</span><span class="token comment" spellcheck="true">#,</span>       <span class="token string">'alter system kill session '</span><span class="token string">''</span> <span class="token operator">||</span> B<span class="token punctuation">.</span>SESSION_ID <span class="token operator">||</span> <span class="token string">','</span> <span class="token operator">||</span> C<span class="token punctuation">.</span><span class="token keyword">SERIAL</span><span class="token comment" spellcheck="true"># ||</span>       <span class="token string">''</span><span class="token string">'; '</span> <span class="token keyword">AS</span> A<span class="token punctuation">,</span>       C<span class="token punctuation">.</span>PROGRAM<span class="token punctuation">,</span>       C<span class="token punctuation">.</span>USERNAME<span class="token punctuation">,</span>       C<span class="token punctuation">.</span>COMMAND<span class="token punctuation">,</span>       C<span class="token punctuation">.</span>MACHINE<span class="token punctuation">,</span>       C<span class="token punctuation">.</span>LOCKWAIT  <span class="token keyword">FROM</span> ALL_OBJECTS A<span class="token punctuation">,</span> V$LOCKED_OBJECT B<span class="token punctuation">,</span> V$<span class="token keyword">SESSION</span> C <span class="token keyword">WHERE</span> A<span class="token punctuation">.</span>OBJECT_ID <span class="token operator">=</span> B<span class="token punctuation">.</span>OBJECT_ID   <span class="token operator">AND</span> C<span class="token punctuation">.</span>SID <span class="token operator">=</span> B<span class="token punctuation">.</span>SESSION_ID<span class="token punctuation">;</span></code></pre><h3 id="Oracle把逗号分割的字符串转换为可放入in的条件语句的字符数列"><a href="#Oracle把逗号分割的字符串转换为可放入in的条件语句的字符数列" class="headerlink" title="Oracle把逗号分割的字符串转换为可放入in的条件语句的字符数列"></a>Oracle把逗号分割的字符串转换为可放入in的条件语句的字符数列</h3><pre class=" language-sql"><code class="language-sql">使用例子：<span class="token keyword">SELECT</span> rownum sn<span class="token punctuation">,</span> column_value <span class="token keyword">FROM</span> <span class="token keyword">TABLE</span><span class="token punctuation">(</span>split<span class="token punctuation">(</span>p_pmb<span class="token punctuation">,</span> <span class="token string">'|'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>split方法：<span class="token keyword">CREATE</span> <span class="token operator">OR</span> REPLACE <span class="token keyword">FUNCTION</span> <span class="token string">"SPLIT"</span> <span class="token punctuation">(</span>p_list varchar2<span class="token punctuation">,</span>p_sep varchar2 :<span class="token operator">=</span> <span class="token string">','</span><span class="token punctuation">)</span> <span class="token keyword">return</span> type_split pipelined<span class="token operator">IS</span>l_idx pls_integer<span class="token punctuation">;</span>v_list varchar2<span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span> :<span class="token operator">=</span> p_list<span class="token punctuation">;</span><span class="token keyword">begin</span>      loop           l_idx :<span class="token operator">=</span> instr<span class="token punctuation">(</span>v_list<span class="token punctuation">,</span>p_sep<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">if</span> l_idx <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">then</span>               pipe <span class="token keyword">row</span><span class="token punctuation">(</span>substr<span class="token punctuation">(</span>v_list<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>l_idx<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               v_list :<span class="token operator">=</span> substr<span class="token punctuation">(</span>v_list<span class="token punctuation">,</span>l_idx<span class="token operator">+</span>length<span class="token punctuation">(</span>p_sep<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token keyword">else</span>                pipe <span class="token keyword">row</span><span class="token punctuation">(</span>v_list<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">exit</span><span class="token punctuation">;</span>           <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>      <span class="token keyword">end</span> loop<span class="token punctuation">;</span>      <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token keyword">end</span> split<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> TAB_A T1 <span class="token keyword">WHERE</span>  T1<span class="token punctuation">.</span>CODE  <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> REGEXP_SUBSTR<span class="token punctuation">(</span><span class="token string">'589,321'</span><span class="token punctuation">,</span><span class="token string">'[^,]+'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> LEVEL<span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> REGEXP_SUBSTR<span class="token punctuation">(</span><span class="token string">'SMITH,ALLEN,WARD,JONES'</span><span class="token punctuation">,</span> <span class="token string">'[^,]+'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> LEVEL<span class="token punctuation">)</span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span></code></pre><h3 id="Oracle杀掉进程的三种方式"><a href="#Oracle杀掉进程的三种方式" class="headerlink" title="Oracle杀掉进程的三种方式"></a>Oracle杀掉进程的三种方式</h3><p>1、ALTER SYSTEM KILL SESSION</p><p>关于KILL SESSION Clause ，如下官方文档描述所示，alter system kill session实际上不是真正的杀死会话，它只是将会话标记为终止。等待PMON进程来清除会话。</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> SYSTEM <span class="token keyword">KILL</span> <span class="token keyword">SESSION</span> 'sid<span class="token punctuation">,</span><span class="token keyword">serial</span><span class="token comment" spellcheck="true">#'; --终止会话，不释放资源</span><span class="token keyword">alter</span> system <span class="token keyword">kill</span> <span class="token keyword">session</span> 'sid <span class="token keyword">serial</span><span class="token comment" spellcheck="true">#' immediate --终止会话，释放资源</span></code></pre><p>2、ALTER SYSTEM DISCONNECT SESSION</p><p>ALTER SYSTEM DISCONNECT SESSION 杀掉专用服务器(DEDICATED SERVER)或共享服务器的连接会话，它等价于从操作系统杀掉进程。它有两个选项POST_TRANSACTION和IMMEDIATE， 其中POST_TRANSACTION表示等待事务完成后断开会话，IMMEDIATE表示中断会话，立即回滚事务。</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> SYSTEM DISCONNECT <span class="token keyword">SESSION</span> 'sid<span class="token punctuation">,</span><span class="token keyword">serial</span><span class="token comment" spellcheck="true">#' POST_TRANSACTION;</span><span class="token keyword">ALTER</span> SYSTEM DISCONNECT <span class="token keyword">SESSION</span> 'sid<span class="token punctuation">,</span><span class="token keyword">serial</span><span class="token comment" spellcheck="true">#' IMMEDIATE;</span></code></pre><p>3、KILL -9 SPID （Linux） 或 orakill ORACLE_SID spid　（Windows）</p><p>可以使用下面SQL语句找到对应的操作系统进程SPID，然后杀掉。</p><pre class=" language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> s<span class="token punctuation">.</span>inst_id<span class="token punctuation">,</span>       s<span class="token punctuation">.</span>sid<span class="token punctuation">,</span>       s<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment" spellcheck="true">#,</span>       p<span class="token punctuation">.</span>spid<span class="token punctuation">,</span>       s<span class="token punctuation">.</span>username<span class="token punctuation">,</span>       s<span class="token punctuation">.</span>program<span class="token keyword">FROM</span>   gv$<span class="token keyword">session</span> s       <span class="token keyword">JOIN</span> gv$process p <span class="token keyword">ON</span> p<span class="token punctuation">.</span>addr <span class="token operator">=</span> s<span class="token punctuation">.</span>paddr <span class="token operator">AND</span> p<span class="token punctuation">.</span>inst_id <span class="token operator">=</span> s<span class="token punctuation">.</span>inst_id<span class="token keyword">WHERE</span>  s<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">!=</span> <span class="token string">'BACKGROUND'</span><span class="token punctuation">;</span></code></pre><blockquote><p>杀掉操作系统进程是一件危险的事情，尤其不要误杀。所以在执行前，一定要谨慎确认。</p></blockquote><p>在数据库如果要彻底杀掉一个会话，尤其是大事务会话，最好是使用ALTER SYSTEM DISCONNECT SESSION IMMEDIATE或使用下面步骤：</p><p>1、首先在操作系统级别Kill掉进程。</p><p>2、在数据库内部KILL SESSION</p><p>或者反过来亦可。这样可以快速终止进程，释放资源。</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微服务概览</title>
      <link href="/microservice/overview/"/>
      <url>/microservice/overview/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本微服务系统是以 ABP 作为后端服务的现代化微服务框架</p></blockquote><p><a href="https://uncmd.github.io/microservice/overview/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/MicroService.png" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h2><ul><li><p><a href="https://github.com/abpframework/abp/tree/master/samples/MicroserviceDemo" target="_blank" rel="noopener">ABP框架微服务演示项目</a></p></li><li><p><a href="https://github.com/geffzhang/NanoFabric" target="_blank" rel="noopener">张善友NanoFabric</a></p></li><li><p><a href="https://github.com/dotnetcore/surging" target="_blank" rel="noopener">RPC高性能微服务框架surging</a></p></li><li><p><a href="https://github.com/axzxs2001/HisMicroserviceSample" target="_blank" rel="noopener">桂素伟基于.NET Core的微服务示例</a></p></li><li><p><a href="http://aka.ms/MicroservicesEbook" target="_blank" rel="noopener">.NET微服务:容器化.NET引用架构指南</a>，示例项目<a href="https://github.com/dotnet-architecture/eShopOnContainers" target="_blank" rel="noopener">eShopOnContainers</a></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/eShopBook.png" alt="" loading="lazy"></p><ul><li><a href="https://www.cnblogs.com/edisonchou/p/dotnetcore_microservice_foundation_blogs_index_final.html" target="_blank" rel="noopener">Edison Zhou微服务架构系列文章</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PostgreSQL</title>
      <link href="/microservice/postgresql/"/>
      <url>/microservice/postgresql/</url>
      
        <content type="html"><![CDATA[<h2 id="PostgreSQL介绍"><a href="#PostgreSQL介绍" class="headerlink" title="PostgreSQL介绍"></a>PostgreSQL介绍</h2><p>PostgreSQL是一种特性非常齐全的自由软件的对象-关系型数据库管理系统（ORDBMS），是以加州大学计算机系开发的POSTGRES，4.2版本为基础的对象关系型数据库管理系统。POSTGRES的许多领先概念只是在比较迟的时候才出现在商业网站数据库中。PostgreSQL支持大部分的SQL标准并且提供了很多其他现代特性，如复杂查询、外键、触发器、视图、事务完整性、多版本并发控制等。同样，PostgreSQL也可以用许多方法扩展，例如通过增加新的数据类型、函数、操作符、聚集函数、索引方法、过程语言等。另外，因为许可证的灵活，任何人都可以以任何目的免费使用、修改和分发PostgreSQL。</p><p><a href="https://www.postgresql.org/" target="_blank" rel="noopener">PostgreSQL官网</a></p><h2 id="PostgreSQL使用"><a href="#PostgreSQL使用" class="headerlink" title="PostgreSQL使用"></a>PostgreSQL使用</h2><p>用csv导入数据的时候报invalid byte sequence for encoding “UTF8” 0xd2 0xc6错误<br>原因是csv的编码不是UTF8<br>解决方法：用Notepad++打开csv文件，然后选择编码-转为UTF-8编码</p><p>csv文件的列名要和表名一致</p><p>– 序列重置到1000<br>alter sequence sequence_name restart with 1000;</p><p>– 下一序列值<br>SELECT nextval(‘sequence_name’);</p><p>被引用表(referenced table)中的被引用列(referenced column)必须是一个非延迟的唯一约(unique key)束或者主键约束(primary key)</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RibbitMQ</title>
      <link href="/microservice/ribbitmq/"/>
      <url>/microservice/ribbitmq/</url>
      
        <content type="html"><![CDATA[<h2 id="RibbitMQ介绍"><a href="#RibbitMQ介绍" class="headerlink" title="RibbitMQ介绍"></a>RibbitMQ介绍</h2><p>RabbitMQ是实现了高级消息队列协议（AMQP）的开源消息代理软件（亦称面向消息的中间件）。RabbitMQ服务器是用Erlang语言编写的，而集群和故障转移是构建在开放电信平台框架上的。所有主要的编程语言均有与代理接口通讯的客户端库。</p><p><a href="https://www.rabbitmq.com/" target="_blank" rel="noopener">RibbitMQ官网</a></p><h2 id="RibbitMQ使用"><a href="#RibbitMQ使用" class="headerlink" title="RibbitMQ使用"></a>RibbitMQ使用</h2><p>常用命令</p><blockquote><p>rabbitmqctl.bat stop</p></blockquote><blockquote><p>rabbitmqctl.bat status</p></blockquote><blockquote><p>rabbitmq-plugins enable rabbitmq_management</p></blockquote><blockquote><p>默认UI地址：<a href="http://localhost:15672" target="_blank" rel="noopener">http://localhost:15672</a></p></blockquote><p>连接字符串为：amqp://guest:<a href="mailto:guest@172.20.212.164">guest@172.20.212.164</a>:5672/</p><p>AuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism PLAIN</p><p>原因如下：账号guest具有所有的操作权限，并且又是默认账号，出于安全因素的考虑，guest用户只能通过localhost登陆使用，并建议修改guest用户的密码以及新建其他账号管理使用rabbitmq(该功能是在3.3.0版本引入的)。</p><p>解决一：改为 amqp://guest:guest@localhost:5672/</p><p>解决二：新建了一个用户admin，密码也是admin，并开启了所有权限，连接字符串改为 amqp://admin:<a href="mailto:admin@172.20.212.164">admin@172.20.212.164</a>:5672/</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>定时任务</title>
      <link href="/microservice/schedule/"/>
      <url>/microservice/schedule/</url>
      
        <content type="html"><![CDATA[<h2 id="定时任务介绍"><a href="#定时任务介绍" class="headerlink" title="定时任务介绍"></a>定时任务介绍</h2><p>定时任务用于周期性执行指定任务</p><h2 id="Hangfire使用"><a href="#Hangfire使用" class="headerlink" title="Hangfire使用"></a>Hangfire使用</h2><p>使用 Hangfire.HttpJob 扩展库，Job和接口分离</p><p>参考：</p><p><a href="https://www.cnblogs.com/Leo_wl/p/10995388.html#_label12" target="_blank" rel="noopener">分布式Job系统Hangfire</a></p><h2 id="Quatrz-NET"><a href="#Quatrz-NET" class="headerlink" title="Quatrz .NET"></a>Quatrz .NET</h2><h2 id="NuGet-服务器搭建"><a href="#NuGet-服务器搭建" class="headerlink" title="NuGet 服务器搭建"></a>NuGet 服务器搭建</h2><h3 id="在-Windows-上搭建"><a href="#在-Windows-上搭建" class="headerlink" title="在 Windows 上搭建"></a>在 Windows 上搭建</h3><p>此方式更为简单，因为nuget上有现在的nuget.server这包，就是用于做这件事情的。步骤如下（此 NuGet 包不支持 .net core版本）:</p><ul><li>创建一个mvc 项目（空） 此项目必须的 .net Framework版本必须&gt;=4.6。</li><li>引入nuget.server这个nuget包</li><li>更改Web.config配置</li></ul><table><thead><tr><th>节点名</th><th>说明</th></tr></thead><tbody><tr><td>apiKey</td><td>nuget.server的密钥配置，用于Push和delete包</td></tr><tr><td>packagesPath</td><td>nuget.server中的包存放路径</td></tr></tbody></table><ul><li>运行此项目</li></ul><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><h4 id="dotnet-nuget-delete"><a href="#dotnet-nuget-delete" class="headerlink" title="dotnet nuget delete"></a>dotnet nuget delete</h4><blockquote><p>从服务器删除或取消列出包。</p></blockquote><pre class=" language-bash"><code class="language-bash">dotnet nuget delete <span class="token punctuation">[</span><span class="token operator">&lt;</span>PACKAGE_NAME<span class="token operator">></span> <span class="token operator">&lt;</span>PACKAGE_VERSION<span class="token operator">></span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--force-english-output<span class="token punctuation">]</span> <span class="token punctuation">[</span>--interactive<span class="token punctuation">]</span> <span class="token punctuation">[</span>-k<span class="token operator">|</span>--api-key<span class="token punctuation">]</span> <span class="token punctuation">[</span>--no-service-endpoint<span class="token punctuation">]</span>    <span class="token punctuation">[</span>--non-interactive<span class="token punctuation">]</span> <span class="token punctuation">[</span>-s<span class="token operator">|</span>--source<span class="token punctuation">]</span>dotnet nuget delete <span class="token punctuation">[</span>-h<span class="token operator">|</span>--help<span class="token punctuation">]</span></code></pre><p>示例：</p><pre class=" language-bash"><code class="language-bash">dotnet nuget delete Microsoft.AspNetCore.Mvc 1.0</code></pre><h4 id="dotnet-nuget-locals"><a href="#dotnet-nuget-locals" class="headerlink" title="dotnet nuget locals"></a>dotnet nuget locals</h4><blockquote><p>清除或列出本地 NuGet 资源。</p></blockquote><pre class=" language-bash"><code class="language-bash">dotnet nuget locals <span class="token operator">&lt;</span>CACHE_LOCATION<span class="token operator">></span> <span class="token punctuation">[</span><span class="token punctuation">(</span>-c<span class="token operator">|</span>--clear<span class="token punctuation">)</span><span class="token operator">|</span><span class="token punctuation">(</span>-l<span class="token operator">|</span>--list<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>--force-english-output<span class="token punctuation">]</span>dotnet nuget locals <span class="token punctuation">[</span>-h<span class="token operator">|</span>--help<span class="token punctuation">]</span></code></pre><p>示例：</p><pre class=" language-bash"><code class="language-bash">dotnet nuget locals –l all</code></pre><h4 id="dotnet-nuget-push"><a href="#dotnet-nuget-push" class="headerlink" title="dotnet nuget push"></a>dotnet nuget push</h4><blockquote><p>将包推送到服务器，并将其发布。</p></blockquote><pre class=" language-bash"><code class="language-bash">dotnet nuget push <span class="token punctuation">[</span><span class="token operator">&lt;</span>ROOT<span class="token operator">></span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-d<span class="token operator">|</span>--disable-buffering<span class="token punctuation">]</span> <span class="token punctuation">[</span>--force-english-output<span class="token punctuation">]</span> <span class="token punctuation">[</span>--interactive<span class="token punctuation">]</span> <span class="token punctuation">[</span>-k<span class="token operator">|</span>--api-key<span class="token punctuation">]</span> <span class="token punctuation">[</span>-n<span class="token operator">|</span>--no-symbols<span class="token punctuation">]</span>    <span class="token punctuation">[</span>--no-service-endpoint<span class="token punctuation">]</span> <span class="token punctuation">[</span>-s<span class="token operator">|</span>--source<span class="token punctuation">]</span> <span class="token punctuation">[</span>-sk<span class="token operator">|</span>--symbol-api-key<span class="token punctuation">]</span> <span class="token punctuation">[</span>-ss<span class="token operator">|</span>--symbol-source<span class="token punctuation">]</span> <span class="token punctuation">[</span>-t<span class="token operator">|</span>--timeout<span class="token punctuation">]</span>dotnet nuget push <span class="token punctuation">[</span>-h<span class="token operator">|</span>--help<span class="token punctuation">]</span></code></pre><p>示例：</p><pre class=" language-bash"><code class="language-bash">dotnet nuget push foo.nupkg -k 4003d786-cc37-4004-bfdf-c4f3e8ef9b3adotnet nuget push foo.nupkg -k 4003d786-cc37-4004-bfdf-c4f3e8ef9b3a -s https://customsource/dotnet nuget push *.nupkg</code></pre><p>参考：</p><ul><li><p><a href="https://docs.microsoft.com/zh-cn/dotnet/core/tools/dotnet-nuget-delete" target="_blank" rel="noopener">https://docs.microsoft.com/zh-cn/dotnet/core/tools/dotnet-nuget-delete</a></p></li><li><p><a href="https://www.cnblogs.com/cqhaibin/p/8051834.html#sectionthree" target="_blank" rel="noopener">https://www.cnblogs.com/cqhaibin/p/8051834.html#sectionthree</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 调度 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务注册/发现Consul</title>
      <link href="/microservice/consul/"/>
      <url>/microservice/consul/</url>
      
        <content type="html"><![CDATA[<blockquote><p>自动化网络配置，发现服务并启用跨任何云或运行时的安全连接。</p></blockquote><blockquote><p>官网：<a href="https://www.consul.io/" target="_blank" rel="noopener">https://www.consul.io/</a></p></blockquote><p><a href="https://uncmd.github.io/microservice/consul/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/consul.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="Consul介绍"><a href="#Consul介绍" class="headerlink" title="Consul介绍"></a>Consul介绍</h2><p>Consul是一种服务发现和配置工具。Consul具有分布式，高可用性和极高的可扩展性。</p><p>Consul提供了几个关键功能：</p><ul><li><p>服务发现 - 使用简单的服务来注册自己并通过DNS或HTTP接口发现其他服务。也可以注册SaaS提供商等外部服务。</p></li><li><p>运行状况检查 - 运行状况检查使Consul能够快速向运营商发出有关群集中任何问题的警报 与服务发现的集成可防止将流量路由到不健康的主机，并启用服务级别的断路器。</p></li><li><p>密钥/值存储 - 灵活的密钥/值存储可以存储动态配置，功能标记，协调，领导者选举等。简单的HTTP API使其易于在任何地方使用。</p></li><li><p>多数据中心 - Consul可以识别数据中心，并且可以支持任意数量的区域而无需复杂的配置。</p></li><li><p>服务分段 - Consul Connect通过自动TLS加密和基于身份的授权实现安全的服务到服务通信。</p></li></ul><h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><p>可以在Consul网站上查看广泛的快速入门：</p><p><a href="https://www.consul.io/intro/getting-started/install.html" target="_blank" rel="noopener">https://www.consul.io/intro/getting-started/install.html</a></p><h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><p>可以在Consul网站上查看完整、全面的文档：</p><p><a href="https://www.sonsul.io/docs" target="_blank" rel="noopener">https://www.sonsul.io/docs</a></p><p>参考资料：</p><p><a href="https://blog.csdn.net/liuzhuchen/article/details/81913562" target="_blank" rel="noopener">Consul使用手册</a></p><h2 id="Consul使用"><a href="#Consul使用" class="headerlink" title="Consul使用"></a>Consul使用</h2><p>创建名称为Consul的Windows服务，并读取D:\Consul\configs文件夹中的配置：</p><blockquote><p>sc create “Consul” binPath= “D:\Consul\consul.exe agent -config-dir D:\Consul\configs” start= auto</p></blockquote><p>已注册的服务即使关闭了也不会从Consul移除，需要手动移除无效的服务，-id参数后面是服务的ID：</p><blockquote><p>consul services deregister -id=ServiceId</p></blockquote><p>Consul启动读取配置文件夹会按名称顺序读取，如先读取a.json，然后读取b.json，如果a、b中存在相同的配置项，则 b 会覆盖 a 的值。</p><blockquote><p>特别注意：</p></blockquote><blockquote><p>当服务独立部署的时候可以正常注册到 Consul，但是部署到 IIS 后，服务直到第一次接受请求才会注册。当所有服务都是通过网关请求时，网关首先要从 Consul 获取服务信息，但是服务启动后未注册导致网关无法获取服务信息，请求失败。</p></blockquote><blockquote><p>解决这个问题有两种思路，一是IIS启动和回收时立即请求一次服务（预加载），二是使用定时服务一直请求服务。</p></blockquote><blockquote><p>第一种方式可参考微软官方方案：<a href="https://docs.microsoft.com/zh-cn/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization" target="_blank" rel="noopener">IIS 8.0 Application Initialization</a>，几次尝试未成功后我使用了第二种方式，使用调度一直请求服务.</p></blockquote><p>Consul服务配置示例：</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"datacenter"</span><span class="token operator">:</span> <span class="token string">"ctl1"</span><span class="token punctuation">,</span>    <span class="token property">"node_name"</span><span class="token operator">:</span> <span class="token string">"node1"</span><span class="token punctuation">,</span>    <span class="token property">"data_dir"</span><span class="token operator">:</span> <span class="token string">"data"</span><span class="token punctuation">,</span>    <span class="token property">"performance"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"raft_multiplier"</span><span class="token operator">:</span> <span class="token number">3</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"server"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token property">"ui"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token property">"ports"</span><span class="token operator">:</span><span class="token punctuation">{</span>        <span class="token property">"http"</span><span class="token operator">:</span> <span class="token number">8500</span><span class="token punctuation">,</span>        <span class="token property">"dns"</span><span class="token operator">:</span> <span class="token number">8600</span><span class="token punctuation">,</span>        <span class="token property">"grpc"</span><span class="token operator">:</span> <span class="token number">8400</span><span class="token punctuation">,</span>        <span class="token property">"serf_lan"</span><span class="token operator">:</span> <span class="token number">8301</span><span class="token punctuation">,</span>        <span class="token property">"serf_wan"</span><span class="token operator">:</span> <span class="token number">8302</span><span class="token punctuation">,</span>        <span class="token property">"server"</span><span class="token operator">:</span> <span class="token number">8300</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"log_level"</span><span class="token operator">:</span> <span class="token string">"TRACE"</span><span class="token punctuation">,</span>    <span class="token property">"log_file"</span><span class="token operator">:</span> <span class="token string">"logs/"</span><span class="token punctuation">,</span>    <span class="token property">"bootstrap_expect"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"client_addr"</span><span class="token operator">:</span> <span class="token string">"0.0.0.0"</span><span class="token punctuation">}</span></code></pre><blockquote><p>注意：”client_addr”: 默认是127.0.0.1所以不对外提供服务，如果你要对外提供服务改成0.0.0.0。如果是默认127.0.0.1，无法从外部访问Consul的UI界面</p></blockquote><p>从配置文件注册服务：</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"services"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"service1"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ConsulServer"</span><span class="token punctuation">,</span>      <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"primary"</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span>      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">8282</span><span class="token punctuation">,</span>      <span class="token property">"checks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>        <span class="token property">"http"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8282/Server.svc"</span><span class="token punctuation">,</span>        <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"10s"</span><span class="token punctuation">,</span>        <span class="token property">"timeout"</span><span class="token operator">:</span> <span class="token string">"1s"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"service2"</span><span class="token punctuation">,</span>      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ConsulServer"</span><span class="token punctuation">,</span>      <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"primary"</span>      <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span>      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">8283</span><span class="token punctuation">,</span>      <span class="token property">"checks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>        <span class="token property">"http"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8283/Server.svc"</span><span class="token punctuation">,</span>        <span class="token property">"interval"</span><span class="token operator">:</span> <span class="token string">"10s"</span><span class="token punctuation">,</span>        <span class="token property">"timeout"</span><span class="token operator">:</span> <span class="token string">"1s"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span></code></pre><p>acl_token：agent会使用这个token和consul server进行请求<br>acl_ttl：控制TTL的cache，默认是30s<br>addresses：一个嵌套对象，可以设置以下key：dns、http、rpc<br>advertise_addr：等同于-advertise<br>bootstrap：等同于-bootstrap<br>bootstrap_expect：等同于-bootstrap-expect<br>bind_addr：等同于-bind<br>ca_file：提供CA文件路径，用来检查客户端或者服务端的链接<br>cert_file：必须和key_file一起<br>check_update_interval：<br>client_addr：等同于-client<br>datacenter：等同于-dc<br>data_dir：等同于-data-dir<br>disable_anonymous_signature：在进行更新检查时禁止匿名签名<br>enable_debug：开启debug模式<br>enable_syslog：等同于-syslog<br>encrypt：等同于-encrypt<br>key_file：提供私钥的路径<br>leave_on_terminate：默认是false，如果为true，当agent收到一个TERM信号的时候，它会发送leave信息到集群中的其他节点上。<br>log_level：等同于-log-level  “trace”, “debug”, “info”, “warn”, 和 “err”<br>node_name:等同于-node<br>ports：这是一个嵌套对象，可以设置以下key：dns(dns地址：8600)、http(http api地址：8500)、rpc(rpc:8400)、serf_lan(lan port:8301)、serf_wan(wan port:8302)、server(server rpc:8300)<br>protocol：等同于-protocol<br>rejoin_after_leave：等同于-rejoin<br>retry_join：等同于-retry-join<br>retry_interval：等同于-retry-interval<br>server：等同于-server<br>syslog_facility：当enable_syslog被提供后，该参数控制哪个级别的信息被发送，默认Local0<br>ui_dir：等同于-ui-dir</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务注册 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分布式追踪/日志</title>
      <link href="/microservice/tracelog/"/>
      <url>/microservice/tracelog/</url>
      
        <content type="html"><![CDATA[<h2 id="分布式追踪-SkyWalking"><a href="#分布式追踪-SkyWalking" class="headerlink" title="分布式追踪 SkyWalking"></a>分布式追踪 SkyWalking</h2><h2 id="分布式日志-Exceptionless"><a href="#分布式日志-Exceptionless" class="headerlink" title="分布式日志 Exceptionless"></a>分布式日志 Exceptionless</h2><h3 id="Windows下安装ElasticSearch及工具"><a href="#Windows下安装ElasticSearch及工具" class="headerlink" title="Windows下安装ElasticSearch及工具"></a>Windows下安装ElasticSearch及工具</h3><blockquote><p>Elasticsearch 是一个分布式、可扩展、实时的搜索与数据分析引擎。 它能从项目一开始就赋予你的数据以搜索、分析和探索的能力，这是通常没有预料到的。 Elasticsearch 不仅仅只是全文搜索，我们还将介绍结构化搜索、数据分析、复杂的语言处理、地理位置和对象间关联关系等。</p></blockquote><h4 id="安装ElasticSearch"><a href="#安装ElasticSearch" class="headerlink" title="安装ElasticSearch"></a>安装ElasticSearch</h4><ul><li><p>版本：7.4.0</p></li><li><p><a href="https://elasticsearch.cn/download/" target="_blank" rel="noopener">下载地址</a></p></li><li><p>解压到本地目录</p></li><li><p>运行bin目录下的elasticsearch.bat文件</p></li><li><p>浏览器访问 <a href="http://localhost:9200/" target="_blank" rel="noopener">http://localhost:9200/</a> ，如果出现如下则服务启动成功</p></li></ul><pre class=" language-json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"name"</span> <span class="token operator">:</span> <span class="token string">"DGCACOAHVD079"</span><span class="token punctuation">,</span>  <span class="token property">"cluster_name"</span> <span class="token operator">:</span> <span class="token string">"elasticsearch"</span><span class="token punctuation">,</span>  <span class="token property">"cluster_uuid"</span> <span class="token operator">:</span> <span class="token string">"X5brr9MaRMmcnn3jqlir1w"</span><span class="token punctuation">,</span>  <span class="token property">"version"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"number"</span> <span class="token operator">:</span> <span class="token string">"7.4.0"</span><span class="token punctuation">,</span>    <span class="token property">"build_flavor"</span> <span class="token operator">:</span> <span class="token string">"default"</span><span class="token punctuation">,</span>    <span class="token property">"build_type"</span> <span class="token operator">:</span> <span class="token string">"zip"</span><span class="token punctuation">,</span>    <span class="token property">"build_hash"</span> <span class="token operator">:</span> <span class="token string">"22e1767283e61a198cb4db791ea66e3f11ab9910"</span><span class="token punctuation">,</span>    <span class="token property">"build_date"</span> <span class="token operator">:</span> <span class="token string">"2019-09-27T08:36:48.569419Z"</span><span class="token punctuation">,</span>    <span class="token property">"build_snapshot"</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token property">"lucene_version"</span> <span class="token operator">:</span> <span class="token string">"8.2.0"</span><span class="token punctuation">,</span>    <span class="token property">"minimum_wire_compatibility_version"</span> <span class="token operator">:</span> <span class="token string">"6.8.0"</span><span class="token punctuation">,</span>    <span class="token property">"minimum_index_compatibility_version"</span> <span class="token operator">:</span> <span class="token string">"6.0.0-beta1"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"tagline"</span> <span class="token operator">:</span> <span class="token string">"You Know, for Search"</span><span class="token punctuation">}</span></code></pre><p> <strong>把Elasticsearch安装为Windows服务</strong></p><p>进入bin目录下执行:</p><pre><code>安装Elasticsearch服务elasticsearch-service.bat install删除已安装的Elasticsearch服务（如果启动则停止服务）elasticsearch-service.bat remove启动Elasticsearch服务（如果已安装）elasticsearch-service.bat start停止服务（如果启动）elasticsearch-service.bat stop启动GUI来管理已安装的服务elasticsearch-service.bat manager</code></pre><h4 id="安装Kibana"><a href="#安装Kibana" class="headerlink" title="安装Kibana"></a>安装Kibana</h4><blockquote><p>Kibana 是通向 Elastic 产品集的窗口。 它可以在 Elasticsearch 中对数据进行视觉探索和实时分析。此处简单介绍，稍后会专门写一篇博客介绍Kibana及其用法</p></blockquote><ul><li><p>版本：7.4.0</p></li><li><p><a href="https://elasticsearch.cn/download/" target="_blank" rel="noopener">下载地址</a></p></li><li><p>解压到本地目录</p></li><li><p>打开 config/kibana.yml，并修改其中elasticsearch.url的值，此处的URL要修改成ElasticSearch启动的URL，默认值为 <a href="http://localhost:9200" target="_blank" rel="noopener">http://localhost:9200</a></p></li><li><p>使用 cmd 进入Kibana的bin目录，然后运行kibana.bat文件</p></li><li><p>打开浏览器，访问 <a href="http://localhost:5601" target="_blank" rel="noopener">http://localhost:5601</a> 即可。如果该端口被占用了，在启动的cmd控制台有显示访问的地址，复制访问即可。</p><p><strong>把Kibana安装为Windows服务</strong></p><p>Kibana没有提供安装Windows服务的功能，我们需要借助 nssm.exe 把Kibana安装为Windows服务。</p><p>用命令行执行 nssm.exe install，弹出安装对话框</p><ul><li><p>把 Application Path设置为Kibana安装目录\bin\kibana.bat</p></li><li><p>Startup directory设置为安装目录\bin</p></li><li><p>参数为空</p></li><li><p>服务名称为 Kibana-7.4.0</p><h2 id="log4net日志写到Oracle数据库"><a href="#log4net日志写到Oracle数据库" class="headerlink" title="log4net日志写到Oracle数据库"></a>log4net日志写到Oracle数据库</h2></li></ul></li></ul><p>1、在数据库中建表</p><pre><code>create table LOG_INFO(  logid        NUMBER,  logdate      DATE,  logthread    VARCHAR2(255),  loglevel     VARCHAR2(50),  loglogger    VARCHAR2(255),  logmessage   VARCHAR2(4000),  logexception VARCHAR2(2000))</code></pre><p>2、在log4net.config添加一个写入Oracle数据库的Appender配置</p><blockquote><p>Oracle.ManagedDataAccess.dll 的版本与公钥必须与项目引用的一致</p></blockquote><p> 在 web.config 中添加 </p><pre><code>&lt;add key=&quot;log4net.Internal.Debug&quot; value=&quot;true &quot;/&gt; </code></pre><p>可以在输出窗口查看log4net本身的日志输出，便于调试</p><pre><code>    &lt;logger name=&quot;logoracle&quot;&gt;      &lt;level value=&quot;INFO&quot; /&gt;      &lt;appender-ref ref=&quot;AdoNetAppender_Oracle&quot; /&gt;    &lt;/logger&gt;    &lt;appender name=&quot;AdoNetAppender_Oracle&quot; type=&quot;log4net.Appender.AdoNetAppender&quot;&gt;      &lt;connectionType value=&quot;Oracle.ManagedDataAccess.Client.OracleConnection, Oracle.ManagedDataAccess, Version=4.122.19.1, Culture=neutral, PublicKeyToken=89b483f429c47342&quot; /&gt;      &lt;!--&lt;connectionString value=&quot;Data Source = //xxx:1521/xxx;User ID = xxx;Password = xxx&quot; /&gt;--&gt;      &lt;connectionString value=&quot;Data Source = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = xxx)(PORT = 1521))(CONNECT_DATA = (SERVICE_NAME = xxx)));User ID = xxx;Password = xxx&quot; /&gt;      &lt;commandText value=&quot;INSERT INTO LOG_INFO (LOGDATE,LOGTHREAD,LOGLEVEL,LOGLOGGER,LOGMESSAGE,LOGEXCEPTION) VALUES (:log_date,:thread,:log_level,:logger,:message,:exception)&quot; /&gt;      &lt;bufferSize value=&quot;1&quot; /&gt;       &lt;parameter&gt;        &lt;parameterName value=&quot;:log_date&quot; /&gt;        &lt;dbType value=&quot;DateTime&quot; /&gt;        &lt;layout type=&quot;log4net.Layout.RawTimeStampLayout&quot; /&gt;      &lt;/parameter&gt;      &lt;parameter&gt;          &lt;parameterName value=&quot;:thread&quot; /&gt;          &lt;dbType value=&quot;String&quot; /&gt;          &lt;size value=&quot;255&quot; /&gt;          &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;              &lt;conversionPattern value=&quot;%thread&quot; /&gt;          &lt;/layout&gt;      &lt;/parameter&gt;      &lt;parameter&gt;          &lt;parameterName value=&quot;:log_level&quot; /&gt;          &lt;dbType value=&quot;String&quot; /&gt;          &lt;size value=&quot;50&quot; /&gt;          &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;              &lt;conversionPattern value=&quot;%level&quot; /&gt;          &lt;/layout&gt;      &lt;/parameter&gt;      &lt;parameter&gt;          &lt;parameterName value=&quot;:logger&quot; /&gt;          &lt;dbType value=&quot;String&quot; /&gt;          &lt;size value=&quot;255&quot; /&gt;          &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;              &lt;conversionPattern value=&quot;%logger&quot; /&gt;          &lt;/layout&gt;      &lt;/parameter&gt;      &lt;parameter&gt;          &lt;parameterName value=&quot;:message&quot; /&gt;          &lt;dbType value=&quot;String&quot; /&gt;          &lt;size value=&quot;4000&quot; /&gt;          &lt;layout type=&quot;log4net.Layout.PatternLayout&quot;&gt;              &lt;conversionPattern value=&quot;%message&quot; /&gt;          &lt;/layout&gt;      &lt;/parameter&gt;      &lt;parameter&gt;          &lt;parameterName value=&quot;:exception&quot; /&gt;          &lt;dbType value=&quot;String&quot; /&gt;          &lt;size value=&quot;2000&quot; /&gt;          &lt;layout type=&quot;log4net.Layout.ExceptionLayout&quot; /&gt;      &lt;/parameter&gt;    &lt;/appender&gt;</code></pre><p>3、使用Oracle配置写日志</p><pre><code>var logger = log4net.LogManager.GetLogger(&quot;logoracle&quot;)logger.Info(&quot;Info&quot;);</code></pre>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue.js 学习</title>
      <link href="/web/vue/"/>
      <url>/web/vue/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Vue是一套用于构建用户界面的<strong>渐进式框架</strong>。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p></blockquote><blockquote><p>官网地址：<a href="https://cn.vuejs.org/" target="_blank" rel="noopener">https://cn.vuejs.org/</a></p></blockquote><p><a href="https://uncmd.github.io/web/vue/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/vue.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h3><p>Vue.js 使用了基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的数据。所有 Vue.js 的模板都是合法的 HTML，所以能被遵循规范的浏览器和 HTML 解析器解析。</p><p>在底层的实现上，Vue 将模板编译成虚拟 DOM 渲染函数。结合响应系统，Vue 能够智能地计算出最少需要重新渲染多少组件，并把 DOM 操作次数减到最少。</p><p>如果你熟悉虚拟 DOM 并且偏爱 JavaScript 的原始力量，你也可以不用模板，直接写渲染 (render) 函数，使用可选的 JSX 语法。</p>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AJAX 教程</title>
      <link href="/web/ajax/"/>
      <url>/web/ajax/</url>
      
        <content type="html"><![CDATA[<h2 id="AJAX-介绍"><a href="#AJAX-介绍" class="headerlink" title="AJAX 介绍"></a>AJAX 介绍</h2><p><a href="http://www.w3school.com.cn/ajax/index.asp" target="_blank" rel="noopener">AJAX 参考手册(w3school)</a></p><p>AJAX = Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）</p><h2 id="AJAX-XMLHttpRequest-对象"><a href="#AJAX-XMLHttpRequest-对象" class="headerlink" title="AJAX XMLHttpRequest 对象"></a>AJAX XMLHttpRequest 对象</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>所有现代浏览器均支持 XMLHttpRequest 对象（IE5 和 IE6 使用 ActiveXObject）</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> xmlhttp<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE7+, Firefox, Chrome, Opera, Safari</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">else</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE6, IE5</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span></code></pre><h3 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h3><p>如需将请求发送到服务器，我们使用 XMLHttpRequest 对象的 open() 和 send() 方法</p><blockquote><p>open(method,url,async) 规定请求的类型、URL 以及是否异步处理请求</p></blockquote><ul><li><p>method：请求的类型；GET 或 POST</p></li><li><p>url：文件在服务器上的位置</p></li><li><p>async：true（异步）或 false（同步）</p></li></ul><blockquote><p>send(string) 将请求发送到服务器</p></blockquote><ul><li>string：仅用于 POST 请求</li></ul><p>如果需要像 HTML 表单那样 POST 数据，请使用 setRequestHeader() 来添加 HTTP 头。然后在 send() 方法中规定您希望发送的数据</p><pre class=" language-javascript"><code class="language-javascript">xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span><span class="token string">"ajax_test.asp"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>xmlhttp<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"Content-type"</span><span class="token punctuation">,</span><span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"fname=Bill&amp;lname=Gates"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>当使用 async=true 时，请规定在响应处于 onreadystatechange 事件中的就绪状态时执行的函数</p><pre class=" language-javascript"><code class="language-javascript">xmlhttp<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myDiv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"test1.txt"</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h3><p>如需获得来自服务器的响应，请使用 XMLHttpRequest 对象的 responseText 或 responseXML 属性</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>responseText</td><td>获得字符串形式的响应数据</td></tr><tr><td>responseXML</td><td>获得 XML 形式的响应数据</td></tr></tbody></table><pre class=" language-javascript"><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myDiv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>xmlDoc<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseXML<span class="token punctuation">;</span>txt<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>x<span class="token operator">=</span>xmlDoc<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"ARTIST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>x<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  txt<span class="token operator">=</span>txt <span class="token operator">+</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue <span class="token operator">+</span> <span class="token string">"&lt;br />"</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myDiv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>txt<span class="token punctuation">;</span></code></pre><h3 id="onreadystatechange-事件"><a href="#onreadystatechange-事件" class="headerlink" title="onreadystatechange 事件"></a>onreadystatechange 事件</h3><p>每当 readyState 改变时，就会触发 onreadystatechange 事件</p><p>readyState : 存有 XMLHttpRequest 的状态。从 0 到 4 发生变化</p><ul><li>0: 请求未初始化</li><li>1: 服务器连接已建立</li><li>2: 请求已接收</li><li>3: 请求处理中</li><li>4: 请求已完成，且响应已就绪</li></ul><p>status </p><ul><li>200 : “OK”</li><li>404 : 未找到页面</li></ul><p>当 readyState 等于 4 且状态为 200 时，表示响应已就绪</p><pre class=" language-javascript"><code class="language-javascript">xmlhttp<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myDiv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span></code></pre><blockquote><p>使用 Callback 函数</p></blockquote><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">loadXMLDoc</span><span class="token punctuation">(</span><span class="token string">"ajax_info.txt"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"myDiv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="AJAX-高级"><a href="#AJAX-高级" class="headerlink" title="AJAX 高级"></a>AJAX 高级</h2><h3 id="AJAX-ASP-PHP-实例"><a href="#AJAX-ASP-PHP-实例" class="headerlink" title="AJAX ASP/PHP 实例"></a>AJAX ASP/PHP 实例</h3><p>当用户在上面的输入框中键入字符时，会执行函数 “showHint()” 。该函数由 “onkeyup” 事件触发</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">showHint</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> xmlhttp<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"txtHint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>  <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE7+, Firefox, Chrome, Opera, Safari</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">else</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE6, IE5</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"txtHint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"gethint.asp?q="</span><span class="token operator">+</span>str<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>如果输入框为空 (str.length==0)，则该函数清空 txtHint 占位符的内容，并退出函数。</p><p>如果输入框不为空，showHint() 函数执行以下任务：</p><ul><li>创建 XMLHttpRequest 对象</li><li>当服务器响应就绪时执行函数</li><li>把请求发送到服务器上的文件</li><li>请注意我们向 URL 添加了一个参数 q （带有输入框的内容）</li></ul><p>“gethint.asp” 中的源代码会检查一个名字数组，然后向浏览器返回相应的名字</p><h3 id="AJAX-数据库实例"><a href="#AJAX-数据库实例" class="headerlink" title="AJAX 数据库实例"></a>AJAX 数据库实例</h3><p>当用户在上面的下拉列表中选择某个客户时，会执行名为 “showCustomer()” 的函数。该函数由 “onchange” 事件触发</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">showCustomer</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> xmlhttp<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token operator">==</span><span class="token string">""</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"txtHint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">;</span>  <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE7+, Firefox, Chrome, Opera, Safari</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">else</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE6, IE5</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"txtHint"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token string">"getcustomer.asp?q="</span><span class="token operator">+</span>str<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>showCustomer() 函数执行以下任务：</p><ul><li>检查是否已选择某个客户</li><li>创建 XMLHttpRequest 对象</li><li>当服务器响应就绪时执行所创建的函数</li><li>把请求发送到服务器上的文件</li><li>请注意我们向 URL 添加了一个参数 q （带有输入域中的内容）</li></ul><p>“getcustomer.asp” 中的源代码负责对数据库进行查询，然后用 HTML 表格返回结果</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">%</span>response<span class="token punctuation">.</span>expires<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>sql<span class="token operator">=</span><span class="token string">"SELECT * FROM CUSTOMERS WHERE CUSTOMERID="</span>sql<span class="token operator">=</span>sql <span class="token operator">&amp;</span> <span class="token string">"'"</span> <span class="token operator">&amp;</span> request<span class="token punctuation">.</span><span class="token function">querystring</span><span class="token punctuation">(</span><span class="token string">"q"</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token string">"'"</span><span class="token keyword">set</span> conn<span class="token operator">=</span>Server<span class="token punctuation">.</span><span class="token function">CreateObject</span><span class="token punctuation">(</span><span class="token string">"ADODB.Connection"</span><span class="token punctuation">)</span>conn<span class="token punctuation">.</span>Provider<span class="token operator">=</span><span class="token string">"Microsoft.Jet.OLEDB.4.0"</span>conn<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span><span class="token function">Mappath</span><span class="token punctuation">(</span><span class="token string">"/db/northwind.mdb"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">set</span> rs<span class="token operator">=</span>Server<span class="token punctuation">.</span><span class="token function">CreateObject</span><span class="token punctuation">(</span><span class="token string">"ADODB.recordset"</span><span class="token punctuation">)</span>rs<span class="token punctuation">.</span>Open sql<span class="token punctuation">,</span>connresponse<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;table>"</span><span class="token punctuation">)</span><span class="token keyword">do</span> until rs<span class="token punctuation">.</span>EOF  <span class="token keyword">for</span> each x <span class="token keyword">in</span> rs<span class="token punctuation">.</span>Fields    response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;tr>&lt;td>&lt;b>"</span> <span class="token operator">&amp;</span> x<span class="token punctuation">.</span>name <span class="token operator">&amp;</span> <span class="token string">"&lt;/b>&lt;/td>"</span><span class="token punctuation">)</span>    response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;td>"</span> <span class="token operator">&amp;</span> x<span class="token punctuation">.</span>value <span class="token operator">&amp;</span> <span class="token string">"&lt;/td>&lt;/tr>"</span><span class="token punctuation">)</span>  next  rs<span class="token punctuation">.</span>MoveNextloopresponse<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;/table>"</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token operator">></span></code></pre><h3 id="AJAX-XML-实例"><a href="#AJAX-XML-实例" class="headerlink" title="AJAX XML 实例"></a>AJAX XML 实例</h3><p>loadXMLDoc() 函数创建 XMLHttpRequest 对象，添加当服务器响应就绪时执行的函数，并将请求发送到服务器。</p><p>当服务器响应就绪时，会构建一个 HTML 表格，从 XML 文件中提取节点（元素），最后使用已经填充了 XML 数据的 HTML 表格来更新 txtCDInfo 占位符</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadXMLDoc</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">var</span> xmlhttp<span class="token punctuation">;</span><span class="token keyword">var</span> txt<span class="token punctuation">,</span>xx<span class="token punctuation">,</span>x<span class="token punctuation">,</span>i<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE7+, Firefox, Chrome, Opera, Safari</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token keyword">else</span>  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// code for IE6, IE5</span>  xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span>onreadystatechange<span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>    txt<span class="token operator">=</span><span class="token string">"&lt;table border='1'>&lt;tr>&lt;th>Title&lt;/th>&lt;th>Artist&lt;/th>&lt;/tr>"</span><span class="token punctuation">;</span>    x<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseXML<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"CD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>x<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>      <span class="token punctuation">{</span>      txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;tr>"</span><span class="token punctuation">;</span>      xx<span class="token operator">=</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"TITLE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">{</span>        <span class="token keyword">try</span>          <span class="token punctuation">{</span>          txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;td>"</span> <span class="token operator">+</span> xx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">+</span> <span class="token string">"&lt;/td>"</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">er</span><span class="token punctuation">)</span>          <span class="token punctuation">{</span>          txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;td> &lt;/td>"</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    xx<span class="token operator">=</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"ARTIST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">{</span>        <span class="token keyword">try</span>          <span class="token punctuation">{</span>          txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;td>"</span> <span class="token operator">+</span> xx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>nodeValue <span class="token operator">+</span> <span class="token string">"&lt;/td>"</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">er</span><span class="token punctuation">)</span>          <span class="token punctuation">{</span>          txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;td> &lt;/td>"</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>      txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;/tr>"</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    txt<span class="token operator">=</span>txt <span class="token operator">+</span> <span class="token string">"&lt;/table>"</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'txtCDInfo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>txt<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span>url<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> AJAX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>运动健身</title>
      <link href="/life/runner/"/>
      <url>/life/runner/</url>
      
        <content type="html"><![CDATA[<blockquote><p>健身是一辈子的事业，对于久坐的程序员来说更是如此。</p></blockquote><p><a href="https://uncmd.github.io/life/runner/"><img src="https://cdn.jsdelivr.net/gh/uncmd/MyResource/Hexo/images/timg.jpg" alt="" loading="lazy"></a></p><a id="more"></a><h2 id="为什么要健身"><a href="#为什么要健身" class="headerlink" title="为什么要健身"></a>为什么要健身</h2><blockquote><p>健身不仅可以增强体魄，还能减压</p></blockquote><h3 id="一、增加基础代谢率"><a href="#一、增加基础代谢率" class="headerlink" title="一、增加基础代谢率"></a>一、增加基础代谢率</h3><p>为什么我们需要练出肌肉来？提高身体的肌肉含量，是可以提高个人基础代谢率的。而提高了基础代谢率，我们就会因此而改变自身燃烧热量的基础率。肌肉是可以燃烧一部分热量的，所以肌肉含量的提高直接决定着我们的基础代谢率的提高呢。</p><p>提高基础代谢率，我们会因此预防肥胖，因为基础代谢率的提高可以帮助人体燃烧一部分热量。所以我们可因此而避免肥胖的发生呢。如果你想要找一个不用费劲就可以预防的肥胖的方法，不如试试通过提高肌肉含量，帮助自己管理好体重。</p><h3 id="二、提高自信心"><a href="#二、提高自信心" class="headerlink" title="二、提高自信心"></a>二、提高自信心</h3><p>练出一定量的肌肉，还可以提高我们的自信心。因为肌肉在某种程度上而言，确实和自信直接挂钩。因为肌肉是非常受欢迎的，有肌肉的人也是证明着自己的努力和自律，最关键的是肌肉还是力量的象征，所以练出了肌肉就可以拥有更高的自信心。同时，我们还可以通过运动得到肌肉来证明自己，这个努力成长的过程也可以提高自信。</p><h3 id="三、增加外形魅力值"><a href="#三、增加外形魅力值" class="headerlink" title="三、增加外形魅力值"></a>三、增加外形魅力值</h3><p>练出一定量的肌肉，还可以提高我们的外形的魅力指数，因为肌肉是健美的象征，也是美丽和吸引力的象征。不信你看看，那些有大块肌肉的人，通常都是比较拉风的，都是比较有魅力的。所以，我们还会因为身体肌肉含量的提高，而拥有魅力哟。</p><h3 id="四、保护内脏与骨骼"><a href="#四、保护内脏与骨骼" class="headerlink" title="四、保护内脏与骨骼"></a>四、保护内脏与骨骼</h3><p>我们需要通过肌肉保护内脏和骨骼，肌肉有这个功能，如果练出更多的肌肉，我们就会因此而拥有更多的保护。所以我们可通过增肌而改善自己的身体健康和防御能力哟。这可真的是太好了呀。</p><h3 id="五、侧面改善生活规律"><a href="#五、侧面改善生活规律" class="headerlink" title="五、侧面改善生活规律"></a>五、侧面改善生活规律</h3><p>我们还可通过增加肌肉而改善自己的生活规律，让自己拥有更好的生活品质和生活的质量。因为肌肉含量的提高，证明着我们已经保持了健康的生活规律，如果生活规律不健康，我们是很难因此而得到肌肉的成长的。另外维持肌肉也需要良好的生活规律，我们会因为好的生活规律而变得健康起来。所以肌肉对于生活规律的维持同样有帮助。所以我么会通过练肌肉的同时，培养好自己的生活规律。</p><h2 id="健身计划"><a href="#健身计划" class="headerlink" title="健身计划"></a>健身计划</h2><table><thead><tr><th>日期</th><th>运动项目</th></tr></thead><tbody><tr><td>每周一、四</td><td>小跑三十分钟</td></tr><tr><td>每周二、五</td><td>Keep 腹肌锻炼</td></tr><tr><td>每周三、六</td><td>Keep 胸肌锻炼</td></tr><tr><td>每周日</td><td>跑步三十分钟</td></tr></tbody></table><h2 id="打卡"><a href="#打卡" class="headerlink" title="打卡"></a>打卡</h2><p>2019年9月</p><table><thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead><tbody><tr><td>26</td><td>27</td><td>28</td><td>29</td><td>30</td><td>31</td><td>1</td></tr><tr><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>Y.Y</td></tr><tr><td>Y.Y</td><td>Y.Y</td><td>Y.Y</td><td>N.Y</td><td>Y.Y</td><td>N.N</td><td>Y.Y</td></tr><tr><td>Y.Y</td><td>Y.Y</td><td>Y.Y</td><td>Y.Y</td><td>20</td><td>21</td><td>22</td></tr><tr><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td></tr><tr><td>30</td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 那些年立的Flag </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运动 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
